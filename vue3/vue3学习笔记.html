<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/docs/icon.png"><title>vue3 学习笔记 | 二师弟的学习笔记</title><meta name="description" content="二师弟的学习笔记">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/docs/assets/style-6d00d8ff.css" as="style"><link rel="stylesheet" href="/docs/assets/style-6d00d8ff.css">
    <link rel="modulepreload" href="/docs/assets/app-0ea0852b.js"><link rel="modulepreload" href="/docs/assets/framework-4f54a744.js"><link rel="modulepreload" href="/docs/assets/vue3学习笔记.html-6069da80.js"><link rel="modulepreload" href="/docs/assets/vue3学习笔记.html-e385610c.js"><link rel="modulepreload" href="/docs/assets/image-20230225220900276-5b15e7ba.js"><link rel="prefetch" href="/docs/assets/index.html-873919fc.js" as="script"><link rel="prefetch" href="/docs/assets/vite3.html-d13a01c0.js" as="script"><link rel="prefetch" href="/docs/assets/webpack5.html-c5d53893.js" as="script"><link rel="prefetch" href="/docs/assets/phaser3.html-4625842b.js" as="script"><link rel="prefetch" href="/docs/assets/css.html-d0f02439.js" as="script"><link rel="prefetch" href="/docs/assets/echarts.html-89479e1e.js" as="script"><link rel="prefetch" href="/docs/assets/elementui.html-5297a3c5.js" as="script"><link rel="prefetch" href="/docs/assets/html.html-5b76f10d.js" as="script"><link rel="prefetch" href="/docs/assets/js.html-28c9c2f0.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-a89623a5.js" as="script"><link rel="prefetch" href="/docs/assets/uni-app.html-033fa626.js" as="script"><link rel="prefetch" href="/docs/assets/vue2.html-40efae7e.js" as="script"><link rel="prefetch" href="/docs/assets/vue3.html-465e0201.js" as="script"><link rel="prefetch" href="/docs/assets/vuex.html-1398b4b1.js" as="script"><link rel="prefetch" href="/docs/assets/webpack.html-db7c9f84.js" as="script"><link rel="prefetch" href="/docs/assets/WebSocket.html-cd585a4d.js" as="script"><link rel="prefetch" href="/docs/assets/js方法.html-8dbf21ec.js" as="script"><link rel="prefetch" href="/docs/assets/js知识要点.html-f2011264.js" as="script"><link rel="prefetch" href="/docs/assets/事件循环.html-754a7f88.js" as="script"><link rel="prefetch" href="/docs/assets/属性描述符.html-6e334454.js" as="script"><link rel="prefetch" href="/docs/assets/文件上传.html-67af08e4.js" as="script"><link rel="prefetch" href="/docs/assets/浏览器渲染原理.html-d31fa9b5.js" as="script"><link rel="prefetch" href="/docs/assets/轮询.html-7068da83.js" as="script"><link rel="prefetch" href="/docs/assets/leetcode算法.html-fa89f797.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs8.html-b8bc19ac.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs博客接口案例.html-b53faf37.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs.html-e5252953.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs和express配合前端history模式.html-a773c754.js" as="script"><link rel="prefetch" href="/docs/assets/nvm.html-b8822afa.js" as="script"><link rel="prefetch" href="/docs/assets/pm2.html-17ac66b3.js" as="script"><link rel="prefetch" href="/docs/assets/项目笔记.html-82ac6c2d.js" as="script"><link rel="prefetch" href="/docs/assets/FastAPI.html-2767ac68.js" as="script"><link rel="prefetch" href="/docs/assets/excel.html-c6d7c8e8.js" as="script"><link rel="prefetch" href="/docs/assets/mongoDB.html-00172f1d.js" as="script"><link rel="prefetch" href="/docs/assets/selenium.html-e72897fa.js" as="script"><link rel="prefetch" href="/docs/assets/并发编程.html-15ed4b91.js" as="script"><link rel="prefetch" href="/docs/assets/日志模块.html-c9d55a69.js" as="script"><link rel="prefetch" href="/docs/assets/craco.html-4dcc1aa9.js" as="script"><link rel="prefetch" href="/docs/assets/react18.html-973190cf.js" as="script"><link rel="prefetch" href="/docs/assets/react使用lottie.html-79e48e92.js" as="script"><link rel="prefetch" href="/docs/assets/react使用svg.html-840f1048.js" as="script"><link rel="prefetch" href="/docs/assets/DOM和BOM内置对象.html-fa919f4f.js" as="script"><link rel="prefetch" href="/docs/assets/Decorator装饰器.html-0c6124dc.js" as="script"><link rel="prefetch" href="/docs/assets/Mixins混入.html-afa10a7b.js" as="script"><link rel="prefetch" href="/docs/assets/Object和object.html-82bf395b.js" as="script"><link rel="prefetch" href="/docs/assets/Partial、Pick、Record、Readonly.html-b36d334c.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy和Reflect.html-e75ba7f9.js" as="script"><link rel="prefetch" href="/docs/assets/any和void和never.html-812dee82.js" as="script"><link rel="prefetch" href="/docs/assets/infer.html-3e1c5b47.js" as="script"><link rel="prefetch" href="/docs/assets/interface接口.html-cafcbbaa.js" as="script"><link rel="prefetch" href="/docs/assets/namespace命名空间.html-2a194e1f.js" as="script"><link rel="prefetch" href="/docs/assets/reflect-metadata元数据.html-ca5dbf44.js" as="script"><link rel="prefetch" href="/docs/assets/tsconfig.json配置.html-c7ce0fb7.js" as="script"><link rel="prefetch" href="/docs/assets/ts使用Promise.html-82eaac6d.js" as="script"><link rel="prefetch" href="/docs/assets/ts基本内容.html-2c0fec89.js" as="script"><link rel="prefetch" href="/docs/assets/ts编写发布订阅模式.html-962b2645.js" as="script"><link rel="prefetch" href="/docs/assets/声明文件d.ts.html-0ab897e3.js" as="script"><link rel="prefetch" href="/docs/assets/泛型.html-c779c98d.js" as="script"><link rel="prefetch" href="/docs/assets/类型兼容.html-88f7352c.js" as="script"><link rel="prefetch" href="/docs/assets/axios.html-a980e971.js" as="script"><link rel="prefetch" href="/docs/assets/pinia.html-11694eb7.js" as="script"><link rel="prefetch" href="/docs/assets/vue-router.html-15154da2.js" as="script"><link rel="prefetch" href="/docs/assets/vue3-vite-electron.html-b737965b.js" as="script"><link rel="prefetch" href="/docs/assets/vue3一些自定义指令.html-f1303b63.js" as="script"><link rel="prefetch" href="/docs/assets/vue3其他笔记.html-a901a8ef.js" as="script"><link rel="prefetch" href="/docs/assets/vuepress.html-064a3f4c.js" as="script"><link rel="prefetch" href="/docs/assets/vue常见优化手段.html-5f03036c.js" as="script"><link rel="prefetch" href="/docs/assets/前言.html-c1e2974c.js" as="script"><link rel="prefetch" href="/docs/assets/第一篇框架设计概览.html-e4e87416.js" as="script"><link rel="prefetch" href="/docs/assets/第二篇响应系统.html-faa33985.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-007e3d49.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-482a2c47.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-5ec05c94.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-4ba11b22.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-d6e43004.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-5d079a57.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-2225520e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-b1f72b95.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-9084f6b7.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-c11822d4.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-9db0214d.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-ccc17d87.js" as="script"><link rel="prefetch" href="/docs/assets/vite3.html-b95b7af5.js" as="script"><link rel="prefetch" href="/docs/assets/webpack5.html-f837636b.js" as="script"><link rel="prefetch" href="/docs/assets/phaser3.html-ed12c05d.js" as="script"><link rel="prefetch" href="/docs/assets/css.html-32556baf.js" as="script"><link rel="prefetch" href="/docs/assets/echarts.html-88d862ff.js" as="script"><link rel="prefetch" href="/docs/assets/elementui.html-15eb9d4d.js" as="script"><link rel="prefetch" href="/docs/assets/html.html-2b3cb614.js" as="script"><link rel="prefetch" href="/docs/assets/js.html-29a95c5e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-2d6fc1ec.js" as="script"><link rel="prefetch" href="/docs/assets/uni-app.html-61008000.js" as="script"><link rel="prefetch" href="/docs/assets/vue2.html-a012d90f.js" as="script"><link rel="prefetch" href="/docs/assets/vue3.html-f8895c8e.js" as="script"><link rel="prefetch" href="/docs/assets/vuex.html-57a43e3d.js" as="script"><link rel="prefetch" href="/docs/assets/webpack.html-c10a1903.js" as="script"><link rel="prefetch" href="/docs/assets/WebSocket.html-ee5ee0b6.js" as="script"><link rel="prefetch" href="/docs/assets/js方法.html-826b1713.js" as="script"><link rel="prefetch" href="/docs/assets/js知识要点.html-c3b21c72.js" as="script"><link rel="prefetch" href="/docs/assets/事件循环.html-fd1822db.js" as="script"><link rel="prefetch" href="/docs/assets/属性描述符.html-bde26b2a.js" as="script"><link rel="prefetch" href="/docs/assets/文件上传.html-14d341e7.js" as="script"><link rel="prefetch" href="/docs/assets/浏览器渲染原理.html-1edfadbf.js" as="script"><link rel="prefetch" href="/docs/assets/轮询.html-e55a71f2.js" as="script"><link rel="prefetch" href="/docs/assets/leetcode算法.html-d0bf9df8.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs8.html-69be4e22.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs博客接口案例.html-2bb8adab.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs.html-a9696c41.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs和express配合前端history模式.html-c9a26dac.js" as="script"><link rel="prefetch" href="/docs/assets/nvm.html-f3381fc6.js" as="script"><link rel="prefetch" href="/docs/assets/pm2.html-e8b31ba0.js" as="script"><link rel="prefetch" href="/docs/assets/项目笔记.html-4f4c4986.js" as="script"><link rel="prefetch" href="/docs/assets/FastAPI.html-e843e479.js" as="script"><link rel="prefetch" href="/docs/assets/excel.html-4592f699.js" as="script"><link rel="prefetch" href="/docs/assets/mongoDB.html-168c1dad.js" as="script"><link rel="prefetch" href="/docs/assets/selenium.html-47a64703.js" as="script"><link rel="prefetch" href="/docs/assets/并发编程.html-b19fb1fa.js" as="script"><link rel="prefetch" href="/docs/assets/日志模块.html-5cf3b3c1.js" as="script"><link rel="prefetch" href="/docs/assets/craco.html-de63a6cc.js" as="script"><link rel="prefetch" href="/docs/assets/react18.html-f0c244aa.js" as="script"><link rel="prefetch" href="/docs/assets/react使用lottie.html-f42ee1db.js" as="script"><link rel="prefetch" href="/docs/assets/react使用svg.html-a7bb6f7d.js" as="script"><link rel="prefetch" href="/docs/assets/DOM和BOM内置对象.html-cb757473.js" as="script"><link rel="prefetch" href="/docs/assets/Decorator装饰器.html-054dcadb.js" as="script"><link rel="prefetch" href="/docs/assets/Mixins混入.html-8533960b.js" as="script"><link rel="prefetch" href="/docs/assets/Object和object.html-9830d052.js" as="script"><link rel="prefetch" href="/docs/assets/Partial、Pick、Record、Readonly.html-e52803be.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy和Reflect.html-3b2aa239.js" as="script"><link rel="prefetch" href="/docs/assets/any和void和never.html-5d23b979.js" as="script"><link rel="prefetch" href="/docs/assets/infer.html-12c3e7cf.js" as="script"><link rel="prefetch" href="/docs/assets/interface接口.html-458d3c87.js" as="script"><link rel="prefetch" href="/docs/assets/namespace命名空间.html-ba48fb9e.js" as="script"><link rel="prefetch" href="/docs/assets/reflect-metadata元数据.html-b3f40cbb.js" as="script"><link rel="prefetch" href="/docs/assets/tsconfig.json配置.html-0d4ad185.js" as="script"><link rel="prefetch" href="/docs/assets/ts使用Promise.html-310b4aec.js" as="script"><link rel="prefetch" href="/docs/assets/ts基本内容.html-4b5230fb.js" as="script"><link rel="prefetch" href="/docs/assets/ts编写发布订阅模式.html-e5d4fdd6.js" as="script"><link rel="prefetch" href="/docs/assets/声明文件d.ts.html-bc022730.js" as="script"><link rel="prefetch" href="/docs/assets/泛型.html-038c90c2.js" as="script"><link rel="prefetch" href="/docs/assets/类型兼容.html-f8928873.js" as="script"><link rel="prefetch" href="/docs/assets/axios.html-dd2f39ad.js" as="script"><link rel="prefetch" href="/docs/assets/pinia.html-9db217a3.js" as="script"><link rel="prefetch" href="/docs/assets/vue-router.html-b4b7800c.js" as="script"><link rel="prefetch" href="/docs/assets/vue3-vite-electron.html-16659694.js" as="script"><link rel="prefetch" href="/docs/assets/vue3一些自定义指令.html-8ae6543c.js" as="script"><link rel="prefetch" href="/docs/assets/vue3其他笔记.html-a35bf2f8.js" as="script"><link rel="prefetch" href="/docs/assets/vuepress.html-020119f9.js" as="script"><link rel="prefetch" href="/docs/assets/vue常见优化手段.html-06f0953d.js" as="script"><link rel="prefetch" href="/docs/assets/前言.html-7983b7b7.js" as="script"><link rel="prefetch" href="/docs/assets/第一篇框架设计概览.html-59515c3e.js" as="script"><link rel="prefetch" href="/docs/assets/第二篇响应系统.html-0241c283.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-e3821f77.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-aa8ddcf0.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-a554b704.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-02f7b1cd.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-7d3e4fca.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-2a9f6d0f.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-1e0216f7.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-c2818869.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-58785519.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-37eb7747.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-af439866.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-ef04918a.js" as="script"><link rel="prefetch" href="/docs/assets/photoswipe.esm-6e6cbe40.js" as="script"><link rel="prefetch" href="/docs/assets/SearchResult-fd9b7c3b.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/docs/" class="brand"><img class="logo" src="/docs/icon.png" alt="二师弟的学习笔记"><!----><span class="site-name hide-in-pad">二师弟的学习笔记</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/docs/" class="nav-link" aria-label="首页"><!---->首页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="语言"><span class="title"><!---->语言</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaScript</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/js/js%E6%96%B9%E6%B3%95.html" class="nav-link" aria-label="js语言用法"><!---->js语言用法<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>TypeScript</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/ts/ts%E5%9F%BA%E6%9C%AC%E5%86%85%E5%AE%B9.html" class="nav-link" aria-label="ts语言用法"><!---->ts语言用法<!----></a></li><li class="dropdown-subitem"><a href="/docs/ts/tsconfig.json%E9%85%8D%E7%BD%AE.html" class="nav-link" aria-label="ts相关文件"><!---->ts相关文件<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>python</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/python/selenium.html" class="nav-link" aria-label="python爬虫"><!---->python爬虫<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="打包工具"><span class="title"><!---->打包工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/docs/build-tools/vite3.html" class="nav-link" aria-label="vite3"><!---->vite3<!----></a></li><li class="dropdown-item"><a href="/docs/build-tools/webpack5.html" class="nav-link" aria-label="webpack5"><!---->webpack5<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Node"><span class="title"><!---->Node</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>NodeJS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/node/nvm.html" class="nav-link" aria-label="nvm"><!---->nvm<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/nodejs.html" class="nav-link" aria-label="nodejs"><!---->nodejs<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/pm2.html" class="nav-link" aria-label="pm2"><!---->pm2<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/nodejs%E5%92%8Cexpress%E9%85%8D%E5%90%88%E5%89%8D%E7%AB%AFhistory%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="nodejs+express+history"><!---->nodejs+express+history<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>NestJS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/node/nestjs8.html" class="nav-link" aria-label="nestjs"><!---->nestjs<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/nestjs%E5%8D%9A%E5%AE%A2%E6%8E%A5%E5%8F%A3%E6%A1%88%E4%BE%8B.html" class="nav-link" aria-label="nestjs案例"><!---->nestjs案例<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Vue"><span class="title"><!---->Vue</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Vue3</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" class="router-link-active router-link-exact-active nav-link active" aria-label="vue3学习笔记"><!---->vue3学习笔记<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue3%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0.html" class="nav-link" aria-label="vue3其他笔记"><!---->vue3其他笔记<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E6%89%8B%E6%AE%B5.html" class="nav-link" aria-label="优化"><!---->优化<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>VueRouter</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/vue-router.html" class="nav-link" aria-label="vue-router"><!---->vue-router<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>状态管理</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/pinia.html" class="nav-link" aria-label="pinia"><!---->pinia<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>书籍阅读</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/Vue.js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/%E5%89%8D%E8%A8%80.html" class="nav-link" aria-label="Vue.js设计与实现"><!---->Vue.js设计与实现<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/axios.html" class="nav-link" aria-label="axios"><!---->axios<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue3-vite-electron.html" class="nav-link" aria-label="electron桌面应用"><!---->electron桌面应用<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vuepress.html" class="nav-link" aria-label="VuePress"><!---->VuePress<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue3%E4%B8%80%E4%BA%9B%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4.html" class="nav-link" aria-label="vue3一些自定义指令"><!---->vue3一些自定义指令<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="React"><span class="title"><!---->React</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>React18</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/react/react18.html" class="nav-link" aria-label="react18学习笔记"><!---->react18学习笔记<!----></a></li><li class="dropdown-subitem"><a href="/docs/react/react%E4%BD%BF%E7%94%A8svg.html" class="nav-link" aria-label="react使用svg"><!---->react使用svg<!----></a></li><li class="dropdown-subitem"><a href="/docs/react/react%E4%BD%BF%E7%94%A8lottie.html" class="nav-link" aria-label="react使用lottie"><!---->react使用lottie<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/react/craco.html" class="nav-link" aria-label="craco"><!---->craco<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/docs/leetcode/leetcode%E7%AE%97%E6%B3%95.html" class="nav-link" aria-label="LeetCode"><!---->LeetCode<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/games/phaser3.html" class="nav-link" aria-label="游戏"><!---->游戏<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/interview/" class="nav-link" aria-label="面试"><!---->面试<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/bkk1024/docs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">搜索</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Vue3</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="vue3 学习笔记"><!---->vue3 学习笔记<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#创建项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建项目"><!---->创建项目<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue-指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vue 指令"><!---->vue 指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#虚拟-dom-和-diff-算法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="虚拟 dom 和 diff 算法"><!---->虚拟 dom 和 diff 算法<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#虚拟-dom" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="虚拟 dom"><!---->虚拟 dom<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#diff-算法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="diff 算法"><!---->diff 算法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#ref-全家桶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ref 全家桶"><!---->ref 全家桶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#ref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ref"><!---->ref<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#isref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="isRef"><!---->isRef<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#shallowref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="shallowRef"><!---->shallowRef<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#triggerref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="triggerRef"><!---->triggerRef<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#customref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="customRef"><!---->customRef<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#reactive-全家桶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Reactive 全家桶"><!---->Reactive 全家桶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#readonly" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="readonly"><!---->readonly<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#shallowreactive" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="shallowReactive"><!---->shallowReactive<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#认识-to-系列全家桶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="认识 to 系列全家桶"><!---->认识 to 系列全家桶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#toref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="toRef"><!---->toRef<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#torefs" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="toRefs"><!---->toRefs<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#toraw" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="toRaw"><!---->toRaw<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#认识-computed-计算属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="认识 computed 计算属性"><!---->认识 computed 计算属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#认识-watch-侦听器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="认识 watch 侦听器"><!---->认识 watch 侦听器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#高级侦听器-watcheffect" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="高级侦听器 watchEffect"><!---->高级侦听器 watchEffect<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#父子组件传参" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="父子组件传参"><!---->父子组件传参<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#父组件向子组件传参" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="父组件向子组件传参"><!---->父组件向子组件传参<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#子组件向父组件传参" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="子组件向父组件传参"><!---->子组件向父组件传参<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#子组件给父组件暴露一些属性或方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="子组件给父组件暴露一些属性或方法"><!---->子组件给父组件暴露一些属性或方法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#全局组件、局部组件、递归组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="全局组件、局部组件、递归组件"><!---->全局组件、局部组件、递归组件<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#全局组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="全局组件"><!---->全局组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#局部组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="局部组件"><!---->局部组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#递归组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="递归组件"><!---->递归组件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#动态组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="动态组件"><!---->动态组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#插槽-slot" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="插槽 slot"><!---->插槽 slot<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#匿名插槽" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="匿名插槽"><!---->匿名插槽<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#具名插槽" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="具名插槽"><!---->具名插槽<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#作用域插槽" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="作用域插槽"><!---->作用域插槽<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#动态插槽" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="动态插槽"><!---->动态插槽<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#异步组件-代码分包-suspense" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="异步组件&amp;代码分包&amp;suspense"><!---->异步组件&amp;代码分包&amp;suspense<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#teleport-传送组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Teleport 传送组件"><!---->Teleport 传送组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#keep-alive" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="keep-alive"><!---->keep-alive<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#include-exclude" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="include &amp; exclude"><!---->include &amp; exclude<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#max" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="max"><!---->max<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#transition" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Transition"><!---->Transition<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#transitiongroup" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="TransitionGroup"><!---->TransitionGroup<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#provide-和-inject" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Provide 和 Inject"><!---->Provide 和 Inject<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#兄弟组件间传值" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="兄弟组件间传值"><!---->兄弟组件间传值<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#tsx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="TSX"><!---->TSX<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#v-model" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="v-model"><!---->v-model<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#给自定义组件绑定数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="给自定义组件绑定数据"><!---->给自定义组件绑定数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#绑定多个值" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="绑定多个值"><!---->绑定多个值<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#自定义-v-model-修饰符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义 v-model 修饰符"><!---->自定义 v-model 修饰符<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#自定义指令-directive" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义指令 directive"><!---->自定义指令 directive<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue3-定义全局函数和变量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vue3 定义全局函数和变量"><!---->vue3 定义全局函数和变量<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#编写-vue3-插件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="编写 vue3 插件"><!---->编写 vue3 插件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#css-style-完整特性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="css style 完整特性"><!---->css style 完整特性<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#deep" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label=":deep()"><!---->:deep()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#插槽选择器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="插槽选择器"><!---->插槽选择器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#全局选择器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="全局选择器"><!---->全局选择器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#v-bind" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="v-bind"><!---->v-bind<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#css-module" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CSS Module"><!---->CSS Module<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue-开发移动端" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vue 开发移动端"><!---->vue 开发移动端<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue-开发桌面程序-electron" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vue 开发桌面程序 Electron"><!---->vue 开发桌面程序 Electron<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue3-vite-开发中的环境变量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vue3 + vite 开发中的环境变量"><!---->vue3 + vite 开发中的环境变量<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vite-分析打包后的各个文件夹大小" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vite 分析打包后的各个文件夹大小"><!---->vite 分析打包后的各个文件夹大小<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/docs/vue3/vue3%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0.html" class="nav-link sidebar-link sidebar-page" aria-label="vue3 其他笔记"><!---->vue3 其他笔记<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/vue3/vue%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E6%89%8B%E6%AE%B5.html" class="nav-link sidebar-link sidebar-page" aria-label="Vue 常见优化手段"><!---->Vue 常见优化手段<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/vue3/Vue.js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0" class="nav-link sidebar-link sidebar-page" aria-label="Vue.js设计与实现"><!---->Vue.js设计与实现<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">VueRouter</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">状态管理</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Vue.js设计与实现</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">其他</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->vue3 学习笔记</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-03-02T13:23:18.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 33 分钟</span><meta property="timeRequired" content="PT33M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#创建项目" class="router-link-active router-link-exact-active toc-link level2">创建项目</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue-指令" class="router-link-active router-link-exact-active toc-link level2">vue 指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#虚拟-dom-和-diff-算法" class="router-link-active router-link-exact-active toc-link level2">虚拟 dom 和 diff 算法</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#虚拟-dom" class="router-link-active router-link-exact-active toc-link level3">虚拟 dom</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#diff-算法" class="router-link-active router-link-exact-active toc-link level3">diff 算法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#ref-全家桶" class="router-link-active router-link-exact-active toc-link level2">ref 全家桶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#ref" class="router-link-active router-link-exact-active toc-link level3">ref</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#isref" class="router-link-active router-link-exact-active toc-link level3">isRef</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#shallowref" class="router-link-active router-link-exact-active toc-link level3">shallowRef</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#triggerref" class="router-link-active router-link-exact-active toc-link level3">triggerRef</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#customref" class="router-link-active router-link-exact-active toc-link level3">customRef</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#reactive-全家桶" class="router-link-active router-link-exact-active toc-link level2">Reactive 全家桶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#readonly" class="router-link-active router-link-exact-active toc-link level3">readonly</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#shallowreactive" class="router-link-active router-link-exact-active toc-link level3">shallowReactive</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#认识-to-系列全家桶" class="router-link-active router-link-exact-active toc-link level2">认识 to 系列全家桶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#toref" class="router-link-active router-link-exact-active toc-link level3">toRef</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#torefs" class="router-link-active router-link-exact-active toc-link level3">toRefs</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#toraw" class="router-link-active router-link-exact-active toc-link level3">toRaw</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#认识-computed-计算属性" class="router-link-active router-link-exact-active toc-link level2">认识 computed 计算属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#认识-watch-侦听器" class="router-link-active router-link-exact-active toc-link level2">认识 watch 侦听器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#高级侦听器-watcheffect" class="router-link-active router-link-exact-active toc-link level2">高级侦听器 watchEffect</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#父子组件传参" class="router-link-active router-link-exact-active toc-link level2">父子组件传参</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#父组件向子组件传参" class="router-link-active router-link-exact-active toc-link level3">父组件向子组件传参</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#子组件向父组件传参" class="router-link-active router-link-exact-active toc-link level3">子组件向父组件传参</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#子组件给父组件暴露一些属性或方法" class="router-link-active router-link-exact-active toc-link level3">子组件给父组件暴露一些属性或方法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#全局组件、局部组件、递归组件" class="router-link-active router-link-exact-active toc-link level2">全局组件、局部组件、递归组件</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#全局组件" class="router-link-active router-link-exact-active toc-link level3">全局组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#局部组件" class="router-link-active router-link-exact-active toc-link level3">局部组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#递归组件" class="router-link-active router-link-exact-active toc-link level3">递归组件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#动态组件" class="router-link-active router-link-exact-active toc-link level2">动态组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#插槽-slot" class="router-link-active router-link-exact-active toc-link level2">插槽 slot</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#匿名插槽" class="router-link-active router-link-exact-active toc-link level3">匿名插槽</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#具名插槽" class="router-link-active router-link-exact-active toc-link level3">具名插槽</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#作用域插槽" class="router-link-active router-link-exact-active toc-link level3">作用域插槽</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#动态插槽" class="router-link-active router-link-exact-active toc-link level3">动态插槽</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#异步组件-代码分包-suspense" class="router-link-active router-link-exact-active toc-link level2">异步组件&amp;代码分包&amp;suspense</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#teleport-传送组件" class="router-link-active router-link-exact-active toc-link level2">Teleport 传送组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#keep-alive" class="router-link-active router-link-exact-active toc-link level2">keep-alive</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#include-exclude" class="router-link-active router-link-exact-active toc-link level3">include &amp; exclude</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#max" class="router-link-active router-link-exact-active toc-link level3">max</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#transition" class="router-link-active router-link-exact-active toc-link level2">Transition</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#transitiongroup" class="router-link-active router-link-exact-active toc-link level2">TransitionGroup</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#provide-和-inject" class="router-link-active router-link-exact-active toc-link level2">Provide 和 Inject</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#兄弟组件间传值" class="router-link-active router-link-exact-active toc-link level2">兄弟组件间传值</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#tsx" class="router-link-active router-link-exact-active toc-link level2">TSX</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#v-model" class="router-link-active router-link-exact-active toc-link level2">v-model</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#给自定义组件绑定数据" class="router-link-active router-link-exact-active toc-link level3">给自定义组件绑定数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#绑定多个值" class="router-link-active router-link-exact-active toc-link level3">绑定多个值</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#自定义-v-model-修饰符" class="router-link-active router-link-exact-active toc-link level3">自定义 v-model 修饰符</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#自定义指令-directive" class="router-link-active router-link-exact-active toc-link level2">自定义指令 directive</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue3-定义全局函数和变量" class="router-link-active router-link-exact-active toc-link level2">vue3 定义全局函数和变量</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#编写-vue3-插件" class="router-link-active router-link-exact-active toc-link level2">编写 vue3 插件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#css-style-完整特性" class="router-link-active router-link-exact-active toc-link level2">css style 完整特性</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#deep" class="router-link-active router-link-exact-active toc-link level3">:deep()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#插槽选择器" class="router-link-active router-link-exact-active toc-link level3">插槽选择器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#全局选择器" class="router-link-active router-link-exact-active toc-link level3">全局选择器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#v-bind" class="router-link-active router-link-exact-active toc-link level3">v-bind</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#css-module" class="router-link-active router-link-exact-active toc-link level3">CSS Module</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue-开发移动端" class="router-link-active router-link-exact-active toc-link level2">vue 开发移动端</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue-开发桌面程序-electron" class="router-link-active router-link-exact-active toc-link level2">vue 开发桌面程序 Electron</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vue3-vite-开发中的环境变量" class="router-link-active router-link-exact-active toc-link level2">vue3 + vite 开发中的环境变量</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#vite-分析打包后的各个文件夹大小" class="router-link-active router-link-exact-active toc-link level2">vite 分析打包后的各个文件夹大小</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="vue3-学习笔记" tabindex="-1"><a class="header-anchor" href="#vue3-学习笔记" aria-hidden="true">#</a> vue3 学习笔记</h1><h2 id="创建项目" tabindex="-1"><a class="header-anchor" href="#创建项目" aria-hidden="true">#</a> 创建项目</h2><ol><li>使用<code>pnpm create vite@latest</code>创建一个使用<code>vite</code>构建的<code>vue3</code>项目，这里选择语言为<code>typescript</code>。</li><li>使用<code>pnpm i</code>安装项目的依赖</li><li>使用<code>pnpm dev</code>运行项目</li></ol><blockquote><p><strong>拓展：</strong></p><p>我们运行项目时使用了<code>pnpm dev</code>这个命令，其实相当于是<code>npm run dev</code>这个命令，而这个命令会启动<code>package.json</code>中的<code>scripts</code>下的<code>dev</code>命令，即启动了<code>vite</code>。但是我们自己在终端中使用<code>vite</code>时是会报错的。</p><img src="/docs/assets/image-20230217153923567-69ffb793.png" alt="image-20230217153923567" style="zoom:50%;"><img src="/docs/assets/image-20230217153954618-3a540698.png" alt="image-20230217153954618" style="zoom:50%;"><p>这就说明我们使用<code>pnpm dev</code>时它启动的<code>vite</code>命令是做过一些配置的，因此我们可以在<code>node_modules</code>下的<code>vite</code>文件夹下面看到<code>vite</code>的源码中的<code>package.json</code>中有如下配置：</p><img src="/docs/assets/image-20230217154245453-5726e4fa.png" alt="image-20230217154245453" style="zoom:50%;"><p>那么此时我们去到<code>node_modules/.bin</code>文件夹下查看，有如下几个文件：</p><img src="/docs/assets/image-20230217154421331-8b741fff.png" alt="image-20230217154421331" style="zoom:50%;"><p>这三个文件作用如下：</p><ol><li><code>vite</code>：给<code>unix</code>系统使用</li><li><code>vite.CMD</code>：给<code>windows</code>系统使用</li><li><code>vite.ps1</code>：这个是跨平台的，在<code>windows | mac | unix</code>等各种平台都能使用</li></ol><p><span style="color:orange;">执行<code>npm run dev</code>后的查找规则：</span></p><ol><li>先从本地的<code>node_modules</code>中查找<code>bin</code>中有无<code>vite</code>可执行的</li><li>如果没有就会去<code>npm install -g</code>全局包中查找有无<code>vite</code>可执行的</li><li>如果没有就去<strong>环境变量</strong></li><li>如果以上都没有，则报错</li></ol></blockquote><h2 id="vue-指令" tabindex="-1"><a class="header-anchor" href="#vue-指令" aria-hidden="true">#</a> vue 指令</h2><ul><li><p><code>v-text</code>：跟<code>{{}}</code>类似，可以展示文本</p></li><li><p><code>v-html</code>：可以展示文本，也可以展示富文本，或者说节点<code>&lt;div&gt;123&lt;/div&gt;</code>这种，但是它不能展示组件</p></li><li><p><code>v-bind</code>：可以简写为<code>:</code>，用来绑定元素的属性 Attr，如动态绑定一些<code>class | style : id</code>等</p></li><li><p><code>v-on</code>：可以简写为<code>@</code>，用来绑定元素的事件。它可以支持动态绑定的用法，如下</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@[event]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>() =&gt; a++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		{{ a }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token string">&quot;click&quot;</span>
	<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>v-on.[修饰符]</code>：<a href="https://cn.vuejs.org/guide/essentials/event-handling.html#event-modifiers" target="_blank" rel="noopener noreferrer">事件修饰符<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ，这些修饰符都有一些特殊的功能，如<code>.stop</code>可以禁用冒泡，<code>.once</code>可以让事件只触发一次</p></li><li><p><code>v-model</code>：双向数据绑定，一般用来绑定表单</p></li><li><p><code>v-for</code>：遍历元素</p></li><li><p><code>v-once</code>：性能优化，只渲染一次</p></li><li><p><code>v-memo</code>：性能优化，会有缓存。<a href="https://juejin.cn/post/7180973915580137527" target="_blank" rel="noopener noreferrer">v-memo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><h2 id="虚拟-dom-和-diff-算法" tabindex="-1"><a class="header-anchor" href="#虚拟-dom-和-diff-算法" aria-hidden="true">#</a> 虚拟 dom 和 diff 算法</h2><h3 id="虚拟-dom" tabindex="-1"><a class="header-anchor" href="#虚拟-dom" aria-hidden="true">#</a> 虚拟 dom</h3><p>虚拟 dom 就是通过 js 来生成一个 AST 节点树</p><p><a href="https://vue-next-template-explorer.netlify.app/#eyJzcmMiOiI8ZGl2PlxyXG4gICAgPGRpdj4gXHJcbiAgICAgICAgIDxzZWN0aW9uPnRlc3Q8L3NlY3Rpb24+XHJcbiAgICAgIDwvZGl2PiAgXHJcbjwvZGl2PiIsIm9wdGlvbnMiOnt9fQ==" target="_blank" rel="noopener noreferrer">Vue Template Explorer (vue-next-template-explorer.netlify.app)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;div&gt;
    &lt;div&gt;
         &lt;section&gt;test&lt;/section&gt;
      &lt;/div&gt;
&lt;/div&gt;

/*
	虚拟 dom 就是将上面我们写的真实的 dom 节点转换为下面这种使用 js 来描述的 AST 树。
*/

import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from &quot;vue&quot;

export function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (_openBlock(), _createElementBlock(&quot;div&quot;, null, [
    _createElementVNode(&quot;div&quot;, null, [
      _createElementVNode(&quot;section&quot;, null, &quot;test&quot;)
    ])
  ]))
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><span style="color:orange;">为什么要使用虚拟 dom：</span><a href="https://weread.qq.com/web/reader/c5c32170813ab7177g0181aek16732dc0161679091c5aeb1" target="_blank" rel="noopener noreferrer">Vue.js 设计与实现-霍春阳<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="diff-算法" tabindex="-1"><a class="header-anchor" href="#diff-算法" aria-hidden="true">#</a> diff 算法</h3><h4 id="无-key-的-diff-算法" tabindex="-1"><a class="header-anchor" href="#无-key-的-diff-算法" aria-hidden="true">#</a> 无 key 的 diff 算法</h4><p><img src="/docs/assets/image-20230217192418915-b850e591.png" alt="image-20230217192418915"></p><h4 id="有-key-的-diff-算法" tabindex="-1"><a class="header-anchor" href="#有-key-的-diff-算法" aria-hidden="true">#</a> 有 key 的 diff 算法</h4><p><img src="/docs/assets/image-20230217194641438-5bfa5cc6.png" alt="image-20230217194641438"></p><table><thead><tr><th>数据</th><th>10</th><th>9</th><th>2</th><th>5</th><th>3</th><th>7</th><th>101</th><th>18</th></tr></thead><tbody><tr><td>dp(先全部默认为 1)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td><span style="color:green;">dp(最后结果)</span></td><td>1</td><td>1</td><td>1</td><td>2</td><td>2</td><td>3</td><td>4</td><td>4</td></tr><tr><td>index</td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr></tbody></table><blockquote><p>上面的结果算法为：</p><ol><li>首先 10 的前面没有可比较的数字，因此为 1</li><li>9 与前面的数字进行比较，发现小于 10，则也为 1</li><li>2 与前面的数字进行比较，小于 9、小于 10，因此也为 1</li><li>5 与前面的数字进行比较，大于 2、小于 9、小于 10，因此为 1+1=2</li><li>3 与前面的数字进行比较，小于 5、大于 2、小于 9、小于 10，因此也为 1+1=2</li><li>7 与前面的数字进行比较，发现大于 3、5、2，而这里面最大的为 5 和 3 的结果 2，因此 7 的结果为 1+2=3</li><li>101 和 18 的算法也和前面类似，得出结果为 4</li></ol></blockquote><h2 id="ref-全家桶" tabindex="-1"><a class="header-anchor" href="#ref-全家桶" aria-hidden="true">#</a> ref 全家桶</h2><h3 id="ref" tabindex="-1"><a class="header-anchor" href="#ref" aria-hidden="true">#</a> ref</h3><p>ref 有两个作用：</p><ol><li><p>第一可以接受一个内部值并返回一个响应式且可变的 ref 对象。这个 ref 对象仅有一个<code>.value</code>property，指向该对象的内部值。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ref 可以用于注册元素或子组件的引用。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>divA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickEvent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		{{ a }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> divA <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token function-variable function">clickEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>divA<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/docs/assets/image-20230218122439807-9c78ce80.png" alt="image-20230218122439807" style="zoom:80%;"></li></ol><h3 id="isref" tabindex="-1"><a class="header-anchor" href="#isref" aria-hidden="true">#</a> isRef</h3><p>用来判断一个对象是不是 ref 对象。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token number">2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shallowref" tabindex="-1"><a class="header-anchor" href="#shallowref" aria-hidden="true">#</a> shallowRef</h3><p>创建一个跟踪自身 <code>.value</code> 变化的 ref，但不会使其值也变成响应式。即使用<code>shallowRef()</code>创建的对象，只能监听到<code>.value</code>的变化，若有如<code>.value.name</code>类的变化，这是监听不到的。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickEvent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		{{ obj.name }}
		<span class="token comment">&lt;!-- 点击后页面展示为 &#39;张三&#39; --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> shallowRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token function-variable function">clickEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;李四&quot;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 李四</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="triggerref" tabindex="-1"><a class="header-anchor" href="#triggerref" aria-hidden="true">#</a> triggerRef</h3><p>强制更新页面。这样也是可以改变值的。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeMsg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 点击后变为大满 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> Ref<span class="token punctuation">,</span> shallowRef<span class="token punctuation">,</span> triggerRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	type Obj <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> string
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> <span class="token literal-property property">message</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>Obj<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;小满&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">changeMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		message<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;大满&quot;</span>
		<span class="token function">triggerRef</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="customref" tabindex="-1"><a class="header-anchor" href="#customref" aria-hidden="true">#</a> customRef</h3><p>用于自定义 ref。</p><p><code>customRef()</code>是一个工厂函数，要求为我们返回一个对象，并且实现<code>get</code>和<code>set</code>，适合用于做防抖之类的。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		{{ name }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改 customRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 点击多次只会触发一次 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">function</span> myRef<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> any<span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> <span class="token literal-property property">timer</span><span class="token operator">:</span> any
		<span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> value
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
					timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发了set&quot;</span><span class="token punctuation">)</span>
						value <span class="token operator">=</span> newVal
						<span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">const</span> name <span class="token operator">=</span> myRef<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;小满&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;大满&quot;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reactive-全家桶" tabindex="-1"><a class="header-anchor" href="#reactive-全家桶" aria-hidden="true">#</a> Reactive 全家桶</h2><p><code>reactive</code>与<code>ref</code>类似，都是接收一个内部值，并返回一个响应式的对象，不同点在于：</p><ol><li><p><code>reactive</code>只能接收一个对象（Array、Object、Set、Map）做内部值，而<code>ref</code>支持所有类型。</p></li><li><p><code>reactive</code>定义的值不需要<code>.value</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 张三</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>reactive</code>返回的是一个<code>proxy</code>对象，如果给他直接赋值会破坏对象的响应式。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		{{ list.name }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		list <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span> <span class="token punctuation">}</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/docs/assets/image-20230218131332522-90484f79.png" alt="image-20230218131332522"></p></li></ol><h3 id="readonly" tabindex="-1"><a class="header-anchor" href="#readonly" aria-hidden="true">#</a> readonly</h3><p>复制一份 proxy 对象，将其设置为只读</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> readonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> copy <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

copy<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token comment">// [Vue warn] Set operation on key &quot;count&quot; failed: target is readonly. Proxy {count: 1}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shallowreactive" tabindex="-1"><a class="header-anchor" href="#shallowreactive" aria-hidden="true">#</a> shallowReactive</h3><p>是<code>reactive()</code>的浅层作用形式。浅层响应式对象里只有根级别的属性是响应式的。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token literal-property property">nested</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 更改状态自身的属性是响应式的</span>
state<span class="token punctuation">.</span>foo<span class="token operator">++</span>

<span class="token comment">// ...但下层嵌套对象不会被转为响应式</span>
<span class="token function">isReactive</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>nested<span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token comment">// 不是响应式的</span>
state<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>bar<span class="token operator">++</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="认识-to-系列全家桶" tabindex="-1"><a class="header-anchor" href="#认识-to-系列全家桶" aria-hidden="true">#</a> 认识 to 系列全家桶</h2><h3 id="toref" tabindex="-1"><a class="header-anchor" href="#toref" aria-hidden="true">#</a> toRef</h3><p>只针对响应式对象的值，如果响应式对象的值修改了，视图也会相应的发生变化；如果是非响应式的对象，虽然值的变化能监听到，但是视图并不会变化。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		{{ nameReac }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		{{ nameNorm }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 点击多次只会触发一次 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">let</span> dataReac <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> nameReac <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>dataReac<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">let</span> dataNorm <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span> <span class="token punctuation">}</span>
	<span class="token keyword">let</span> nameNorm <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>dataNorm<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// 这两个值的变化不能放在一起，否则响应式对象值的更改会影响非响应式的</span>
		nameReac<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;李四&quot;</span> <span class="token comment">// 响应式对象的更改</span>
		<span class="token comment">// nameNorm.value = &quot;李四&quot; // 非响应式对象的更改</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>应用场景：如我们有一个响应式的对象，现在有一个函数，它的参数是这个响应式对象中的某个属性，那么我们就可以使用<code>toRef</code>去将这个属性单独拿出来进行使用。</p><h3 id="torefs" tabindex="-1"><a class="header-anchor" href="#torefs" aria-hidden="true">#</a> toRefs</h3><p>与<code>toRef</code>类似，但是它是将整个响应式对象中的每个属性都进行了转换，因此我们可以用它来做响应式对象的解构，因为响应式对象直接进行解构的话，单独拿出来的属性并不是响应式的。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		{{ age }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 点击多次只会触发一次 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">let</span> dataReac <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token comment">// let { age } = dataReac</span>
	<span class="token keyword">let</span> <span class="token punctuation">{</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>dataReac<span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// age = 19 // 视图不会变化</span>
		age<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">19</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>应用场景：将响应式对象中的值解构出来后也是响应式的。</p><h3 id="toraw" tabindex="-1"><a class="header-anchor" href="#toraw" aria-hidden="true">#</a> toRaw</h3><p>将一个响应式对象变为非响应式的对象。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		{{ dataRaw.age }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 点击多次只会触发一次 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">let</span> dataReac <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">let</span> dataRaw <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>dataReac<span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		dataRaw<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span>
		<span class="token comment">// {name: &#39;张三&#39;, age: 19}</span>
		<span class="token comment">// 这个对象脱去了外层的 proxy</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="认识-computed-计算属性" tabindex="-1"><a class="header-anchor" href="#认识-computed-计算属性" aria-hidden="true">#</a> 认识 computed 计算属性</h2><p><code>computed()</code> 方法期望接收一个 <code>getter</code> 函数，返回值为一个<strong>计算属性 ref</strong>，其和其他一般 ref 类似。</p><p>计算属性会自动追踪响应式依赖，它会检测计算属性依赖的变量的改变，当这个变量改变时，任何依赖于这个计算属性的绑定都会同时更新。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Has published books:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ publishedBooksMessage }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> author <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">books</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Vue 2 - Advanced Guide&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Vue 3 - Basic Guide&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Vue 4 - The Mystery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token comment">// 一个计算属性 ref</span>
	<span class="token keyword">const</span> publishedBooksMessage <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> author<span class="token punctuation">.</span>books<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;Yes&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;No&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>计算属性默认仅能通过计算函数得出结果。当尝试修改一个计算属性时，会出现一个运行时警告。只有在某些特殊场景中通过同时提供 <code>getter</code> 和 <code>setter</code> 来创建一个<strong>可写的</strong>计算属性。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Doe&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">// getter，读取计算属性的值</span>
		<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> firstName<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">.</span>value
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// setter，修改计算属性的值</span>
		<span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 注意：我们这里使用的是解构赋值语法</span>
			<span class="token punctuation">;</span><span class="token punctuation">[</span>firstName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> lastName<span class="token punctuation">.</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	fullName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;John Doe&quot;</span>
	<span class="token comment">// 调用 fullName 的 setter，firstName 和 lastName 会同时更新</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><h4 id="注" tabindex="-1"><a class="header-anchor" href="#注" aria-hidden="true">#</a> 注</h4><p>计算属性只应做计算而不做其他功能。如，不要在计算函数中进行异步请求或者修改 DOM。</p><p>如果要通过一个变量的变动来进行其他修改可以使用<a href="https://cn.vuejs.org/guide/essentials/watchers.html" target="_blank" rel="noopener noreferrer">监听器<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 。</p><p>计算属性中以来的属性的值发生变化时，会触发它的更改，如果依赖的值不变，则使用的是缓存中的属性值。</p></blockquote><h2 id="认识-watch-侦听器" tabindex="-1"><a class="header-anchor" href="#认识-watch-侦听器" aria-hidden="true">#</a> 认识 watch 侦听器</h2><p><code>watch</code>函数接收三个参数，分别是要监听的数据、回调函数、options 配置项。<code>watch</code>对数据进行监听，并在回调函数中执行相应的操作。</p><ul><li><p><code>options</code>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否立即调用一次</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否开启深度监听</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>watch(value, function(newValue, oldValue) {
	// newValue 监听的数据变化后的值
	// oldValue 监听的数据变化前的值
}, {
	immediate: true, // 是否立即调用一次
    deep: true, // 是否开启深度监听
})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>watch</code>监听单一的<code>ref</code>对象时直接传入这个对象即可，若监听多个<code>ref</code>对象，第一个参数需要传入一个数组<code>[ref1, ref2, ...]</code>。</p><p><code>wathc</code>监听<code>reactive</code>时，<code>deep</code>配置开启与不开启的效果一致（因为在<code>watch</code>的源码中已经做了隐式的开启 ）。<code>watch</code>监听<code>reactive</code>中的某一个值时，第一个参数需要传入一个函数<code>watch(() =&gt; reactive.[attrName], function() {}, {})</code>。</p></blockquote><h2 id="高级侦听器-watcheffect" tabindex="-1"><a class="header-anchor" href="#高级侦听器-watcheffect" aria-hidden="true">#</a> 高级侦听器 watchEffect</h2><p><a href="https://cn.vuejs.org/api/reactivity-core.html#watcheffect" target="_blank" rel="noopener noreferrer">watchEffect<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行。</p><ol><li><p>基本使用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> message2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>清除副作用：就是在触发监听前，会调用一个函数，可以处理一些逻辑，如防抖。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> message2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onInvalidate</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>停止跟踪：<code>watchEffect</code>会返回一个函数，这个函数用于中止监听。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="父子组件传参" tabindex="-1"><a class="header-anchor" href="#父子组件传参" aria-hidden="true">#</a> 父子组件传参</h2><p><a href="https://cn.vuejs.org/api/sfc-script-setup.html#defineprops-defineemits" target="_blank" rel="noopener noreferrer">defineProps 和 defineEmits<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="父组件向子组件传参" tabindex="-1"><a class="header-anchor" href="#父组件向子组件传参" aria-hidden="true">#</a> 父组件向子组件传参</h3><p>使用<code>defineProps()</code>方法。</p><ol><li><p>js 写法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 在子组件中接收父组件通过 v-bind 传递过来的值</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
		<span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;默认值&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ts 写法</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// 在子组件中接收父组件通过 v-bind 传递过来的值</span>
<span class="token comment">/* 
	第一种写法，不规定默认值
*/</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>
	title<span class="token operator">:</span> <span class="token builtin">string</span>
	arr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/*
	第二种写法，规定默认值。
	要规定默认值，则需要使用 withDefaults() 方法，它是 typescript 写法中独有的
*/</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>
	<span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>
		title<span class="token operator">:</span> <span class="token builtin">string</span>
		arr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token function-variable function">arr</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">456</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 如果是引用类型，则需要使用函数返回默认值</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="子组件向父组件传参" tabindex="-1"><a class="header-anchor" href="#子组件向父组件传参" aria-hidden="true">#</a> 子组件向父组件传参</h3><p>使用<code>defineEmits()</code>方法。</p><ol><li><p>js 写法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 在子组件中使用 defineEmits() 注册方法，来给父组件传值</span>
<span class="token keyword">const</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;click1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;click2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">send</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">&quot;click1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;我是子组件传递的值&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 在父组件中使用 v-on 给子组件绑定事件</span>
<span class="token comment">// &lt;son @click=&quot;getData&quot;&gt; 子组件 &lt;/son&gt;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;子组件传递过来的值&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ts 写法：ts 中只是在子组件中使用<code>defineEmits</code>传值写法不同</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> emits <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineEmits</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>
	<span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token string">&quot;click1&quot;</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
	<span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token string">&quot;click2&quot;</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token comment">// 多个事件</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="子组件给父组件暴露一些属性或方法" tabindex="-1"><a class="header-anchor" href="#子组件给父组件暴露一些属性或方法" aria-hidden="true">#</a> 子组件给父组件暴露一些属性或方法</h3><p>使用 <a href="https://cn.vuejs.org/api/sfc-script-setup.html#defineexpose" target="_blank" rel="noopener noreferrer">defineExpose()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 方法，这样也能达到子组件给父组件传参的效果。</p><ol><li><p>在子组件中使用<code>defineExpose()</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;我是子组件暴露给父组件的值&quot;</span><span class="token punctuation">,</span>
	<span class="token function-variable function">open</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是子组件暴露给父组件的方法&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在父组件中使用</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-vue</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sonRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-vue</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">import</span> sonVue <span class="token keyword">from</span> <span class="token string">&quot;./components/SonVue.vue&quot;</span>

	<span class="token comment">/* 
    这是 js 的写法
  	*/</span>
	<span class="token comment">// const sonRef = ref(null) // 获取子组件</span>

	<span class="token comment">/*
    这是 ts 的写法
    &lt;InstanceType&lt;typeof sonVue&gt;&gt; 用来推断 sonRef 的类型
  	*/</span>
	<span class="token keyword">const</span> sonRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> sonVue<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;子组件传递过来的值&quot;</span><span class="token punctuation">,</span> sonRef<span class="token punctuation">.</span>value<span class="token operator">?.</span>name<span class="token punctuation">)</span>
		sonRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="全局组件、局部组件、递归组件" tabindex="-1"><a class="header-anchor" href="#全局组件、局部组件、递归组件" aria-hidden="true">#</a> 全局组件、局部组件、递归组件</h2><h3 id="全局组件" tabindex="-1"><a class="header-anchor" href="#全局组件" aria-hidden="true">#</a> 全局组件</h3><p>一些在项目中使用频率非常高的的组件，几乎每个页面都在使用的，就可以将其封装为全局组件。</p><p>配置方法：在<code>main</code>文件中使用<code>component()</code>方法进行注册，这个方法可以链式调用。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span>
<span class="token keyword">import</span> Card <span class="token keyword">from</span> <span class="token string">&quot;./components/Card/index.vue&quot;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;Card&quot;</span><span class="token punctuation">,</span> Card<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>component</code>方法<strong>不能</strong>放到<code>mount</code>后面。在注册之前要导入这个组件。</p><p>有多个全局组件时可以使用<code>for</code>循环来批量注册。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>循环条件<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> component<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="局部组件" tabindex="-1"><a class="header-anchor" href="#局部组件" aria-hidden="true">#</a> 局部组件</h3><p>使用频率不那么高的一些组件，就可以封装为局部组件，这些组件不需要在<code>main</code>文件中进行配置，直接在需要使用的组件中进行导入使用即可。</p><h3 id="递归组件" tabindex="-1"><a class="header-anchor" href="#递归组件" aria-hidden="true">#</a> 递归组件</h3><p><a href="https://cn.vuejs.org/api/sfc-script-setup.html#recursive-components" target="_blank" rel="noopener noreferrer">递归组件 | vue 官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>简单来说，递归组件就是在组件内部调用自己。下面是一个简单的递归组件的例子。</p><ul><li><p>父组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tree-vue</span> <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tree-vue</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">import</span> TreeVue <span class="token keyword">from</span> <span class="token string">&quot;./components/TreeVue.vue&quot;</span>
	<span class="token comment">// 导入子组件中定义的数据类型</span>
	<span class="token keyword">import</span> <span class="token punctuation">{</span> tree <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./components/TreeVue.vue&quot;</span>

	<span class="token keyword">const</span> list <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>tree<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;1-1&quot;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;2-1&quot;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
						<span class="token punctuation">{</span>
							<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;2-1-1&quot;</span><span class="token punctuation">,</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;2-2&quot;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ item.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 自己调用自己，这里使用这个组件的文件名，如果不想使用文件名，则可以再添加一个没有 setup 的 script，在其中使用 export default { name: &#39;&#39;} 去自定以名字，或者使用 defineOptions({name: &#39;&#39;})，但是这个需要装插件 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TreeVue</span> <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children?.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TreeVue</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">tree</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> string
		children<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
		list<span class="token operator">?</span><span class="token operator">:</span> tree<span class="token punctuation">[</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>在递归组件中处理事件时，会有冒泡导致事件触发多次，因此建议<strong>在递归组件中处理事件时使用<code>.stop</code>阻止冒泡。</strong></p></blockquote><h2 id="动态组件" tabindex="-1"><a class="header-anchor" href="#动态组件" aria-hidden="true">#</a> 动态组件</h2><p>有些场景会需要在几个组件间来回切换，如 <a href="https://sfc.vuejs.org/#eNqNVNFu2yAU/RXkPqSVYrtdpz2wpFrf9riHvdXTRDBOaG1AgNNWUf59B3BcZ13WxFLEvfdwOOfa3F12b0yx7UVGs4XjVhpPnPC9uauU7Iy2nnzXnSCN1R2ZFWUIAnw2ln9o591Yj9Ex4N7yjdy+UQzxMWhHrGjIfgClEqkU18p5wntrhfI/2YosA+5yFmTMrip1QHi2cqjtsCnqnYdF1BJXw5GV2ldqUSabMIjAi860zAtEhCxquSW8Zc4tq6wWna6ymEdl1XuvsSEE+G3zRluALn/Pw9lXRKqoocpGCH0Sr0AgO00e2B9mKOSJdTaHfcY9FNIjr8tlICX7XxOGb7yV/AkMR02ZnjJIJmS3S9thOnoo03HBuEfINVqvQEGoDJKC/oc3Vhw69iLS3y3KcUtqV4l+YbUoJ11E6PxrG5ZFaGF6J41WPm9YJ9tXShxTLnfCyuZrqK20rYWl5Ma8EKdbWZMLIcSklFtWy95R8sm8xLRhdS3VGolr7LnFX0x3zK6lyr02IBPdNLfScN5R8vmA7XE+NLSCe0oUPMWs3grbtPo5f6GE9V4jiebBydvLSn5GBV8g4OZAOsiFgLwVjR91376vW7nenAIctYJzHkt4MU6jZLRUXtgEZ/xpbXWvakoumuvw/Mt0DrppPp49pmFwYo9uQg+SySN6cR2ed/gifbdnbBggpx2OPR36me5q/JayeZbmRN4xUzw6rTCuIl81FHDzaDoh5DA/QlxlG++No2XpGh7mzaMrtF2XWBW2V15ilgnX5Surn/E9gLjK4rwYOEok0Y0cNwKihf0f51/Qd7yBFo72sHKYoWHknp4/6c4lNXEEj5fvxN0D8zh9z6dO4/sM7snYPp/9MPs/5N//ARljNdU=" target="_blank" rel="noopener noreferrer">Tab<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 页面，这种时候，就可以使用 <a href="https://cn.vuejs.org/guide/essentials/component-basics.html#dynamic-components" target="_blank" rel="noopener noreferrer"><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- currentTab 改变时组件也改变 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabs[currentTab]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插槽-slot" tabindex="-1"><a class="header-anchor" href="#插槽-slot" aria-hidden="true">#</a> 插槽 slot</h2><p>插槽大致可以分为：匿名插槽、具名插槽、作用域插槽、动态插槽。</p><h3 id="匿名插槽" tabindex="-1"><a class="header-anchor" href="#匿名插槽" aria-hidden="true">#</a> 匿名插槽</h3><ol><li><p>在子组件(Dialog)中放置一个插槽</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在父组件中填充插槽的内容</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>插槽内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="具名插槽" tabindex="-1"><a class="header-anchor" href="#具名插槽" aria-hidden="true">#</a> 具名插槽</h3><p>顾名思义，它有一个专门的<code>name</code>，以便父组件在填充内容时标明要往哪个插槽中填充内容。</p><ol><li><p>在子组件(Dialog)中防止具名插槽</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在父组件中填充内容</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 向具名插槽 header 中填充内容 --&gt;</span>
	<span class="token comment">&lt;!-- v-slot 可以简写为 #，如 &lt;template #header&gt; --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>header</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- 向匿名插槽中填充内容 --&gt;</span>
	<span class="token comment">&lt;!-- 这里的 v-slot 可以写为 #default --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- 向具名插槽 footer 中填充内容 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="作用域插槽" tabindex="-1"><a class="header-anchor" href="#作用域插槽" aria-hidden="true">#</a> 作用域插槽</h3><p>在子组件中动态绑定参数，派发给父组件的 slot 使用。</p><ol><li><p>在子组件(Dialog)中绑定参数</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in 100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在父组件中通过解构的方式取值进行使用</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ data, index }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ item }} -- {{ index }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="动态插槽" tabindex="-1"><a class="header-anchor" href="#动态插槽" aria-hidden="true">#</a> 动态插槽</h3><p>即即具名插槽中的<code>name</code>可以是一个变量名，表明这个插槽的名称是动态的。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#[name]</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- const name = ref(&#39;header&#39;) --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="异步组件-代码分包-suspense" tabindex="-1"><a class="header-anchor" href="#异步组件-代码分包-suspense" aria-hidden="true">#</a> 异步组件&amp;代码分包&amp;suspense</h2><p>在大型应用中，我们可能需要将应用分割成小一些的代码块，并且较少主包的体积，这时候就可以使用异步组件。</p><p><code>vue</code>提供了<code>defineAsyncComponent</code>方法来实现这个功能。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// ...从服务器获取组件</span>
		<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token comment">/* 获取到的组件 */</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ... 像使用其他一般组件一样使用 `AsyncComp`</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面的代码可以看出，<code>defineAsyncComponent</code>方法接收一个<code>Promise</code>。也就是说，如果我们需要使用的组件为异步组件，则这个组件需要返回一个<code>Promise</code>，而在<code>setup</code>语法糖中，当我们使用 <a href="https://cn.vuejs.org/api/sfc-script-setup.html#top-level-await" target="_blank" rel="noopener noreferrer">顶层 await<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，则这个代码会被编译成<code>async setup()</code>，这样这个组件就会返回一个<code>Promise</code>。例子如下：</p><ol><li><p>使用<strong>顶层 await</strong> 封装一个异步组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token comment">&lt;!-- AsyncCom --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ data }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> axios <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span>

	<span class="token keyword">interface</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> string
			<span class="token literal-property property">age</span><span class="token operator">:</span> number
			<span class="token literal-property property">url</span><span class="token operator">:</span> string
			<span class="token literal-property property">desc</span><span class="token operator">:</span> string
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span>get<span class="token operator">&lt;</span>Data<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;./data.json&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在父组件中使用异步的子组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 异步组件必须搭配 Suspense 使用 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 异步组件加载完成后展示异步组件 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>async-com</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>async-com</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- 异步组件加载时展示其他组件，如展示骨架屏 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>skeleton-com</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>skeleton-com</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">import</span> skeletonCom <span class="token keyword">from</span> <span class="token string">&quot;./components/SkeletCom.vue&quot;</span>

	<span class="token comment">// 引入异步组件</span>
	<span class="token keyword">const</span> asyncCom <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./components/AsyncCom.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><blockquote><p>异步组件使用注意：</p><ol><li><p>异步组件引入方式与常规的组件不同，必须使用<code>defineAsyncComponent</code>方法搭配<code>import()</code>函数式的方式引入</p></li><li><p>异步组件的使用必须搭配<code>Suspense</code>内置组件使用，这个内置组件提供两个<code>template</code>，一个用于展示异步组件，一个用于在异步组件加载完成前展示其他默认内容，如骨架屏</p></li><li><p><code>Suspense</code>内置组件目前处于实验阶段，后续可能会有改动：<a href="https://cn.vuejs.org/guide/built-ins/suspense.html#suspense" target="_blank" rel="noopener noreferrer">Suspense | Vue.js (vuejs.org)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>下面的代码是<code>defineAsyncComponent</code>方法引入组件的完整写法：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// 加载函数</span>
	<span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./Foo.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

	<span class="token comment">// 加载异步组件时使用的组件</span>
	<span class="token literal-property property">loadingComponent</span><span class="token operator">:</span> LoadingComponent<span class="token punctuation">,</span>
	<span class="token comment">// 展示加载组件前的延迟时间，默认为 200ms</span>
	<span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

	<span class="token comment">// 加载失败后展示的组件</span>
	<span class="token literal-property property">errorComponent</span><span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span>
	<span class="token comment">// 如果提供了一个 timeout 时间限制，并超时了</span>
	<span class="token comment">// 也会显示这里配置的报错组件，默认值是：Infinity</span>
	<span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>通过<code>defineAsyncComponent</code>加载异步配合<code>import()</code>函数模式便可以分包</p></li></ol></blockquote><h2 id="teleport-传送组件" tabindex="-1"><a class="header-anchor" href="#teleport-传送组件" aria-hidden="true">#</a> Teleport 传送组件</h2><p><code>Teleport</code>内置组件的作用就是将我们的模板渲染到指定的 dom 节点中，让其不受父级的<code>style | v-show</code>等属性影响，但是<code>data | props</code>数据依然能够共用的技术。</p><p>使用方法：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loading</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Loading</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Teleport</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Teleport</code>接收两个参数：</p><ol><li><code>to</code>：指定要将<code>Teleport</code>中的内容传送到哪个节点中，它支持<code>tagName | className | id</code>等选择器</li><li><code>disabled</code>：接收布尔值，表示<code>Teleport</code>是否生效</li></ol><blockquote><p>注意：<code>&lt;Teleport&gt;</code> 挂载时，传送的 <code>to</code> 目标必须已经存在于 DOM 中。理想情况下，这应该是整个 Vue 应用 DOM 树外部的一个元素。如果目标元素也是由 Vue 渲染的，你需要确保在挂载 <code>&lt;Teleport&gt;</code> 之前先挂载该元素。</p></blockquote><h2 id="keep-alive" tabindex="-1"><a class="header-anchor" href="#keep-alive" aria-hidden="true">#</a> keep-alive</h2><p>有时我们不希望组件被重新渲染影响使用体验，或者出于性能考虑，避免多次重复渲染组件降低性能。而是希望组件可以被缓存下来，维持当前的状态，当需要时直接展示。这时候就需要用到<code>keep-alive</code>内置组件。</p><p>使用<code>keep-alive</code>时会多两个生命周期钩子：</p><ol><li><p><code>onActivated()</code>：首次挂载时，以及每次从缓存中取出使用时调用</p><blockquote><p>首次挂载组件时，<code>onMounted&gt; onActivated</code>。</p></blockquote></li><li><p><code>onDeactivated()</code>：在从 dom 上移除时，进入缓存时，以及组件卸载时调用</p></li></ol><h3 id="include-exclude" tabindex="-1"><a class="header-anchor" href="#include-exclude" aria-hidden="true">#</a> include &amp; exclude</h3><p><code>include</code>和<code>exclude</code>允许组件有条件地缓存。二者都可以用逗号分隔字符串、正则表达式或一个数组来表示：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">:exclude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="max" tabindex="-1"><a class="header-anchor" href="#max" aria-hidden="true">#</a> max</h3><p><code>max</code>表示<code>keep-alive</code>最大可以缓存的组件数量。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注：<code>&lt;keep-alive&gt;</code>不能保存滚动条的位置，如果要保存滚动条的信息，则需要自行保存信息，然后在组件展示时，即<code>onActivated()</code>生命周期中将其滚动条定位到上次保存的位置。</p><p>保存这个信息可以保存在<code>vuex | pinia</code>这类状态管理器中，也可以保存在<code>localStorage</code>中，这些保存的位置仅凭个人喜好或项目要求。</p></blockquote><h2 id="transition" tabindex="-1"><a class="header-anchor" href="#transition" aria-hidden="true">#</a> Transition</h2><p><code>Transition</code>内置组件的作用是给一个元素添加进入和离开 dom 时的过渡效果。</p><p>进入或离开可以由以下条件之一触发：</p><ul><li><code>v-if</code></li><li><code>v-show</code></li><li>特殊元素 <code>&lt;component&gt;</code> 切换的动态组件</li></ul><p>基本用法：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = !show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Toggle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Transition</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
	<span class="token selector">.v-enter-active,
	.v-leave-active</span> <span class="token punctuation">{</span>
		<span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s ease<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">.v-enter-from,
	.v-leave-to</span> <span class="token punctuation">{</span>
		<span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://cn.vuejs.org/guide/built-ins/transition.html" target="_blank" rel="noopener noreferrer">Transition 其他用法<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://xiaoman.blog.csdn.net/article/details/123000653" target="_blank" rel="noopener noreferrer">完整内容<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="transitiongroup" tabindex="-1"><a class="header-anchor" href="#transitiongroup" aria-hidden="true">#</a> TransitionGroup</h2><p><a href="https://cn.vuejs.org/guide/built-ins/transition-group.html" target="_blank" rel="noopener noreferrer">TransitionGroup<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 是一个内置组件，用于对<code>v-for</code>列表中的元素或组件的插入、移除和顺序改变添加动画效果。</p><h2 id="provide-和-inject" tabindex="-1"><a class="header-anchor" href="#provide-和-inject" aria-hidden="true">#</a> Provide 和 Inject</h2><p>简单来说就是我们在父组件中使用<code>provide</code>指定我们要提供给后代组件使用的数据或方法，然后在后代组件中使用<code>inject</code>接收这些数据或方法。</p><p>它的好处在于如果我们的数据需要隔代相传，则不需要使用类似<code>defineProps</code>的方式一层层的传递下去，而是在后代组件中只要想用则直接使用<code>inject</code>接收即可。这样让我们写代码时传递数据和方法变得更加方便。</p><p><img src="https://img-blog.csdnimg.cn/img_convert/5f4ea9e16eda6e37ab336075a788ae15.png" alt="img"></p><p>例子如下：</p><ul><li><p>父组件中传值</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>我是App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>A</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>A</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&quot;./components/A.vue&quot;</span>
	<span class="token keyword">let</span> flag <span class="token operator">=</span> ref<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> flag<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件中接收</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
		我是B
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change falg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ flag }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> inject<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> flag <span class="token operator">=</span> inject<span class="token operator">&lt;</span>Ref<span class="token operator">&lt;</span>number<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		flag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">2</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>如果传递的值是非响应式的，则需要使用<code>ref | reactive</code>添加响应式</p></blockquote><h2 id="兄弟组件间传值" tabindex="-1"><a class="header-anchor" href="#兄弟组件间传值" aria-hidden="true">#</a> 兄弟组件间传值</h2><ol><li><p>方式一：在 SonA 组件中使用<code>defineEmits</code>派发事件给父组件传值，然后在父组件中使用<code>:props</code>给 SonB 组件传值，以达到在 SonA 和 SonB 这两个兄弟组件中进行传值。这种方式很麻烦，不推荐。</p></li><li><p>方式二：使用<strong>全局事件总线</strong>，在 vue2 中，我们可以使用<code>$emit</code>和<code>$on</code>来传递和监听事件，这个原理其实是运用了 JS 设计模式的发布订阅模式。这里写一个简易版的。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Bus</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">emit</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
	<span class="token function-variable function">on</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">PramsKey</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span>

<span class="token keyword">type</span> <span class="token class-name">List</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token punctuation">[</span>key<span class="token operator">:</span> PramsKey<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EventBus</span> <span class="token keyword">implements</span> <span class="token class-name">Bus</span> <span class="token punctuation">{</span>
	list<span class="token operator">:</span> List <span class="token comment">// 保存注册的事件</span>

	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">emit</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 先获取全部的已注册为 name 的事件</span>
		<span class="token keyword">let</span> eventName<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
		eventName<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token function">on</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 如果 name 这个事件已经注册过了，就直接返回，没有注册过，就返回一个空数组</span>
		<span class="token keyword">let</span> fn<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
		fn<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> fn
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 导出实例</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">EventBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 vue3 中<code>$on</code>，<code>$off</code> 和 <code>$once</code> 实例方法已被移除，组件实例不再实现事件触发接口，原因在于在短期内<code>EventBus</code>往往是最简单的解决方案，但从长期来看，它维护起来总是令人头疼，于是不再提供官方支持。如果非要使用<code>EventBus</code>，那么这里有一个推荐的第三方库 <a href="https://xiaoman.blog.csdn.net/article/details/125453908" target="_blank" rel="noopener noreferrer">Mitt | 小满 zs 博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 。</p><blockquote><p>这种方式，如果是个人的小项目中，可以使用，但是如果是多人合作开发的大型项目，那么不推荐使用，因为它维护起来实在令人头疼。请关爱亲爱的同事。。。。。。</p></blockquote></li><li><p>可以使用<code>vuex</code>或者<code>pinia</code>这种状态管理器。</p></li></ol><h2 id="tsx" tabindex="-1"><a class="header-anchor" href="#tsx" aria-hidden="true">#</a> TSX</h2><p><a href="https://xiaoman.blog.csdn.net/article/details/123172735" target="_blank" rel="noopener noreferrer">TSX | 小满 zs 博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.npmjs.com/package/@vue/babel-plugin-jsx" target="_blank" rel="noopener noreferrer">TSX 完整用法官方参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="v-model" tabindex="-1"><a class="header-anchor" href="#v-model" aria-hidden="true">#</a> v-model</h2><p>我们都知道<code>v-model</code>可以用于表单元素的双向数据绑定，因此这里就不做赘述。下面主要说明<code>v-model</code>在自定义组件中如何使用，即如何给自定义组件做双向数据绑定。</p><h3 id="给自定义组件绑定数据" tabindex="-1"><a class="header-anchor" href="#给自定义组件绑定数据" aria-hidden="true">#</a> 给自定义组件绑定数据</h3><ol><li><p>父组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-a</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataToSonA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-a</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataToSonA = !dataToSonA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击{{ dataToSonA }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">import</span> SonA <span class="token keyword">from</span> <span class="token string">&quot;./components/SonA.vue&quot;</span>

	<span class="token keyword">const</span> dataToSonA <span class="token operator">=</span> ref<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>SonA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ modelValue }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickEvent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ `点击${modelValue}` }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
		<span class="token literal-property property">modelValue</span><span class="token operator">:</span> boolean
	<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> clickEvent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>上面的案例运行后点击父组件的 button 会看到子组件中的值发生变化，点击子组件中的 button 也能看到父组件中的值发生变化，说明这里的双向数据绑定确实生效了。但是有个问题是，为什么我们传递过去的值是 <em>dataToSonA</em>，但是在子组件中使用的却是 <em>modelValue</em> 呢？原因是当我们使用<code>v-model</code>给子组件绑定值时，其实实际代码是这样的：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-a</span> <span class="token attr-name">:modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataToSonA<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(newValue) =&gt; (dataToSonA = newValue)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>所以我们在子组件中使用时是<code>modelValue</code>。</p><h3 id="绑定多个值" tabindex="-1"><a class="header-anchor" href="#绑定多个值" aria-hidden="true">#</a> 绑定多个值</h3><p>上面的例子我们只给子组件传递了一个值，那如果我们有多个值要传递，但是在子组件中使用时名字都是<code>modelValue</code>，那岂不是冲突了？其实不然，当我们要传递多个值的时候，可以用如下写法：</p><ol><li><p>父组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-a</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataToSonA<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-a</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataToSonA = !dataToSonA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击{{ dataToSonA }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">import</span> SonA <span class="token keyword">from</span> <span class="token string">&quot;./components/SonA.vue&quot;</span>

	<span class="token keyword">const</span> dataToSonA <span class="token operator">=</span> ref<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> title <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;我是标题&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>SonA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ modelValue }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickEvent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ `点击${modelValue}` }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
		<span class="token literal-property property">modelValue</span><span class="token operator">:</span> boolean
		<span class="token literal-property property">title</span><span class="token operator">:</span> string
	<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update:title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> clickEvent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
		<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">&quot;update:title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;我是标题，我变了&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>从上面的例子可以看到，我们使用<code>v-model</code>给子组件传递值的时候，也可以使用<code>v-model:变量名</code>的方法指定子组件使用时的变量名。这样以达到我们传递多个值的需求。</p><h3 id="自定义-v-model-修饰符" tabindex="-1"><a class="header-anchor" href="#自定义-v-model-修饰符" aria-hidden="true">#</a> 自定义 v-model 修饰符</h3><p>我们知道，<code>v-model</code>是有一些 <a href="https://cn.vuejs.org/guide/essentials/forms.html#modifiers" target="_blank" rel="noopener noreferrer">内置的修饰符<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 的，在某些场景下，我们可能需要一个自定义的修饰符来完成一些特定的需求，因此这里我们创建一个自定义修饰符<code>firstToUpper</code>将<code>v-model</code>绑定输入的字符串的第一个字母转换为大写。</p><ol><li><p>父组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-a</span> <span class="token attr-name"><span class="token namespace">v-model:</span>title.firstToUpper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-a</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- &lt;son-a v-model.firstToUpper=&quot;title&quot;&gt;&lt;/son-a&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> SonA <span class="token keyword">from</span> <span class="token string">&quot;./components/SonA.vue&quot;</span>
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> title <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>SonA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- &lt;input type=&quot;text&quot; :value=&quot;modelValue&quot; @input=&quot;changeTitle&quot; /&gt; --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
		<span class="token comment">// modelValue?: string</span>
		title<span class="token operator">?</span><span class="token operator">:</span> string
		<span class="token comment">// 这个是 modelValue 使用自定义的修饰符时使用的</span>
		modelModifiers<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
		titleModifiers<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;update:title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">changeTitle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
		<span class="token comment">// @ts-ignore</span>
		<span class="token comment">// 这个 firstToUpper 会报错，但是效果能实现，因此使用 @ts-ignore 让它忽略这个报错</span>
		<span class="token comment">// if (props.modelModifiers?.firstToUpper) {</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>titleModifiers<span class="token operator">?.</span>firstToUpper<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// emit(&quot;update:modelValue&quot;, value)</span>
		<span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:title&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="自定义指令-directive" tabindex="-1"><a class="header-anchor" href="#自定义指令-directive" aria-hidden="true">#</a> 自定义指令 directive</h2><p>vue 的内置组件有<code>v-bind | v-model | v-if</code>等，但是有时候我们需要一些特定的功能，又不想重复的在组件中书写这些功能，这时就可以将其封装为自定义指令，如可以将上搜索框出现时自动聚焦的功能封装为自定义指令<code>v-focus</code>，这样就非常方便。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> vFocus <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面实现<code>v-focus</code>的代码中，可以看到这里使用了一个<code>mounted</code>钩子，这是 vue3 的指令的钩子，与生命周期类似，有如下七个：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> myDirective <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// 在绑定元素的 attribute 前</span>
	<span class="token comment">// 或事件监听器应用前调用</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 下面会介绍各个参数的细节</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 在元素被插入到 DOM 前调用</span>
	<span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 在绑定元素的父组件</span>
	<span class="token comment">// 及他自己的所有子节点都挂载完成后调用</span>
	<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 绑定元素的父组件更新前调用</span>
	<span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 在绑定元素的父组件</span>
	<span class="token comment">// 及他自己的所有子节点都更新后调用</span>
	<span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 绑定元素的父组件卸载前调用</span>
	<span class="token function">beforeUnmount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 绑定元素的父组件卸载后调用</span>
	<span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>指令的钩子中各项参数的说明可以参考官方文档：<a href="https://cn.vuejs.org/guide/reusability/custom-directives.html#directive-hooks" target="_blank" rel="noopener noreferrer">自定义指令 | 钩子参数<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>上一节中输入框中的首字母转变为大写的功能改造为自定义指令代码如下：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">/* VUpper.ts */</span>
<span class="token comment">// 自定义指令，input 的第一个英文字母转变为大写</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> DirectiveBinding <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> vUpper<span class="token operator">:</span> Directive <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vNode<span class="token punctuation">,</span> prevNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> value <span class="token operator">=</span> vNode<span class="token punctuation">.</span>target<span class="token operator">?.</span>value
		value <span class="token operator">=</span> value<span class="token operator">?.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> value<span class="token operator">?.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vue3-定义全局函数和变量" tabindex="-1"><a class="header-anchor" href="#vue3-定义全局函数和变量" aria-hidden="true">#</a> vue3 定义全局函数和变量</h2><p>在 vue2 中，可以使用<code>prototype</code>去定义全局函数或变量以便使用：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$http</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>但是在 vue3 中没有<code>prototype</code>属性，但是我们可以使用<code>app.config.globalProperties</code>进行代替：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span><span class="token function-variable function">$http</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://xiaoman.blog.csdn.net/article/details/123292042" target="_blank" rel="noopener noreferrer">其他在 TS 中使用 | 小满 zs 博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="编写-vue3-插件" tabindex="-1"><a class="header-anchor" href="#编写-vue3-插件" aria-hidden="true">#</a> 编写 vue3 插件</h2><p>这里先声明一下文件结构：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>├─components
│  │
│  └─Loading
           Loading.ts
           Loading.vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><code>Loading.vue</code></p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
	<span class="token keyword">const</span> isShow <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//定位loading 的开关</span>

	<span class="token keyword">const</span> <span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		isShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">const</span> <span class="token function-variable function">hide</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		isShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 对外暴露当前组件的属性和方法</span>
	<span class="token comment">// 为什么使用这个方法在 Loading.ts 文件中有写</span>
	<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		isShow<span class="token punctuation">,</span>
		show<span class="token punctuation">,</span>
		hide<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Loading.ts</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createVNode<span class="token punctuation">,</span> render<span class="token punctuation">,</span> VNode<span class="token punctuation">,</span> App <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&quot;./Loading.vue&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">install</span><span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// createVNode：vue 提供的底层方法，可以给组件创建一个虚拟 DOM，也就是 VNode</span>
		<span class="token keyword">const</span> vnode<span class="token operator">:</span> VNode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>Loading<span class="token punctuation">)</span>
		<span class="token comment">// render：vue提供的渲染函数，可以将虚拟 DOM 渲染为真实 DOM</span>
		<span class="token comment">// 这里将 vnode 挂载到 body 上</span>
		<span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
		<span class="token comment">// vue提供的全局配置，可以自定义</span>
		app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$loading <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token comment">// 这里的 vnode.component?.exposed? 是组件使用 defineExpose 方法暴露出来的变量或函数</span>
			<span class="token comment">// 这里之所以要使用这种方法，是因为本身组件中的方法或属性可以通过 vnode.component?.setupState 查看到，这个我们可以输出 vnode 在控制台中查看</span>
			<span class="token comment">// 但是当我们在这里使用的时候，代码会报错，因为在 vue 源码中的 VNode 类型中，确实没有声明 setupState 这个属性，说明 vue 本身不想让我们直接去使用这个属性</span>
			<span class="token comment">// 所以我们这里通过自己在组件中使用 defineExpose 来暴露</span>
			show<span class="token operator">:</span> vnode<span class="token punctuation">.</span>component<span class="token operator">?.</span>exposed<span class="token operator">?.</span>show<span class="token punctuation">,</span>
			hide<span class="token operator">:</span> vnode<span class="token punctuation">.</span>component<span class="token operator">?.</span>exposed<span class="token operator">?.</span>hide<span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>main.ts</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./style.css&quot;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span>
<span class="token comment">// 注意这里导入时不需要写上 .vue 或者 .ts 之类的文件后缀</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&quot;./components/Loading/Loading&quot;</span>

<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Loading<span class="token punctuation">)</span>

<span class="token comment">// 声明 $loading 的类型</span>
<span class="token keyword">type</span> <span class="token class-name">Load</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//编写ts loading 声明文件放置报错 和 智能提示</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;vue&quot;</span> <span class="token punctuation">{</span>
	<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ComponentCustomProperties</span> <span class="token punctuation">{</span>
		$loading<span class="token operator">:</span> Load
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token comment">// getCurrentInstance()：这个方法用来获取当前组件的实例</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// instance.proxy 在开发环境和生产环境中都能获取到</span>
instance<span class="token operator">?.</span>proxy<span class="token operator">?.</span>$loading<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="css-style-完整特性" tabindex="-1"><a class="header-anchor" href="#css-style-完整特性" aria-hidden="true">#</a> css style 完整特性</h2><h3 id="deep" tabindex="-1"><a class="header-anchor" href="#deep" aria-hidden="true">#</a> :deep()</h3><p>在 vue 中，处于<code>scoped</code>样式中的选择器如果想要做更深度的选择，即影响子组件，可以使用<code>:deep()</code>。</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">:deep(.b)</span> <span class="token punctuation">{</span>
	<span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="插槽选择器" tabindex="-1"><a class="header-anchor" href="#插槽选择器" aria-hidden="true">#</a> 插槽选择器</h3><p>默认情况下，作用域样式不会影响<code>&lt;slot/&gt;</code>渲染出来的内容。即我们在父组件中向插槽插入内容时，在子组件的<code>&lt;style&gt;</code>中书写样式进行修改是行不通的，但是我们可以使用<code>:slotted()</code>进行修改。</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">:slotted(.b)</span> <span class="token punctuation">{</span>
	<span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="全局选择器" tabindex="-1"><a class="header-anchor" href="#全局选择器" aria-hidden="true">#</a> 全局选择器</h3><p>如果想让一个样式应用到全局，以前我们都是在组件中不使用<code>scoped</code>，或者在<code>main</code>文件中导入一个公共的<code>css</code>样式文件，现在可以使用<code>:global()</code>，哪怕<code>&lt;style&gt;</code>加了<code>scpoed</code>，它也可以全局生效。</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">:global(.b)</span> <span class="token punctuation">{</span>
	<span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="v-bind" tabindex="-1"><a class="header-anchor" href="#v-bind" aria-hidden="true">#</a> v-bind</h3><p>在组件的<code>&lt;style&gt;</code>中，我们可以使用<code>v-bind()</code>动态绑定样式。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change-class<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color = &#39;green&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>改变颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

	<span class="token keyword">const</span> color <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
	<span class="token selector">.change-class</span> <span class="token punctuation">{</span>
		<span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="css-module" tabindex="-1"><a class="header-anchor" href="#css-module" aria-hidden="true">#</a> CSS Module</h3><p><code>&lt;style module&gt;</code>标签会被编译为 <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener noreferrer">CSS Modules<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 并且将生成的 CSS 类作为 <code>$style</code> 对象的键暴露给组件。</p><p>可以通过给<code>module</code>一个值来自定义注入的类对象的 property 键。</p><p>使用时也可以传入一个数组，一使用多个 module。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$style.red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>红色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>class1.green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>绿色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[$style.red, class1.green]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>绿色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">module</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
	<span class="token selector">.red</span> <span class="token punctuation">{</span>
		<span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>class1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
	<span class="token selector">.green</span> <span class="token punctuation">{</span>
		<span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>CSS Module</code>使用场景一般是 tsx 和 render 函数居多。</p><h2 id="vue-开发移动端" tabindex="-1"><a class="header-anchor" href="#vue-开发移动端" aria-hidden="true">#</a> vue 开发移动端</h2><p>以前开发移动端一般使用<code>% | font-size + rem | flex</code>，现在我们可以使用<code>vw &amp; vh</code>。</p><p>在 vue 项目中，我们为了让一些 css 新特性兼容旧版本浏览器，一般会使用一个第三方库<code>postcss</code>，使用它里面的一些预设方案来进行适配。其实<code>postcss</code>有一个插件(<code>postcss-px-to-viewport</code>)能对我们的项目进行移动端适配，它可以将<code>px</code>单位转换为<code>vw | vh</code>。我们需要做的就是在其配置文件中配置<strong>设计稿的宽度、要将 px 转换为 vw、转换单位后保留几位小数等等一些配置</strong>，然后我们在书写样式时按照设计稿的大小和单位<code>px</code>即可，<code>postcss</code>会将这些单位都转换为<code>vw</code>。使用方式如下：</p><ol><li><p>安装依赖</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install postcss-px-to-viewport -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>vue3 的项目推荐使用 vite 进行搭建，在 vite 中已经内置了<code>postcss</code>，因此可以不用额外创建<code>postcss.config.js</code>配置文件，直接在 vite 的配置文件中书写即可，当然，配置<code>postcss.config.js</code>文件也是可以的，全凭个人喜好，具体在 vite 的笔记中有</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">/* vite.config.ts */</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> fileURLToPath<span class="token punctuation">,</span> <span class="token constant">URL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;url&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span>
<span class="token keyword">import</span> vueJsx <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue-jsx&quot;</span>
<span class="token keyword">import</span> postcsspxtoviewport <span class="token keyword">from</span> <span class="token string">&quot;postcss-px-to-viewport&quot;</span> <span class="token comment">//插件</span>
<span class="token comment">// https://vitejs.dev/config/</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vueJsx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	css<span class="token operator">:</span> <span class="token punctuation">{</span>
		postcss<span class="token operator">:</span> <span class="token punctuation">{</span>
			plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token function">postcsspxtoviewport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					unitToConvert<span class="token operator">:</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 要转化的单位</span>
					viewportWidth<span class="token operator">:</span> <span class="token number">750</span><span class="token punctuation">,</span> <span class="token comment">// UI设计稿的宽度</span>
					unitPrecision<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token comment">// 转换后的精度，即小数点位数</span>
					propList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span>
					viewportUnit<span class="token operator">:</span> <span class="token string">&quot;vw&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定需要转换成的视窗单位，默认vw</span>
					fontViewportUnit<span class="token operator">:</span> <span class="token string">&quot;vw&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定字体需要转换成的视窗单位，默认vw</span>
					selectorBlackList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ignore-&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定不转换为视窗单位的类名，</span>
					minPixelValue<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 默认值1，小于或等于1px则不进行转换</span>
					mediaQuery<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否在媒体查询的css代码中也进行转换，默认false</span>
					replace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否转换后直接更换属性值</span>
					landscape<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否处理横屏情况</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
		alias<span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;@&quot;</span><span class="token operator">:</span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>如果 vite 的配置文件是 ts 书写的，那么就需要进行额外配置，因为在 ts 中，这个插件并没有提供声明文件</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">/* postcss-px-to-viewport.d.ts */</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;postcss-px-to-viewport&quot;</span> <span class="token punctuation">{</span>
	<span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
		unitToConvert<span class="token operator">:</span> <span class="token string">&quot;px&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;rem&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;cm&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;em&quot;</span>
		viewportWidth<span class="token operator">:</span> <span class="token builtin">number</span>
		viewportHeight<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// not now used; TODO: need for different units and math for different properties</span>
		unitPrecision<span class="token operator">:</span> <span class="token builtin">number</span>
		viewportUnit<span class="token operator">:</span> <span class="token builtin">string</span>
		fontViewportUnit<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// vmin is more suitable.</span>
		selectorBlackList<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
		propList<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
		minPixelValue<span class="token operator">:</span> <span class="token builtin">number</span>
		mediaQuery<span class="token operator">:</span> <span class="token builtin">boolean</span>
		replace<span class="token operator">:</span> <span class="token builtin">boolean</span>
		landscape<span class="token operator">:</span> <span class="token builtin">boolean</span>
		landscapeUnit<span class="token operator">:</span> <span class="token builtin">string</span>
		landscapeWidth<span class="token operator">:</span> <span class="token builtin">number</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Options<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>本节书写时间为<code>2023/02/24</code>，在<code>vite.config.ts</code>中引入插件不会报错，但是书写配置时并没有代码提示，因此需要第三步。</p></blockquote></li><li><p>修改<code>tsconfig.config.json</code>文件，如果项目中没有这个文件可以手动创建。这一步完成后，书写这个插件的配置时就有代码提示了。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@vue/tsconfig/tsconfig.web.json&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;env.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postcss-px-to-viewport.d.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/__tests__/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;composite&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><a href="https://xiaoman.blog.csdn.net/article/details/125490078" target="_blank" rel="noopener noreferrer">参考博客 | 小满 zs | 其中包含 hybrid 混合开发的一部分内容<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="vue-开发桌面程序-electron" tabindex="-1"><a class="header-anchor" href="#vue-开发桌面程序-electron" aria-hidden="true">#</a> vue 开发桌面程序 Electron</h2><p><a href="https://xiaoman.blog.csdn.net/article/details/126063804" target="_blank" rel="noopener noreferrer">Vue 开发桌面程序 Electron | 小满 zs 的博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="vue3-vite-开发中的环境变量" tabindex="-1"><a class="header-anchor" href="#vue3-vite-开发中的环境变量" aria-hidden="true">#</a> vue3 + vite 开发中的环境变量</h2><p>vite 中的环境变量的使用在 vite 的笔记中有写到。</p><h2 id="vite-分析打包后的各个文件夹大小" tabindex="-1"><a class="header-anchor" href="#vite-分析打包后的各个文件夹大小" aria-hidden="true">#</a> vite 分析打包后的各个文件夹大小</h2><p>因为 vite 打包是基于<code>rollup</code>的，因此我们可以使用<code>rollup-plugin-visualizer</code>插件来生成打包后的内容大小。如图：</p><p><img src="/docs/assets/image-20230225220900276-f44e992e.png" alt="image-20230225220900276"></p><ol><li><p>下载依赖</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install rollup-plugin-visualizer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>在 vite 文件中进行配置</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* vite.config.js */</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> visualizer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-visualizer&#39;</span>

<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">visualizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      	<span class="token literal-property property">open</span><span class="token operator">:</span><span class="token boolean">true</span>
 	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>上面两步完成后，使用<code>npm run build</code>类似的命令后，项目就会自动打开上图的页面到浏览器，以便我看查看哪些文件打包后偏大，可以针对性进行优化。</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><!----></div></footer><nav class="page-nav"><!----><a href="/docs/vue3/vue3%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0.html" class="nav-link next" aria-label="vue3 其他笔记"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">vue3 其他笔记<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/docs/assets/app-0ea0852b.js" defer></script>
  </body>
</html>
