import{_ as o,W as c,X as l,Y as n,Z as p,$ as t,a0 as s,C as i}from"./framework-4f54a744.js";const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATIAAADpCAYAAACnSLudAAADe0lEQVR4nO3cMZLUQBBFQTQqLWguw+E5D/buLYQLFkYbHS8i09NYZb344/Tx+fn1fPvL8/zz+d/fAXabn79+774BYMlr9wEAq4QMyBMyIE/IgDwhA/KEDMgTMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyJt7zt03ACyxyIA8IQPyhAzIEzIgT8iAPCED8oQMyBMyIE/IgDwhA/KEDMgTMiBPyIA8IQPy5nUcu28AWDLfxygD2lQMyBMyIE/IgDwhA/KEDMgTMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyBMyIG/e17n7BoAlFhmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RA3tzX7L4BYIlFBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZA38zp23wCwZD5eRhnQpmJAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeXNf5+4bAJZYZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5875m9w0ASywyIE/IgDwhA/KEDMgTMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyBMyIE/IgLz5OLUMaJvzdey+AWCJOQbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQN/d17r4BYIlFBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZA37/GMD9BmkQF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkzQ/P+ABxcxzH7hsAlvhrCeQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZA378t7ZECbRQbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQN7dnfIA4iwzIEzIgT8iAPCED8oQMyBMyIE/IgDwhA/KEDMgTMiBPyIA8IQPyhAzIEzIgb97X7L4BYIlFBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZEDe8TzPs/sIgBUWGZD3By0/ElY4tDghAAAAAElFTkSuQmCC",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAADnCAYAAACQXKqqAAADiElEQVR4nO3cMY4TQRBA0bLdRuxKnAKuwlXIuRUH4hC7+eZNQIJICLzSMF/vZTNRRV81tlSXl5fXvfeeP/39/K/3AP+Dtfee7z/fjp6DuB9fvxw9AnF777kePQTAexE0IEPQgIyrH/qBChsakCFoQMaambkcPQXAO1gzMx/vt6PnAHiYT04gw7+cQIYNDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzLWzMyT80FAgA0NyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IGPNzDwv54OA87OhARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmSsmZnb9XL0HAAPWzMzH27uoQHn55MTyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IGPNzDzfnQ8Czs+GBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpCxZmaenA8CAmxoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARlrZuZ+0zXg/H4H7SpowPkpGZAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaEDGmpn59vnT0XMAPMyGBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQ8Qv4VR7k6FA9uQAAAABJRU5ErkJggg==",r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAADmCAYAAABbAHkPAAADcUlEQVR4nO3c0U3DQBBAQZw4gqQARFqnH2oJXRxNJHfieaaC/bCe17K02+PxO+73rzeA/2yM8XZaPQTAswgakCFoQMZpjLF6BoCnsKEBGYIGZAgakCFoQIagARn+cgIZNjQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcjYVw/AMXx+/6wegQOwoQEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkOB/EFNf9vHoEDsCGBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpDhfBBTvO/enbyeoDHFadtWj8ABeG0CGYIGZAgakCFoQIagARmCBmQIGpAhaECGoAEZggZkCBqQIWhAhqABGYIGZDgfxBS3y3n1CByADQ3IEDQgQ9CADEEDMgQNyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgw/kgprhePGq8ng0NyBA0IEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IMNNF6a47ufVI3AAgsYU2+oBOASfnECGoAEZggZkCBqQIWhAhqABGYIGZAgakCFoQIagARmCBmQIGpAhaECGaxtMsTm3wQSCxhQf7qExgU9OIEPQgAxBAzIEDcgQNCBD0IAMQQMyBA3IEDQgQ9CADEEDMgQNyBA0IEPQgAzng5jidvGo8Xo2NCBD0IAMQQMyBA3IEDQgQ9CADEEDMv4AF74Qx/2S9R0AAAAASUVORK5CYII=",k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATIAAADmCAYAAABWHglIAAAEzElEQVR4nO3cP2idZRjG4efkvKf1ROvQIVQoRSw6uFQEUURQUCcXHYSoCCo4CPX/1qGDUJc24CA41UEQcRQHwYCgILiIsaMohSxpkTa2FGkKclykIMWl3wmvd3JdU/iy3NOP50vgG21snJvVP2az6z/+y389B/g/aEe+/K33BoCbdv7Vh2uh9wiAoYQMiCdkQDwhA+IJGRBPyIB4QgbEEzIgnpAB8YQMiCdkQDwhA+IJGRBPyIB4bdrGvTcADOIiA+IJGRBPyIB4QgbEEzIgnpAB8YQMiCdkQDwhA+IJGRBPyIB4QgbEEzIgnpAB8drCaNR7A8AgbW9zlAHZVAyIJ2RAPCED4gkZEE/IgHhCBsQTMiCekAHxhAyIJ2RAPCED4gkZEE/IgHhCBsRri5Nx7w0Ag7jIgHhCBsQTMiCekAHxhAyIJ2RAPCED4gkZEE/IgHhCBsQTMiCekAHxhAyIJ2RAvDadtN4bAAZxkQHxhAyIJ2RAPCED4gkZEE/IgHhCBsQTMiCekAHxhAyIJ2RAPCED4gkZEE/IgHitLYx6bwAYpO1ZcJQB2VQMiCdkQDwhA+IJGRBPyIB4QgbEEzIgnpAB8YQMiCdkQDwhA+IJGRBPyIB4QgbEa9PJuPcGgEFcZEA8IQPiCRkQT8iAeEIGxBMyIJ6QAfGEDIgnZEA8IQPiCRkQT8iAeEIGxBMyIF5bnLTeGwAGcZEB8YQMiCdkbJ/ZrNqVP3qvYBcQMrbNie+frpVrn/aewS4gZGyL/T98XXcdPVZLj9xRd358ovccdjj/smRurl25XI+ePl5VVa+8/VDVhdWqqnrv/aP10etvVVXVNy8eq+n+pW4b2ZmEjLm5evH3evn587Xv/oNV9eP155OtD+uNU5O6ur5ZX5w5K2TMnVdL5ub2Q4frhb9O1sbauRt+t7VxuR7/9plaOvJgh2XsdELGXN164GCtr++74fnm2lYdeuypDovYDYSMuZpculgPPPtkVVV99clmnV45W1VVB5aX67Zf1npOYwfzNzLm6sKlzfpu5YN688/luve516qq6vPVn+vdM+/UT3tfqrvvua/zQnai0fLqr7PeIwBu1mdPHPZqCeQTMiBe2zPWMiBbGy+Mem8AGMQ5BsQTMiCekAHxhAyIJ2RAPCED4gkZEE/IgHhCBsQTMiCekAHxhAyIJ2RAPCED4rXpZNx7A8AgLjIgnpAB8YQMiCdkQDwhA+IJGRBPyIB4QgbEEzIgnpAB8YQMiCdkQDwhA+IJGRCvLTaf8QGyuciAeEIGxBMyIJ6QAfGEDIgnZEA8IQPiCRkQT8iAeEIGxBMyIJ6QAfGEDIgnZEC8dovP+ADh2mg06r0BYBCvlkA8IQPiCRkQT8iAeEIGxBMyIJ6QAfGEDIgnZEA8IQPiCRkQT8iAeEIGxBMyIF5bnPgeGZDNRQbEEzIgnpAB8YQMiCdkQDwhA+IJGRBPyIB4QgbEEzIgnpAB8YQMiCdkQDwhA+K1qc/4AOFcZEA8IQPiCRkQT8iAeEIGxBMyIJ6QAfGEDIgnZEA8IQPiCRkQT8iAeEIGxBMyIF5bnLTeGwAGcZEB8YQMiCdkQDwhA+IJGRBPyIB4QgbEEzIgnpAB8YQMiCdkQDwhA+IJGRBPyIB4fwPhO15SQAUWHAAAAABJRU5ErkJggg==",d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATIAAADmCAYAAABWHglIAAAD6UlEQVR4nO3cLW6UURiG4flmzgDTwCJqSUg9YQvUVCBRbIClIGEDoEkgwaBx3QBYfiQbGAwhQWD4Qg53e12qqXrUnXcmmbN8/vzluPnpePz152/+9H+A/8E4e/1x9gaAv/b1yf3NdvYIgLWEDMgTMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyBMyIE/IgDwhA/KEDMgbh7GbvQFgFRcZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQN7YLsvsDQCrjJvDUQa0qRiQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RA3jjZ72ZvAFjFRQbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQNw77MXsDwCouMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyBMyIE/IgDwhA/KEDMgTMiBPyIC8MbbL7A0Aq4wbW0cZ0OZVRVjp24cXm+8f38+ecX2dX/qODOgTMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyBMyIG/4acUcy3a/uXP6YPYMuBKW00dnx9kjrqPdzdub04vns2dA3rvzuz5aAn1ev5hm2Rz2u9kj4EpwkQF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXnj3uNXszcArOIiA/KEDMgTMiBPyIC8cbL3kg/Q5iID8oQMyBMyIE/IgDwhA/KEDMgTMiBPyIA8IQPyhAzIEzIgT8iAPCED8oQMyBs3dloGtI3ddpm9AWAV5xiQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RA3jjsd7M3AKziIgPyhAzIEzIgT8iAPCED8oQMyBMyIE/IgLwxewBX29tnD2dP4Kq7f+kiA/qEDMgTMiBPyIA8IQPyxsnwjA/Q5iID8oQMyBMyIE/IgDwhA/L81pJ/6uLpm9kTuAZcZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkDduecYHiBvLsszeALCKj5ZAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeeNk7z0yoM1FBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZA3Dp7xAeJcZECekAF5QgbkCRmQJ2RA3nL66Ow4ewTA3/r08tJFBvQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQJ6QAXlCBuQJGZAnZECekAF5QgbkCRmQJ2RAnpABeUIG5AkZkCdkQN4POFAmEzBAnUkAAAAASUVORK5CYII=",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkkAAAAwCAYAAAAFMu4UAAABj0lEQVR4nO3WsU1bYRiG0c83uforOhqULkrkILk1lRfwDjSIBTxCprDcRBmDNr1ZgCJFekJBA1eAnSKd9fbXEudM8JTP5Nft7f7Hzc/a3m1reBkKAOA9an2r+XRe18ur+vJpWpNvlxd7cwQA8F/rW21W6/pwcn76fewYAIBj8bZ7q7+PD9WNHQIAcGy2d1uTBABwaHgZTBIAQGKSAAACkwQAEJgkAIDAJAEABCYJACAwSQAAgUkCAAhMEgBAYJIAAAKTBAAQmCQAgMAkAQAEJgkAIDBJAACBSQIACEwSAEBgkgAAApMEABCYJACAwCQBAAQmCQAgMEkAAIFJAgAITBIAQGCSAAACkwQAEJgkAIDAJAEABCYJACAwSQAAgUkCAAhMEgBAYJIAAAKTBAAQmCQAgMAkAQAEJgkAIDBJAAAHWt9MEgDAofl0Xl3r29gdAABHo/WtrpdX1W1W61rMFmWWAID3rPWtFrNFbVbr+nz2tSa//9zvW2v1seuqJmPnAQCMZF/1utvVMAz1/DTUP0LGM9A0U5DwAAAAAElFTkSuQmCC",m="/docs/assets/image-20211126133231812-3377b844.png",b="/docs/assets/动画6-ada52181.gif",g="/docs/assets/动画7-36cc390e.gif",y="/docs/assets/mountain-13e1b0c0.png",h="/docs/assets/coin-a8972109.png",A={},f=s(`<h1 id="phaser3-arcade-物理系统" tabindex="-1"><a class="header-anchor" href="#phaser3-arcade-物理系统" aria-hidden="true">#</a> phaser3 &amp;&amp; arcade 物理系统</h1><h2 id="config-配置" tabindex="-1"><a class="header-anchor" href="#config-配置" aria-hidden="true">#</a> config [配置]</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Phaser<span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">,</span> <span class="token comment">// 游戏的渲染环境</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scene</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 此写法为只有一个游戏场景时，这个场景配置为</span>
        <span class="token literal-property property">preload</span><span class="token operator">:</span> preload<span class="token punctuation">,</span>
        <span class="token literal-property property">create</span><span class="token operator">:</span> create<span class="token punctuation">,</span>
        <span class="token literal-property property">update</span><span class="token operator">:</span> update
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Game</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个 <strong>config</strong> 对象意味着你怎么配置 Phaser 游戏。一个 <strong>Phaser.Game</strong> 对象实例（instance）赋值给一个叫 <code>game</code> 的局部变量，上述配置对象传给这个实例。这将开始启动 <strong>Phaser</strong> 的过程。</p><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h3><p>属性 <code>type</code> 可以是 <code>Phaser.CANVAS</code> ，或者 <code>Phaser.WEBGL</code> ，或者 <code>phaser.AUTO</code> 。这是你要给你的游戏使用的渲染环境（context）。**推荐 Phaser.AUTO ** ，它将自动尝试使用 WebGL ，如果浏览器或者设备不支持，它将回退为 Canvas 。Phaser 生成的画布元素（canvas element）将径直添加到文档中调用脚本的那个节点上，不过也可以在游戏配置中指定一个父容器，如果需要的话。</p><h3 id="width-、height" tabindex="-1"><a class="header-anchor" href="#width-、height" aria-hidden="true">#</a> width 、height</h3><p>属性 <code>width</code> 和 <code>height</code> 设定了 Phaser 即将生成的画布元素的尺寸。这是游戏显示所用的分辨率。</p><h2 id="加载资源" tabindex="-1"><a class="header-anchor" href="#加载资源" aria-hidden="true">#</a> 加载资源</h2><p>加载游戏所需的资源。要做到这点，就要在场景中的一个叫 <code>preload[预加载]</code> 的函数内部，调用 Phaser 的 Loader（加载器）。Phaser 启动时会自动找到这个函数，并加载里面定义好的所有资源。</p><ol><li><code>this.load.image()</code> ：加载图片</li><li><code>this.load.spritesheet()</code> ：加载精灵表单</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token string">&#39;sky&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;assets/sky.png&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 加载图片，两个参数(资源的键值, 资源路径)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token string">&#39;ground&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;assets/platform.png&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token string">&#39;star&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;assets/star.png&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token string">&#39;bomb&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;assets/bomb.png&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">spritesheet</span><span class="token punctuation">(</span><span class="token string">&#39;dude&#39;</span><span class="token punctuation">,</span> 
        <span class="token string">&#39;assets/dude.png&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">frameWidth</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token literal-property property">frameHeight</span><span class="token operator">:</span> <span class="token number">48</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>  <span class="token comment">// 加载精灵表单（sprite sheet）</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>资源的 <strong>键值</strong> 为一个任意的字符串，即为你给这个资源起的一个名字，后续要使用到这个资源时，直接使用这个键值即可。</p><h3 id="显示图像" tabindex="-1"><a class="header-anchor" href="#显示图像" aria-hidden="true">#</a> 显示图像</h3><p>要显示已经加载的一张图像，则要将显示代码放在 <code>create[生成]</code> 函数中，代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&#39;sky&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>this.add.image()</code> ：三个参数分别为：</p><ol><li>图像坐标的 x 值</li><li>图像坐标的 y 值</li><li>图像资源的键值</li></ol><p>需要注意的是，在 Phaser3 中，所有游戏对象的定位都基于它们的中心点。所以，上面代码中的 x 和 y 分别为 400 和 300，则效果如下：</p><img src="`+e+'" alt="image-20211126102541454" style="zoom:50%;"><p>若将上面代码中 x 和 y 改为 0，则我们只能看到这个图像的右下角，效果如下：</p><img src="'+u+`" alt="image-20211126102639403" style="zoom:50%;"><blockquote><p>当然，我们也可以使用 <code>setOrigin[设置原点]</code> 来改变这种情况。如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;sky&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOrigin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token comment">// 此时我们将这个图像定位的原点改为了左上角，因此此时我们就能看到完整的图像了</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果如下：</p><img src="`+e+'" alt="image-20211126102541454" style="zoom:50%;"><p>若此时我们将图像定位的 x 和 y 改为 400 和 300，即 <code>this.add.image(400, 300, &#39;sky&#39;).setOrigin(0, 0)</code> ，则只能看到图像的左上角了，效果如下：</p><img src="'+r+`" alt="image-20211126103246434" style="zoom:50%;"></blockquote><h4 id="游戏对象的显示顺序" tabindex="-1"><a class="header-anchor" href="#游戏对象的显示顺序" aria-hidden="true">#</a> 游戏对象的显示顺序</h4><p>游戏对象的显示顺序与生成它们的顺序一致。即先添加的在下，后添加的在上。代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&#39;sky&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">iamge</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&#39;star&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">// 若这两张图像添加的顺序反过来，则星星将被天空盖住</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果如下：</p><img src="`+k+`" alt="image-20211126103722140" style="zoom:50%;"><h2 id="建立游戏世界" tabindex="-1"><a class="header-anchor" href="#建立游戏世界" aria-hidden="true">#</a> 建立游戏世界</h2><p>在底层，代码 <code>this.add.image()</code> 生成一个新的 <strong>Image（图形）</strong> 类游戏对象，并把它添加到当前场景的显示列表（display list）中。你的所有游戏对象都活在这个列表中。</p><h3 id="scene-场景" tabindex="-1"><a class="header-anchor" href="#scene-场景" aria-hidden="true">#</a> Scene[场景]</h3><p><code>Scene</code> ：自身没有确定的尺寸，在所有方向上都是无限延展的。</p><h3 id="camera-镜头" tabindex="-1"><a class="header-anchor" href="#camera-镜头" aria-hidden="true">#</a> Camera[镜头]</h3><p><code>Camera</code> ：系统控制着你观看场景的视野，你可以随意移动、推拉已激活的镜头。你还可以另外生成一些镜头，用于别的观看场景的视野。</p><h3 id="搭建场景" tabindex="-1"><a class="header-anchor" href="#搭建场景" aria-hidden="true">#</a> 搭建场景</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> platforms

<span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&#39;sky&#39;</span><span class="token punctuation">)</span>
    
    platforms <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">staticGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 使用 Arcade（游乐场）物理系统</span>
    
    platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">568</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">refreshBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span>
    platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span>
    platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">750</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>this.physics</code> ：代码中有一个对此方法的调用，这意味着我们在使用 <strong>Arcade（游乐场）</strong> 物理系统（Physics system），不过在此之前我们还需要把它添加到游戏配置中，以便告诉 Phaser 我们的游戏需要它。所以让我们更新以下，引入对物理系统的支持。如下是修订后的游戏配置：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Phaser<span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
    <span class="token literal-property property">physics</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 新添加的属性</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;arcade&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">arcade</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">gravity</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">300</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">debug</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scene</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">preload</span><span class="token operator">:</span> preload<span class="token punctuation">,</span>
        <span class="token literal-property property">create</span><span class="token operator">:</span> create<span class="token punctuation">,</span>
        <span class="token literal-property property">update</span><span class="token operator">:</span> update
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果如下：</p><img src="`+d+`" alt="image-20211126113305813" style="zoom:50%;"><h2 id="平台" tabindex="-1"><a class="header-anchor" href="#平台" aria-hidden="true">#</a> 平台</h2><p>我们刚加了一堆代码到 <code>create</code> 函数中，此函数应该更详尽地解释下，首先，<code>platforms = this.physics.add.staticGroup()</code> ：</p><ul><li><p>这一句生成一个静态物理组（Group），并把这个组赋值给变量 <strong>platforms</strong> 。在 Arcade 物理系统中，有动态的和静态的两类物体（body）：</p><ol><li>动态物体：可以通过外力，比如 <code>速度[velocity] | 加速度[acceleration]</code> 得以四处移动。可以跟其他对象发生 <code>反弹[bounce] | 碰撞[collide]</code> ，此类碰撞受物体质量和其他因素影响。</li><li>静态物体：与动态物体不同，静态物体只有位置和尺寸。</li></ol><p>那么上什么是 <strong>组</strong> 呢？如其名所示，是把近似对象组织在一起的手段，控制对象全体就像控制一个统一的个体。你也可以检查 <strong>组</strong> 与其他游戏对象之间的碰撞。 <strong>组</strong> 能够生成自己的游戏对象，这是通过便利的赋值函数如 <code>create</code> 实现的。物理组会自动生成已经开启物理系统的子项（children）。</p></li></ul><p>平台组做好了，我们现在可以用它生成平台：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">568</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">refreshBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/* 放置地面：
   使用 create() 添加一张新的地面图像到 400 × 568 的位置，
   然后用函数 setScale(2) 将它放大到两倍，
   最后调用 refreshBody() ，这是因为缩放的是一个 静态物体 ，所有必须把所作变动告诉物理世界（physics world）*/</span>
platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span>
platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span>
platforms<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">750</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">,</span> <span class="token string">&#39;ground&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 放置其他平台</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>&#39;ground&#39; 是如下图像：</p><p><img src="`+v+`" alt="image-20211126115230341"></p><h2 id="玩家" tabindex="-1"><a class="header-anchor" href="#玩家" aria-hidden="true">#</a> 玩家</h2><p>做一个新的变量 <code>player</code> ，并把下面的代码添加到 <code>create</code> 函数中：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* 第一部分 start */</span>
player <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">,</span> <span class="token string">&#39;dude&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 生成精灵 player[玩家]</span>
player<span class="token punctuation">.</span><span class="token function">setBounce</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token comment">// 给精灵赋予 0.2 的反弹值，这表示它跳起后着地时始终会弹起一点点</span>
player<span class="token punctuation">.</span><span class="token function">setCollideWorldBounds</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 设置精灵与边界的碰撞</span>
<span class="token comment">/* 第一部分 end */</span>

<span class="token comment">/* 向左的 left 动画 start */</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 向左的动画</span>
    <span class="token literal-property property">frames</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">generateFrameNumbers</span><span class="token punctuation">(</span><span class="token string">&#39;dude&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">end</span><span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 0, 1, 2, 3 帧</span>
    <span class="token literal-property property">frameRate</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 跑动时每秒 10 帧</span>
    <span class="token literal-property property">repeat</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// 动画要循环播放</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/* 向左的 left 动画 end */</span>

<span class="token comment">/* 最后一个动画键值用 &#39;true&#39; */</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;turn&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">frames</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;dude&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">frame</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">frameRate</span><span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* 向右的 right 动画 start */</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">frames</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">generateFrameNumbers</span><span class="token punctuation">(</span><span class="token string">&#39;dude&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token literal-property property">end</span><span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">frameRate</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">repeat</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/* 向右的 right 动画 end */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里有两件不同的事情：生成物理精灵（sprite），生成精灵能用到的几个动画。</p><h3 id="物理精灵" tabindex="-1"><a class="header-anchor" href="#物理精灵" aria-hidden="true">#</a> 物理精灵</h3><p>上面代码第一部分生成精灵 <code>player[玩家]</code> ，位于 100 × 450 位置。精灵是通过物理游戏对象工厂函数（即 <code>this.physics.add</code> ）生成的，这意味着它默认拥有一个动态物体。</p><p>精灵生成后，被赋予 0.2 的一点点反弹值。然后精灵设置了与世界边界（bound）的碰撞。</p><h3 id="动画" tabindex="-1"><a class="header-anchor" href="#动画" aria-hidden="true">#</a> 动画</h3><p>如果回顾一下 <code>preload</code> 函数，就会发现 &#39;dude&#39; 是作为精灵表单（sprite sheet）载入的，而非图像。这是因为它包含了动画帧。完整的精灵表单如下：</p><p><img src="`+m+'" alt="image-20211126133231812"></p><p>总共有 9 帧，4 帧向左跑动，4 帧向右跑动，一帧面向镜头。</p><blockquote><p>注：Phaser 支持翻转精灵，以节省动画帧，不过因为这是个案例，所以保持老派做法。</p></blockquote><p>定义两个动画，分别为 <strong>lfet</strong> 和 <strong>right</strong> 。</p><p>left 动画使用 0, 1, 2, 3 帧，跑动时每秒 10 帧。&#39;repeat: -1&#39; 告诉动画要循环播放。</p><p>这是标准跑动周期。反方向的动画把这些重复一下，键值用 &#39;right&#39; 。最后一个动画键值用 &#39;turn&#39;（转身）。</p><blockquote><p><strong>补充信息</strong> ：在 Phaser3 中，动画管理器（Animation Manager）是全局系统。其中生成的动画是全局变量，所有游戏对象都能用到它们。它们分享基础的动画数据，同时管理自己的时间轴（timeline）。这就使我们能够在某时定义一个动画，却可以应用到任意多的游戏对象上。</p></blockquote><h2 id="添加物理系统" tabindex="-1"><a class="header-anchor" href="#添加物理系统" aria-hidden="true">#</a> 添加物理系统</h2><p>Phaser 支持多种物理系统，每一种都以插件的形式运作，任何 Phaser 场景都能使用它们。在本文写作时，已经装有 Arcade ，Impact ，Matter.js 三种物理系统。针对本教程，我们将给我们的游戏使用 Arcade 物理系统，它简单，轻量，完美地支持移动浏览器。</p><p>物理精灵在生成时，即被赋予 <code>body[物体]</code> 属性，这个属性指向它的 Arcade 物理系统的 Body 。它表示精灵是 Arcade 物理引擎的一个物体。物体对象有很对属性和方法，我们可以玩一下。</p><p>如， <strong>在一个精灵上模仿重力效果</strong> ，可以这么简单写： <code>player.body.setGravityY(300)</code> 。这是个随意的值，值越大，你的对象感觉越重，下落越快。将其加到代码里，你会看到玩家不停往下落，完全无视先前生成的地面：</p><img src="'+b+'" alt="动画6" style="zoom:25%;"><p>原因在于，我们还没有测试地面和玩家之间的碰撞。</p><p>我们已经能够告诉 Pharse ，地面和平台是静态物体，但是我们这样做，反而生成了动态的。如此，当玩家和它们碰撞时，玩家会停止一瞬，然后全部崩溃。这是因为，除非别那么做，否则地面是会移动的物体，当玩家碰到它时，碰撞导致的力会作用于地面，因此两个物体交换彼此的速度，于是地面也开始下落。</p><p>要想玩家能与平台碰撞，我们可以生成一个碰撞对象。该对象监控两个物体（可以是组），检测二者之间的碰撞和重叠事件。如果发生事件，这时它可以随意调用我们的回调函数。不过仅仅就与平台间的碰撞而言，我们没必要那么做： <code>this.physics.add.collider(player, platforms)</code> 。</p><p><strong>碰撞器（Collider）</strong> 是施魔法的地方。 <span style="color:red;">它接收两个对象，检测二者之间的碰撞，并使二者分开</span> 。在本例中，我们把玩家精灵和平台组交给它。它很聪明，可以执行针对所有组成员的碰撞，所以这一个调用就能处理与组合以及所有平台的碰撞。结果就有了一个稳固的平台，不再崩塌：</p><img src="'+g+`" alt="动画7" style="zoom:25%;"><h2 id="键盘控制" tabindex="-1"><a class="header-anchor" href="#键盘控制" aria-hidden="true">#</a> 键盘控制</h2><p>Phaser 有内置的键盘管理器，用它的一个好处体现在这样一个方便的小函数： <code>cursors = this.input.keyboard.createCursorKeys()</code> 。</p><p>这里把四个属性 <code>up | down | left | right</code> （都是 Key 对象的实例），植入光标（cursor）对象。然后我们要做的就是 <code>update</code> 循环中做这样一些轮询：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> cursors <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">function</span> <span class="token function">update</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cursors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">createCursorKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Phaser 内置的键盘管理器</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>cursors<span class="token punctuation">.</span>left<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 向左移动，isDown 检测按键是否被按下</span>
	    player<span class="token punctuation">.</span><span class="token function">setVelocityX</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">160</span><span class="token punctuation">)</span>
	    player<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cursors<span class="token punctuation">.</span>right<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 向右移动</span>
	    player<span class="token punctuation">.</span><span class="token function">setVelocityX</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">)</span>
	    player<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// 静止</span>
	    player<span class="token punctuation">.</span><span class="token function">setVelocityX</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	    player<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&#39;turn&#39;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span>cursors<span class="token punctuation">.</span>up<span class="token punctuation">.</span>isDown <span class="token operator">&amp;&amp;</span> player<span class="token punctuation">.</span>body<span class="token punctuation">.</span>touching<span class="token punctuation">.</span>down<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 跳跃</span>
	    player<span class="token punctuation">.</span><span class="token function">setVelocityY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">330</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码第一件事是使用 Phaser 内置的键盘管理器，然后检测方向键的 left 、right 和 up 是否被按下。</p><p>代码的最后部分添加了跳跃功能。方向键 up 是跳跃键，我们检查它有没有被按下，同时也检测玩家是不是正与地面接触，这样可以放置玩家一直在空中向上跳跃。</p><p>当这些条件都符合，我们应用一个垂直速度，330px 每秒。玩家会自动落回地面，因为有重力。</p><h2 id="收集星星" tabindex="-1"><a class="header-anchor" href="#收集星星" aria-hidden="true">#</a> 收集星星</h2><p>现在让我们撒几颗星星到场景中，让玩家来收集。要做到这一点，我们要生成一个新的组，叫 <strong>star</strong> ，再充实它。在生成函数中，我们加入如下代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 第一段代码</span>
star <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;star&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">repeat</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token literal-property property">setXY</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stepX</span><span class="token operator">:</span> <span class="token number">70</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 第二段代码</span>
stars<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    child<span class="token punctuation">.</span><span class="token function">setBounceY</span><span class="token punctuation">(</span>Phaser<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">FloatBetween</span><span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个过程跟我们生成平台近似。因为需要星星移动、反弹，我们生成动态物理组，而不是静态的。</p><p>组可以接收配置对象，以便于设置。在本例中，组配置对象（第一段代码）有 3 个部分：</p><ol><li>首先，它设置 <code>key</code>（键值）为星星图像。这意味着配置对象生成的所有子项，都将被默认地赋予星星图像。</li><li>然后，它设置 <code>repeat</code> （重复值）为 11。因为它自动生成一个子项，重复 11 次就意味着我们总共将得到 12 颗。</li><li>最后，用 <code>setXY</code> 设置组的 12 个子项的位置。每个子项都将如此放置： <ul><li>初始是 <code>{x: 12, y: 0}</code></li><li>然后 x 步进 70 <code>{x: 82, y: 0}</code></li><li>后续每个都依次类推。</li></ul></li></ol><p>第二段代码遍历组中所有子项，给它们的 <code>bounce.y</code> 赋予 0.4 到 0.8 之间的随机值，反弹范围在 0 [不反弹] 到 1 [完全反弹] 。因为星星都是在 y 等于 0 的位置产出的，重力将把它们往下拉，直到与平台或地面碰撞为止。反弹值意味着它们将随机地反弹上来，直到最终恢复安定为止。</p><p><span style="color:gray;">如果现在我们这样就运行代码，星星会落下并穿过游戏底边，消失不见了。要防止这个问题，我们就要检测它们与平台的碰撞。我们可以再使用一个碰撞器对象来做这件事：</span></p><p><code>this.physics.add.collider(stars, platforms)</code></p><p>与此类似，我们也将检测万家是否与星星重叠： <code>this.physics.add.overlap(player, stars, collectStar, null, this)</code> 。</p><p>这会告诉 Phaser ，要检查玩家与组中任何一颗星星的重叠。如果检测到，它们就会被传送到 <code>collectStar</code> 函数：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">collectStar</span><span class="token punctuation">(</span><span class="token parameter">player<span class="token punctuation">,</span> star</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    star<span class="token punctuation">.</span><span class="token function">disableBody</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>简单的说，星星带着个已关闭的物体，其父级游戏对象被设置为不会动、不可见，即将它从显示中移除。</p></blockquote><h2 id="计分" tabindex="-1"><a class="header-anchor" href="#计分" aria-hidden="true">#</a> 计分</h2><p>为了做得分，我们将使用游戏对象 <code>Text(文本)</code> 。在此我们生成两个新的变量：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> score <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment">// 实际得分</span>
<span class="token keyword">let</span> scoreText  <span class="token comment">// 文本对象本身 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>scoreText</code> 在 <code>create</code> 函数中构建：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    scoreText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">&#39;score: 0&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;32px&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;$000&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">/* 
    	参数一和参数二是显示文本的坐标位置。
    	参数三是要显示的默认字符串。
    	参数四是一个对象，包含字号、填充色。因为没有指定字体，实际上将使用 Phaser 默认的字体。
    */</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后调整 <code>collectStar</code> 函数，以便玩家捡到一颗星星时分数会提高，文本会更新已反映出新状态：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">collectStar</span><span class="token punctuation">(</span><span class="token parameter">player<span class="token punctuation">,</span> star</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    star<span class="token punctuation">.</span><span class="token function">disableBody</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    
    score <span class="token operator">+=</span> <span class="token number">10</span>
    scoreText<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&#39;Score: &#39;</span> <span class="token operator">+</span> score<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
	这样一来，每颗星星加 10 分，scoreText 将更新，显示出新的总分。
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="敌人" tabindex="-1"><a class="header-anchor" href="#敌人" aria-hidden="true">#</a> 敌人</h2><p>添加的敌人的逻辑是这样的：</p><p><span style="color:gray;">第一次收集到所有星星后，将放出一个跳跳弹。这个炸弹只是随机的在平台上各处跳，如果碰到它，角色死亡。每次收集完星星之后，将会重新产出所有星星，且多产生一个跳跳弹。</span></p><p>我们首先需要的是给炸弹一个组，还有碰撞器：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    bombs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">collider</span><span class="token punctuation">(</span>bombs<span class="token punctuation">,</span> platforms<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">collider</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> bombs<span class="token punctuation">,</span> hitBomb<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>炸弹当然会跳出平台，如果玩家碰到它们，我们将调用 <code>hitBomb</code> 函数。这个函数所作的就是停止游戏，使玩家变成红色：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">hitBomb</span><span class="token punctuation">(</span><span class="token parameter">player<span class="token punctuation">,</span> bomb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    player<span class="token punctuation">.</span><span class="token function">setTint</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">)</span>
    player<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&#39;turn&#39;</span><span class="token punctuation">)</span>
    gameOver <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在看来还不错，不过我们要放出一个炸弹。要做到这一点，我们改一下 <code>collectStar</code> 函数：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">collectStar</span><span class="token punctuation">(</span><span class="token parameter">player<span class="token punctuation">,</span> star</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    star<span class="token punctuation">.</span><span class="token function">disableBody</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    
    score <span class="token operator">+=</span> <span class="token number">10</span>
    scoreText<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&#39;Score: &#39;</span> <span class="token operator">+</span> score<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stars<span class="token punctuation">.</span><span class="token function">countActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stars<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            child<span class="token punctuation">.</span><span class="token function">enableBody</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> child<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">(</span>player<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token operator">?</span> Phaser<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span> <span class="token operator">:</span> Phaser<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>
        
        <span class="token keyword">let</span> bomb <span class="token operator">=</span> bomb<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">&#39;bomb&#39;</span><span class="token punctuation">)</span>
        bomb<span class="token punctuation">.</span><span class="token function">setBounce</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        bomb<span class="token punctuation">.</span><span class="token function">setCollideWorldBounds</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        bomb<span class="token punctuation">.</span><span class="token function">setVelocity</span><span class="token punctuation">(</span>Phaser<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们使用一个组的方法 <code>countActive</code> ，看看有多少星星还活着。如果没有了，那么玩家把它们收集完了，于是我们使用迭代函数重新激活所有星星，重置它们的 y 位置为 0 。这将使所有星星再次从画面顶部落下。</p><p>下一部分代码生成一个炸弹。首先，我们取一个随机 x 坐标给它，始终在玩家的对侧画面，以便给玩家个机会。然后生成炸弹，设置它跟世界碰撞、反弹，拥有随机速度。</p><h2 id="监听键盘按键" tabindex="-1"><a class="header-anchor" href="#监听键盘按键" aria-hidden="true">#</a> 监听键盘按键</h2><p>代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> keyA <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 按键 A</span>
<span class="token keyword">let</span> key5 <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 按键 5</span>
<span class="token keyword">let</span> keySpace <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 按键 space 空格</span>
<span class="token keyword">let</span> keyLeft <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 按键 left 方向键左键</span>
<span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    keyA <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">addKey</span><span class="token punctuation">(</span>Phaser<span class="token punctuation">.</span>Input<span class="token punctuation">.</span>Keyboard<span class="token punctuation">.</span>KeyCodes<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">)</span> <span class="token comment">// 保存按键 A</span>
    key5 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">addKey</span><span class="token punctuation">(</span>Phaser<span class="token punctuation">.</span>Input<span class="token punctuation">.</span>Keyboard<span class="token punctuation">.</span>KeyCodes<span class="token punctuation">.</span><span class="token constant">FIVE</span><span class="token punctuation">)</span> 
    <span class="token comment">// 保存按键 5</span>
    keySpace <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">addKey</span><span class="token punctuation">(</span>Phaser<span class="token punctuation">.</span>Input<span class="token punctuation">.</span>Keyboard<span class="token punctuation">.</span>KeyCodes<span class="token punctuation">.</span><span class="token constant">SPACE</span><span class="token punctuation">)</span> 
    <span class="token comment">// 保存按键 space 空格</span>
    keyLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">addKey</span><span class="token punctuation">(</span>Phaser<span class="token punctuation">.</span>Input<span class="token punctuation">.</span>Keyboard<span class="token punctuation">.</span>KeyCodes<span class="token punctuation">.</span><span class="token constant">LEFT</span><span class="token punctuation">)</span> 
    <span class="token comment">// 保存按键 left 方向键左键</span>
<span class="token punctuation">}</span>
<span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyA<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 判断按键 A 是否被按下</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key5<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 判断按键 5 是否被按下</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;5&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keySpace<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 判断按键 SPACE 空格 是否被按下</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;SPACE&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyLeft<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 判断按键 LEFT 方向键左键 是否被按下</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;LEFT&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取鼠标点击的坐标" tabindex="-1"><a class="header-anchor" href="#获取鼠标点击的坐标" aria-hidden="true">#</a> 获取鼠标点击的坐标</h2><p>代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;pointerdown&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">pointer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 点击事件</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;pointer.x&#39;</span><span class="token punctuation">,</span> pointer<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token comment">// 点击的 x 轴坐标</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;pointer.y&#39;</span><span class="token punctuation">,</span> pointer<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token comment">// 点击的 y 轴坐标</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="鼠标松开" tabindex="-1"><a class="header-anchor" href="#鼠标松开" aria-hidden="true">#</a> 鼠标松开</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;pointerup&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">pointer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;pointerup&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置对象的缩放" tabindex="-1"><a class="header-anchor" href="#设置对象的缩放" aria-hidden="true">#</a> 设置对象的缩放</h2><p><code>.setScale(alpha)</code> ：控制精灵的缩放</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">tileSprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> 宽度<span class="token punctuation">,</span> 高度<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的 key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span>alpha<span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span>alpha<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置对象的层级" tabindex="-1"><a class="header-anchor" href="#设置对象的层级" aria-hidden="true">#</a> 设置对象的层级</h2><p><code>.setDepth(number)</code> ：设置对象的层级，可以理解为 CSS 中的 <strong>z-index</strong> 属性。</p><ul><li>使用方式与上面方法相同</li></ul><h2 id="设置对象的旋转-2d" tabindex="-1"><a class="header-anchor" href="#设置对象的旋转-2d" aria-hidden="true">#</a> 设置对象的旋转 2D</h2><p><code>.setRotation(number)</code> ：设置对象的旋转，参数 number 为弧度制。</p><ul><li><code>.setRotation(1.56)</code> ：对象旋转 90° 。</li></ul><p><code>.setAngle(number)</code> ：设置对象的旋转，参数 number 为角度制。</p><ul><li><code>.setAngle(90)</code> ：对象旋转 90° 。</li></ul><h2 id="设置对象定位的中心点位置" tabindex="-1"><a class="header-anchor" href="#设置对象定位的中心点位置" aria-hidden="true">#</a> 设置对象定位的中心点位置</h2><p><code>.setOrigin(alpha, alpha)</code> ：设置对象定位的中心点位置，默认位置为对象(50%, 50%) 位置。</p><ul><li><code>.setOrigin(0.5, 1)</code> ：将对象定位的中心点位置为 x 轴 50% 位置，y 轴 100% 位置。</li></ul><h2 id="将游戏对象挂载到物理引擎上" tabindex="-1"><a class="header-anchor" href="#将游戏对象挂载到物理引擎上" aria-hidden="true">#</a> 将游戏对象挂载到物理引擎上</h2><p><code>this.physics.add.existing()</code> ：将游戏对象挂载到物理引擎上</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">tileSprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> 宽度<span class="token punctuation">,</span> 高度<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的 key&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的key&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span><span class="token constant">OBJ</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置对象移动的速度" tabindex="-1"><a class="header-anchor" href="#设置对象移动的速度" aria-hidden="true">#</a> 设置对象移动的速度</h2><p><code>.setVelocityX(number)</code> ：设置对象在 x 轴方向上的速度。</p><p><code>.setVelocityY(number)</code> ：设置对象在 y 轴方向上的速度。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">tileSprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> 宽度<span class="token punctuation">,</span> 高度<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的 key&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">setVelocityY</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的key&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span><span class="token constant">OBJ</span><span class="token punctuation">)</span>
<span class="token constant">OBJ</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">setVelocityX</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取对象移动的速度" tabindex="-1"><a class="header-anchor" href="#获取对象移动的速度" aria-hidden="true">#</a> 获取对象移动的速度</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">tileSprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> 宽度<span class="token punctuation">,</span> 高度<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的 key&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;velocityX&#39;</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token comment">// 输出 x 轴方向上的移动速度</span>

<span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x坐标<span class="token punctuation">,</span> y坐标<span class="token punctuation">,</span> <span class="token string">&#39;纹理图片的key&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span><span class="token constant">OBJ</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;velocityY&#39;</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token comment">// 输出 y 轴方向上的移动速度</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置要渲染的帧" tabindex="-1"><a class="header-anchor" href="#设置要渲染的帧" aria-hidden="true">#</a> 设置要渲染的帧</h2><p><code>.setFrame(number)</code> ：设置要渲染的帧，要渲染的对象使用的图片为精灵图，如下：</p><img src="`+y+'" alt="mountain" style="zoom:25%;"><p style="width:100%;text-align:center;color:gray;">图1</p><p><img src="'+h+`" alt="coin"></p><p style="width:100%;text-align:center;color:gray;">图2</p><h2 id="设置对象是否可以通过碰撞移动" tabindex="-1"><a class="header-anchor" href="#设置对象是否可以通过碰撞移动" aria-hidden="true">#</a> 设置对象是否可以通过碰撞移动</h2><p><code>.setImmovable(boolean)</code> ：设置对象是否可以通过碰撞移动，默认为 true。</p><ul><li>即有速度的物体碰撞无速度的物体会带动无速度的物体移动</li></ul><h2 id="设置对象受到的重力" tabindex="-1"><a class="header-anchor" href="#设置对象受到的重力" aria-hidden="true">#</a> 设置对象受到的重力</h2><p><code>.setGravityX(number)</code> ：设置对象在 x 轴方向上受到的重力。</p><p><code>.setGravityY(number)</code> ：设置对象在 y 轴方向上受到的重力。</p><blockquote><p>对象需挂载到物理引擎上 <code>this.physics.add.existing()</code> 。</p></blockquote><h2 id="控制游戏暂停和继续" tabindex="-1"><a class="header-anchor" href="#控制游戏暂停和继续" aria-hidden="true">#</a> 控制游戏暂停和继续</h2><p><code>game.scene.pause(游戏场景[string])</code> ：暂停某个游戏场景</p><p><code>game.scene.resume(游戏场景[string])</code> ：继续某个游戏场景</p><p>代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Game</span><span class="token punctuation">(</span>gameConfig<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">playGame</span> <span class="token keyword">extends</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Scene</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#39;PlayGame&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
game<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token string">&#39;PlayGame&#39;</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
game<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token string">&#39;PlayGame&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="控制游戏开始与结束" tabindex="-1"><a class="header-anchor" href="#控制游戏开始与结束" aria-hidden="true">#</a> 控制游戏开始与结束</h2><p><code>game.scene.start(游戏场景[string])</code> ：开始某个游戏场景</p><p><code>game.scene.stop(游戏场景[string])</code> ：结束某个游戏场景</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Game</span><span class="token punctuation">(</span>gameConfig<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">preloadGame</span> <span class="token keyword">extends</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Scene</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#39;PreloadGame&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
        game<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&#39;PlayGame&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">playGame</span> <span class="token keyword">extends</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Scene</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#39;PlayGame&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
        game<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token string">&#39;PlayGame&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="游戏配置" tabindex="-1"><a class="header-anchor" href="#游戏配置" aria-hidden="true">#</a> 游戏配置</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> width <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> height <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> gameConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Phaser<span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">,</span>
    width<span class="token punctuation">,</span>
    height<span class="token punctuation">,</span>
    <span class="token literal-property property">scene</span><span class="token operator">:</span> <span class="token punctuation">[</span>preloadGame<span class="token punctuation">,</span> startGame<span class="token punctuation">,</span> playGame<span class="token punctuation">,</span> endGame<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// scene 为一个数组，其中参数为各个继承自 Phaser.Scene 的游戏场景</span>
    <span class="token literal-property property">parent</span><span class="token operator">:</span> <span class="token string">&#39;game&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 生成的 canvas 要插入哪个 DOM 结构中</span>
    <span class="token literal-property property">physics</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 物理设置</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;arcade&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Game</span><span class="token punctuation">(</span>gameConfig<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="向场景中添加文字" tabindex="-1"><a class="header-anchor" href="#向场景中添加文字" aria-hidden="true">#</a> 向场景中添加文字</h2><p><code>this.add.text(x轴位置, y轴位置, &#39;要显示的文字&#39;, {文本的样式})</code> ：生成文本</p><p><code>.setText(要显示的文字[string])</code> ：更新文本</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;0.2rem&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;#fff&#39;</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
text<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&#39;提示&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="加载音频和播放音频" tabindex="-1"><a class="header-anchor" href="#加载音频和播放音频" aria-hidden="true">#</a> 加载音频和播放音频</h2><p><code>this.load.audio(key[string], src[string])</code> ：加载音频。</p><p><code>this.sound.add(key[string])</code> ：添加音频。</p><p><code>.addMarker(markerConfig)</code> ：在当前声音中添加一个标记。标记由名称、开始时间、持续时间和可选的配置对象表示。这样可以将多个声音捆绑到一个音频文件中，并使用标记在它们之间跳转进行播放。</p><p><code>.play(&#39;loop&#39;, {delay: 0})</code> ：循环播放音乐，延迟时间为 0 。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">audio</span><span class="token punctuation">(</span><span class="token string">&#39;bgm&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token operator">/</span>bgm<span class="token operator">/</span>bgm<span class="token punctuation">.</span>mp3<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> markerConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;loop&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 开始时间</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token comment">// 音频持续时间</span>
        <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 开启循环</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bgm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sound<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;bgm&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bgm<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span>markerConfig<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bgm<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&#39;loop&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="phaser-physics-arcade-sprite" tabindex="-1"><a class="header-anchor" href="#phaser-physics-arcade-sprite" aria-hidden="true">#</a> Phaser.Physics.Arcade.Sprite</h2><p><code>this.physics.add.sprite(x轴位置, y轴位置, key[string])</code> ：<strong>Arcade Physics Sprite</strong> 是具有 <strong>Arcade Physics</strong> 主体和相关组件的 <strong>Sprite</strong> 。它可以是动态的，也可以是静态的。<strong>Arcade Sprite</strong> 和 <strong>Arcade Image</strong> 之间的主要区别在于您不能为 <strong>Arcade Image</strong> 设置动画。如果不需要动画，那么可以使用 <strong>Arcade Image</strong> 而不是 <strong>Arcade Sprites</strong> 。</p><h2 id="phaser-gameobjects-tilesprite" tabindex="-1"><a class="header-anchor" href="#phaser-gameobjects-tilesprite" aria-hidden="true">#</a> Phaser.GameObjects.TileSprite</h2><p><code>this.add.tileSprite(x轴位置, y轴位置, 宽度, 高度, key[string])</code> ：<strong>TileSprite</strong> 是具有重复纹理 <strong>Sprite</strong> 。纹理可以独立于 <strong>TileSprite</strong> 本身进行滚动和缩放。纹理将自动环绕，以便可以使用无缝纹理作为源创建游戏背景。</p><ul><li>不要创建一个比实际画布尺寸大的 TileSprite 。如果想创建一个在整个游戏地图上滚动的大型重复背景，那么可以创建一个适合画布大小 TileSprite ，然后使用该 <em>tilePosition</em> 属性在玩家移动时滚动纹理。如果创建一个大小为数千像素的 TileSprite ，那么它将消耗大量内存并导致性能问题。</li></ul><blockquote><p>用 <em>tilePosition</em> 滚动纹理，用 <em>tileScale</em> 调整纹理的比例。不要调整精灵本身的大小来使其大于需要的大小。</p></blockquote><h2 id="播放动画" tabindex="-1"><a class="header-anchor" href="#播放动画" aria-hidden="true">#</a> 播放动画</h2><p>创建动画：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 创建动画</span>
  		<span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;rotate&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 动画的名称</span>
  		<span class="token literal-property property">frames</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">generateFrameNumbers</span><span class="token punctuation">(</span><span class="token string">&#39;coin&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    		<span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">end</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 设置动画要使用的图片 和 动画的总帧数</span>
  		<span class="token literal-property property">frameRate</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token comment">// 设置每秒的帧数</span>
  		<span class="token literal-property property">yoyo</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 动画完成后是否回头重新播放，默认 false</span>
  		<span class="token literal-property property">repeat</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 重复执行</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>播放动画：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>obj<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&#39;rotate&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 播放动画</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="停止动画" tabindex="-1"><a class="header-anchor" href="#停止动画" aria-hidden="true">#</a> 停止动画</h2><p>停止动画：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>obj<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="获取组的长度" tabindex="-1"><a class="header-anchor" href="#获取组的长度" aria-hidden="true">#</a> 获取组的长度</h2><p><code>.getLength()</code> ：获取组的长度</p><h2 id="获取组中的所有成员" tabindex="-1"><a class="header-anchor" href="#获取组中的所有成员" aria-hidden="true">#</a> 获取组中的所有成员</h2><p><code>.getChildren()</code> ：获取组中所有成员</p><h2 id="获取组中第一个成员" tabindex="-1"><a class="header-anchor" href="#获取组中第一个成员" aria-hidden="true">#</a> 获取组中第一个成员</h2><p><code>.getFirst()</code> ：获取组中第一个成员</p><h2 id="从组中移除一个成员" tabindex="-1"><a class="header-anchor" href="#从组中移除一个成员" aria-hidden="true">#</a> 从组中移除一个成员</h2><p><code>.remove()</code> ：从组中移除一个成员</p><h2 id="补间动画-tween" tabindex="-1"><a class="header-anchor" href="#补间动画-tween" aria-hidden="true">#</a> 补间动画 Tween</h2><p><code>this.tweens.add(config)</code> ：创建一个补间动画</p>`,200),Q={href:"https://newdocs.phaser.io/docs/3.55.2/Phaser.Types.Tweens.TweenBuilderConfig",target:"_blank",rel:"noopener noreferrer"},I=s(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// tweens 可配置参数一览</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>tweens<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">targets</span><span class="token operator">:</span> <span class="token punctuation">[</span>sprite1<span class="token punctuation">,</span> sprite2<span class="token punctuation">,</span> sprite3<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 允许单个或多个游戏对象</span>
    <span class="token literal-property property">paused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 初始是否为暂停状态</span>
    <span class="token literal-property property">callbackScope</span><span class="token operator">:</span> tween<span class="token punctuation">,</span>
    
    <span class="token function-variable function">onStart</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 开始时执行回调</span>
    <span class="token literal-property property">onStartScope</span><span class="token operator">:</span> callbackScope<span class="token punctuation">,</span>
    <span class="token literal-property property">onStartParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    
    <span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 第一次播放前的停顿时长</span>
    
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 动画总时长</span>
    <span class="token literal-property property">ease</span><span class="token operator">:</span> <span class="token string">&#39;Linear&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 提供了多达 44 种动画速度曲线</span>
    <span class="token literal-property property">easeParams</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 速度曲线的参数</span>
    
    <span class="token function-variable function">onUpdate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 补间更新时执行回调</span>
    <span class="token literal-property property">onUpdateScope</span><span class="token operator">:</span> callbackScope<span class="token punctuation">,</span>
    <span class="token literal-property property">onUpdateParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token literal-property property">hold</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 反向播放前停顿的时长</span>
    <span class="token literal-property property">yoyo</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否反向播放</span>
    <span class="token literal-property property">flipX</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 动画结束后，元素是否 X 轴翻转</span>
    <span class="token literal-property property">flipY</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 动画结束后，元素是否 Y 轴翻转</span>
    <span class="token function-variable function">onYoyo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 反向播放时执行回调</span>
    <span class="token literal-property property">onYoyoScope</span><span class="token operator">:</span> callbackScope<span class="token punctuation">,</span>
    <span class="token literal-property property">onYoyoParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    
    <span class="token literal-property property">repeat</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//重复播放次数，-1 : infinity</span>
    <span class="token function-variable function">onRepeat</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 重复播放时执行回调</span>
    <span class="token literal-property property">onRepeatScope</span><span class="token operator">:</span> callbackScope<span class="token punctuation">,</span>
    <span class="token literal-property property">onRepeatParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">repeatDelay</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 重复播放之前停顿的时长</span>

    <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 循环次数 -1 : infinity</span>
    <span class="token function-variable function">onLoop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 循环播放时执行回调</span>
    <span class="token literal-property property">onLoopScope</span><span class="token operator">:</span> callbackScope<span class="token punctuation">,</span>
    <span class="token literal-property property">onLoopParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loopDelay</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 停顿多久的时长进入下一次循环</span>
	
    <span class="token literal-property property">completeDelay</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 动画完成前的停顿时间</span>
    <span class="token function-variable function">onComplete</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 动画结束后执行回调</span>
    <span class="token literal-property property">onCompleteScope</span><span class="token operator">:</span> callbackScope<span class="token punctuation">,</span>
    <span class="token literal-property property">onCompleteParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 属性值</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token string">&#39;+=600&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rotation</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token literal-property property">angle</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
    
    <span class="token comment">// 或者</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;+=600&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token literal-property property">ease</span><span class="token operator">:</span> <span class="token string">&#39;Power2&#39;</span> <span class="token punctuation">}</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;500&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token literal-property property">ease</span><span class="token operator">:</span> <span class="token string">&#39;Bounce.easeOut&#39;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 又或者</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
            <span class="token literal-property property">yoyo</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">repeat</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            <span class="token literal-property property">ease</span><span class="token operator">:</span> <span class="token string">&#39;Sine.easeInOut&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">getEnd</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    destX <span class="token operator">-=</span> <span class="token number">30</span>
                    <span class="token keyword">return</span> destX
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function-variable function">getStart</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">30</span>
                <span class="token punctuation">}</span>    
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// ....</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">useFrames</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 使用帧或是毫秒</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ease-的值" tabindex="-1"><a class="header-anchor" href="#ease-的值" aria-hidden="true">#</a> ease 的值</h3>`,2),B={href:"https://blog.csdn.net/sllailcp/article/details/122601215",target:"_blank",rel:"noopener noreferrer"},C=s(`<h2 id="设置两个对象的碰撞" tabindex="-1"><a class="header-anchor" href="#设置两个对象的碰撞" aria-hidden="true">#</a> 设置两个对象的碰撞</h2><p><code>this.physics.add.collider(obj, obj, function(){}, null, this)</code> ：碰撞器</p><blockquote><p>碰撞函数会被触发很多次，如果要在碰撞器的回调函数中执行只需要触发一次的事件，则需要给其上锁。</p></blockquote><h2 id="设置两个对象的重叠" tabindex="-1"><a class="header-anchor" href="#设置两个对象的重叠" aria-hidden="true">#</a> 设置两个对象的重叠</h2><p><code>this.physics.add.overlap(obj, obj, function(){}, null, this)</code> ：重叠器</p><blockquote><p>重叠函数会被触发很多次，如果要在回调函数中执行只需触发一次的事件，则需要给其上锁。</p></blockquote><h2 id="移除-添加-恢复-碰撞器" tabindex="-1"><a class="header-anchor" href="#移除-添加-恢复-碰撞器" aria-hidden="true">#</a> 移除 / 添加(恢复)碰撞器</h2><p><code>this.physics.world.removeCollider(collider)</code> ：移除碰撞器。</p><p><code>this.physics.world.colliders.add(collider)</code> ：添加（恢复）碰撞器。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> collider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">collider</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>world<span class="token punctuation">.</span><span class="token function">removeCollider</span><span class="token punctuation">(</span>collider<span class="token punctuation">)</span> <span class="token comment">// 移除碰撞器</span>
<span class="token operator">...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>world<span class="token punctuation">.</span>colliders<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>collider<span class="token punctuation">)</span> <span class="token comment">// 添加碰撞器</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="对象的某一面-上-下-左-右-触碰到其他东西" tabindex="-1"><a class="header-anchor" href="#对象的某一面-上-下-左-右-触碰到其他东西" aria-hidden="true">#</a> 对象的某一面(上/下/左/右)，触碰到其他东西</h2><p><code>.body.touching.left</code> ：左面触碰。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;player&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>body<span class="token punctuation">.</span>touching<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;touching&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取-设置对象的-x-和-y-轴的位置" tabindex="-1"><a class="header-anchor" href="#获取-设置对象的-x-和-y-轴的位置" aria-hidden="true">#</a> 获取 / 设置对象的 x 和 y 轴的位置</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token comment">// 获取 obj 的 x 轴的位置</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token comment">// 获取 obj 的 y 轴的位置</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">OBJ</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span>x <span class="token comment">// 设置 OBJ 的 x 为 obj 的 x 轴位置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">OBJ</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span>y <span class="token comment">// 设置 OBJ 的 y 为 obj 的 y 轴位置</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置游戏世界边缘碰撞" tabindex="-1"><a class="header-anchor" href="#设置游戏世界边缘碰撞" aria-hidden="true">#</a> 设置游戏世界边缘碰撞</h2><p><code>.setCollideWorldBounds(true)</code> ：开启游戏世界边缘碰撞。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;player&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">setCollideWorldBounds</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置碰撞回弹系数" tabindex="-1"><a class="header-anchor" href="#设置碰撞回弹系数" aria-hidden="true">#</a> 设置碰撞回弹系数</h2><p><code>.setBounds(x, y)</code> ：设置回弹系数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;player&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">setBounds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置物体的可见性" tabindex="-1"><a class="header-anchor" href="#设置物体的可见性" aria-hidden="true">#</a> 设置物体的可见性</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;player&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// false 为不可见</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// true 为可见</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置多指点击" tabindex="-1"><a class="header-anchor" href="#设置多指点击" aria-hidden="true">#</a> 设置多指点击</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">addPointer</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 添加多指点击，这个为二指</span>

<span class="token keyword">const</span> btn1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;btn1&#39;</span><span class="token punctuation">)</span>
btn1<span class="token punctuation">.</span><span class="token function">setInteractive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开启这个对象的点击事件</span>
<span class="token keyword">const</span> btn2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;btn2&#39;</span><span class="token punctuation">)</span>
btn2<span class="token punctuation">.</span><span class="token function">setInteractive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;gameobjectdown&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pointer<span class="token punctuation">,</span> gameobject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// gameobject 为用户点击的这个对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>gameobject<span class="token punctuation">.</span>texture<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&#39;btn1&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token comment">// 这里判断点击的是否为btn1</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>gameobject<span class="token punctuation">.</span>texture<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&#39;btn2&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token comment">// 这里判断点击的是否为btn2</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="解决画面在手机上过于模糊的问题" tabindex="-1"><a class="header-anchor" href="#解决画面在手机上过于模糊的问题" aria-hidden="true">#</a> 解决画面在手机上过于模糊的问题</h2><p>我们可以将作画的画布放大一定倍数，这里建议2~3倍，过大会导致画面掉帧卡顿。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">CANVASSCALE</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">const</span> <span class="token constant">WIDTH</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">*</span> <span class="token constant">CANVASSCALE</span>
<span class="token keyword">const</span> <span class="token constant">HEIGHT</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">*</span> <span class="token constant">CANVASSCALE</span>

<span class="token keyword">const</span> game_config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> Phaser<span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">,</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token constant">WIDTH</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token constant">HEIGHT</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scene</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 场景</span>
  <span class="token literal-property property">parent</span><span class="token operator">:</span> <span class="token string">&#39;game&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 生成的canvas的父级</span>
  <span class="token literal-property property">physics</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;arcade&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token constant">GAME</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phaser<span class="token punctuation">.</span>Game</span><span class="token punctuation">(</span>game_config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后，我们在css文件中，将这个canvas缩小相应倍数。</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">canvas</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token punctuation">(</span>1 / 3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transform-origin</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过判断物体的边缘是否相交判断物体是否重叠" tabindex="-1"><a class="header-anchor" href="#通过判断物体的边缘是否相交判断物体是否重叠" aria-hidden="true">#</a> 通过判断物体的边缘是否相交判断物体是否重叠</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 检查音符与得分区域是否重叠</span>
<span class="token function">CheckOverlap</span><span class="token punctuation">(</span><span class="token parameter">object1<span class="token punctuation">,</span> object2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj1Bounds <span class="token operator">=</span> object1<span class="token punctuation">.</span><span class="token function">getBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取第一个obj边缘</span>
  <span class="token keyword">const</span> obj2Bounds <span class="token operator">=</span> object2<span class="token punctuation">.</span><span class="token function">getBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取第二个obj边缘</span>
  <span class="token comment">// 检测两个边缘是否相交，这里判断的是两个长方形边缘，返回值为 boolean</span>
  <span class="token keyword">return</span> Phaser<span class="token punctuation">.</span>Geom<span class="token punctuation">.</span>Intersects<span class="token punctuation">.</span><span class="token function">RectangleToRectangle</span><span class="token punctuation">(</span>obj1Bounds<span class="token punctuation">,</span> obj2Bounds<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置延迟执行" tabindex="-1"><a class="header-anchor" href="#设置延迟执行" aria-hidden="true">#</a> 设置延迟执行</h2><p>这个延迟执行可以理解为定时器</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">.</span><span class="token function">delayedCall</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token comment">// time 单位 ms</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取物体的某个角的坐标" tabindex="-1"><a class="header-anchor" href="#获取物体的某个角的坐标" aria-hidden="true">#</a> 获取物体的某个角的坐标</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>object <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>object<span class="token punctuation">.</span><span class="token function">getTopLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取左上角坐标</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>object<span class="token punctuation">.</span><span class="token function">getTopRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取右上角坐标</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>object<span class="token punctuation">.</span><span class="token function">getBottomLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取左下角坐标</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>object<span class="token punctuation">.</span><span class="token function">getBottomRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取右下角坐标</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>object<span class="token punctuation">.</span><span class="token function">getTopLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>x <span class="token comment">// 获取左上角的 x 坐标</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,37);function w(E,x){const a=i("ExternalLinkIcon");return c(),l("div",null,[f,n("p",null,[n("a",Q,[p("config 配置"),t(a)])]),I,n("p",null,[n("a",B,[p("缓动参数"),t(a)])]),C])}const j=o(A,[["render",w],["__file","phaser3.html.vue"]]);export{j as default};
