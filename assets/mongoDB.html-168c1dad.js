import{_ as n,W as s,X as a,a0 as t}from"./framework-4f54a744.js";const e={},p=t(`<h1 id="mongodb" tabindex="-1"><a class="header-anchor" href="#mongodb" aria-hidden="true">#</a> mongoDB</h1><h2 id="安装连接数据库的模块" tabindex="-1"><a class="header-anchor" href="#安装连接数据库的模块" aria-hidden="true">#</a> 安装连接数据库的模块</h2><p><code>pip install pymongo</code></p><h2 id="连接数据库" tabindex="-1"><a class="header-anchor" href="#连接数据库" aria-hidden="true">#</a> 连接数据库</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 导入模块</span>
<span class="token keyword">import</span> pymongo

<span class="token comment"># 通过端口连接数据库，这个端口里面可以有很多个库</span>
myclient <span class="token operator">=</span> pymongo<span class="token punctuation">.</span>MongoClient<span class="token punctuation">(</span><span class="token string">&quot;mongodb://localhost:27017/&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 创建或连接指定的数据库</span>
mydb <span class="token operator">=</span> myclient<span class="token punctuation">[</span><span class="token string">&quot;shangjiaosuo&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># 连接这个库里面指定的集合，集合就是存储数据的</span>
sjs <span class="token operator">=</span> mydb<span class="token punctuation">[</span><span class="token string">&quot;sjs_test&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插入数据" tabindex="-1"><a class="header-anchor" href="#插入数据" aria-hidden="true">#</a> 插入数据</h2><h3 id="插入一条数据" tabindex="-1"><a class="header-anchor" href="#插入一条数据" aria-hidden="true">#</a> 插入一条数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 如果没指定_id，则数据库会自动生成id</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token string">&quot;sex&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 插入一个数据, sjs 为一个集合，它会返回这条数据的 _id</span>
x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>insert_one<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="插入多条数据" tabindex="-1"><a class="header-anchor" href="#插入多条数据" aria-hidden="true">#</a> 插入多条数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>mylist <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Taobao&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alexa&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.taobao.com&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;QQ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alexa&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.qq.com&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Facebook&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alexa&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.facebook.com&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;知乎&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alexa&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;103&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.zhihu.com&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Github&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alexa&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;109&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.github.com&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment"># 返回所有数据对应的 _id</span>
x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>insert_many<span class="token punctuation">(</span>mylist<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查询数据" tabindex="-1"><a class="header-anchor" href="#查询数据" aria-hidden="true">#</a> 查询数据</h2><h3 id="查询一条数据" tabindex="-1"><a class="header-anchor" href="#查询一条数据" aria-hidden="true">#</a> 查询一条数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 返回集合中的第一条数据</span>
x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>find_one<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询集合中所有数据" tabindex="-1"><a class="header-anchor" href="#查询集合中所有数据" aria-hidden="true">#</a> 查询集合中所有数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 返回集合中的所有数据</span>
<span class="token builtin">list</span> <span class="token operator">=</span> sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> li <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询指定字段的数据" tabindex="-1"><a class="header-anchor" href="#查询指定字段的数据" aria-hidden="true">#</a> 查询指定字段的数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 将要返回的字段设置为1，如这里要返回 name 和 alexa 字段</span>
<span class="token builtin">list</span> <span class="token operator">=</span> sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;alexa&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="根据指定条件查询" tabindex="-1"><a class="header-anchor" href="#根据指定条件查询" aria-hidden="true">#</a> 根据指定条件查询</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">}</span>
<span class="token comment"># 返回所有 name = zhangsan 的数据</span>
<span class="token builtin">list</span> <span class="token operator">=</span> sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span>my_query<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查询条件可以是修饰符" tabindex="-1"><a class="header-anchor" href="#查询条件可以是修饰符" aria-hidden="true">#</a> 查询条件可以是修饰符</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;$gt&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;H&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token comment"># 这表示读取所有的 name 的首字母的 ASCII 值大于 H 的数据。$gt 表示大于符</span>
sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span>my_query<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查询符号可以是正则" tabindex="-1"><a class="header-anchor" href="#查询符号可以是正则" aria-hidden="true">#</a> 查询符号可以是正则</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;$regex&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^R&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token comment"># 这表示查询所有的 name 的首字符为 R 的数据。$regex 表示使用正则</span>
sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span>my_query<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="返回指定条数数据" tabindex="-1"><a class="header-anchor" href="#返回指定条数数据" aria-hidden="true">#</a> 返回指定条数数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 表示查询集合中的3条记录，顺序返回。limit 只接受一个数字参数</span>
sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改数据" tabindex="-1"><a class="header-anchor" href="#修改数据" aria-hidden="true">#</a> 修改数据</h2><h3 id="修改一条数据" tabindex="-1"><a class="header-anchor" href="#修改一条数据" aria-hidden="true">#</a> 修改一条数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 指定修改对应数据的条件</span>
my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token punctuation">}</span>
<span class="token comment"># 指定要修改的数据</span>
new_value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;$set&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>update_one<span class="token punctuation">(</span>my_query<span class="token punctuation">,</span> new_value<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改所有匹配到的数据" tabindex="-1"><a class="header-anchor" href="#修改所有匹配到的数据" aria-hidden="true">#</a> 修改所有匹配到的数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 指定修改对应数据的条件</span>
my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token punctuation">}</span>
<span class="token comment"># 指定要修改的数据</span>
new_value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;$set&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>update_many<span class="token punctuation">(</span>my_query<span class="token punctuation">,</span> new_value<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="删除数据" tabindex="-1"><a class="header-anchor" href="#删除数据" aria-hidden="true">#</a> 删除数据</h2><h3 id="删除一条数据" tabindex="-1"><a class="header-anchor" href="#删除一条数据" aria-hidden="true">#</a> 删除一条数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 指定删除对应数据的条件</span>
my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token punctuation">}</span>

x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>delete_one<span class="token punctuation">(</span>my_query<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除多条数据" tabindex="-1"><a class="header-anchor" href="#删除多条数据" aria-hidden="true">#</a> 删除多条数据</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 指定删除对应数据的条件</span>
my_query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token punctuation">}</span>
<span class="token comment"># 如果将查询条件置为空，则表示删除这个集合中的所有数据</span>
<span class="token comment"># my_query = {}</span>
x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>delete_many<span class="token punctuation">(</span>my_query<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除集合" tabindex="-1"><a class="header-anchor" href="#删除集合" aria-hidden="true">#</a> 删除集合</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># sjs 为一个集合，删除成功返回 True，失败返回 False</span>
sjs<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> 排序</h2><p><code>sotr()</code>方法可以指定数据升序或降序，它接收两个参数：</p><ol><li>第一个参数表示排序依据的字段</li><li>第二个参数表示升序还是降序，默认升序</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 表示将查询到的数据根据 id 排序，升序</span>
x <span class="token operator">=</span> sjs<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 这个表示降序</span>
<span class="token comment"># x = sjs.find().sort(&quot;id&quot;, -1)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,41),o=[p];function i(c,u){return s(),a("div",null,o)}const d=n(e,[["render",i],["__file","mongoDB.html.vue"]]);export{d as default};
