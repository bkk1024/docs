<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/docs/icon.png"><title>react18 | 二师弟的学习笔记</title><meta name="description" content="二师弟的学习笔记">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/docs/assets/style-6d00d8ff.css" as="style"><link rel="stylesheet" href="/docs/assets/style-6d00d8ff.css">
    <link rel="modulepreload" href="/docs/assets/app-0ea0852b.js"><link rel="modulepreload" href="/docs/assets/framework-4f54a744.js"><link rel="modulepreload" href="/docs/assets/react18.html-973190cf.js"><link rel="modulepreload" href="/docs/assets/react18.html-f0c244aa.js"><link rel="prefetch" href="/docs/assets/index.html-873919fc.js" as="script"><link rel="prefetch" href="/docs/assets/vite3.html-d13a01c0.js" as="script"><link rel="prefetch" href="/docs/assets/webpack5.html-c5d53893.js" as="script"><link rel="prefetch" href="/docs/assets/phaser3.html-4625842b.js" as="script"><link rel="prefetch" href="/docs/assets/css.html-d0f02439.js" as="script"><link rel="prefetch" href="/docs/assets/echarts.html-89479e1e.js" as="script"><link rel="prefetch" href="/docs/assets/elementui.html-5297a3c5.js" as="script"><link rel="prefetch" href="/docs/assets/html.html-5b76f10d.js" as="script"><link rel="prefetch" href="/docs/assets/js.html-28c9c2f0.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-a89623a5.js" as="script"><link rel="prefetch" href="/docs/assets/uni-app.html-033fa626.js" as="script"><link rel="prefetch" href="/docs/assets/vue2.html-40efae7e.js" as="script"><link rel="prefetch" href="/docs/assets/vue3.html-465e0201.js" as="script"><link rel="prefetch" href="/docs/assets/vuex.html-1398b4b1.js" as="script"><link rel="prefetch" href="/docs/assets/webpack.html-db7c9f84.js" as="script"><link rel="prefetch" href="/docs/assets/WebSocket.html-cd585a4d.js" as="script"><link rel="prefetch" href="/docs/assets/js方法.html-8dbf21ec.js" as="script"><link rel="prefetch" href="/docs/assets/js知识要点.html-f2011264.js" as="script"><link rel="prefetch" href="/docs/assets/事件循环.html-754a7f88.js" as="script"><link rel="prefetch" href="/docs/assets/属性描述符.html-6e334454.js" as="script"><link rel="prefetch" href="/docs/assets/文件上传.html-67af08e4.js" as="script"><link rel="prefetch" href="/docs/assets/浏览器渲染原理.html-d31fa9b5.js" as="script"><link rel="prefetch" href="/docs/assets/轮询.html-7068da83.js" as="script"><link rel="prefetch" href="/docs/assets/leetcode算法.html-fa89f797.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs8.html-b8bc19ac.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs博客接口案例.html-b53faf37.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs.html-e5252953.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs和express配合前端history模式.html-a773c754.js" as="script"><link rel="prefetch" href="/docs/assets/nvm.html-b8822afa.js" as="script"><link rel="prefetch" href="/docs/assets/pm2.html-17ac66b3.js" as="script"><link rel="prefetch" href="/docs/assets/项目笔记.html-82ac6c2d.js" as="script"><link rel="prefetch" href="/docs/assets/FastAPI.html-2767ac68.js" as="script"><link rel="prefetch" href="/docs/assets/excel.html-c6d7c8e8.js" as="script"><link rel="prefetch" href="/docs/assets/mongoDB.html-00172f1d.js" as="script"><link rel="prefetch" href="/docs/assets/selenium.html-e72897fa.js" as="script"><link rel="prefetch" href="/docs/assets/并发编程.html-15ed4b91.js" as="script"><link rel="prefetch" href="/docs/assets/日志模块.html-c9d55a69.js" as="script"><link rel="prefetch" href="/docs/assets/craco.html-4dcc1aa9.js" as="script"><link rel="prefetch" href="/docs/assets/react使用lottie.html-79e48e92.js" as="script"><link rel="prefetch" href="/docs/assets/react使用svg.html-840f1048.js" as="script"><link rel="prefetch" href="/docs/assets/DOM和BOM内置对象.html-fa919f4f.js" as="script"><link rel="prefetch" href="/docs/assets/Decorator装饰器.html-0c6124dc.js" as="script"><link rel="prefetch" href="/docs/assets/Mixins混入.html-afa10a7b.js" as="script"><link rel="prefetch" href="/docs/assets/Object和object.html-82bf395b.js" as="script"><link rel="prefetch" href="/docs/assets/Partial、Pick、Record、Readonly.html-b36d334c.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy和Reflect.html-e75ba7f9.js" as="script"><link rel="prefetch" href="/docs/assets/any和void和never.html-812dee82.js" as="script"><link rel="prefetch" href="/docs/assets/infer.html-3e1c5b47.js" as="script"><link rel="prefetch" href="/docs/assets/interface接口.html-cafcbbaa.js" as="script"><link rel="prefetch" href="/docs/assets/namespace命名空间.html-2a194e1f.js" as="script"><link rel="prefetch" href="/docs/assets/reflect-metadata元数据.html-ca5dbf44.js" as="script"><link rel="prefetch" href="/docs/assets/tsconfig.json配置.html-c7ce0fb7.js" as="script"><link rel="prefetch" href="/docs/assets/ts使用Promise.html-82eaac6d.js" as="script"><link rel="prefetch" href="/docs/assets/ts基本内容.html-2c0fec89.js" as="script"><link rel="prefetch" href="/docs/assets/ts编写发布订阅模式.html-962b2645.js" as="script"><link rel="prefetch" href="/docs/assets/声明文件d.ts.html-0ab897e3.js" as="script"><link rel="prefetch" href="/docs/assets/泛型.html-c779c98d.js" as="script"><link rel="prefetch" href="/docs/assets/类型兼容.html-88f7352c.js" as="script"><link rel="prefetch" href="/docs/assets/axios.html-a980e971.js" as="script"><link rel="prefetch" href="/docs/assets/pinia.html-11694eb7.js" as="script"><link rel="prefetch" href="/docs/assets/vue-router.html-15154da2.js" as="script"><link rel="prefetch" href="/docs/assets/vue3-vite-electron.html-b737965b.js" as="script"><link rel="prefetch" href="/docs/assets/vue3一些自定义指令.html-f1303b63.js" as="script"><link rel="prefetch" href="/docs/assets/vue3其他笔记.html-a901a8ef.js" as="script"><link rel="prefetch" href="/docs/assets/vue3学习笔记.html-6069da80.js" as="script"><link rel="prefetch" href="/docs/assets/vuepress.html-064a3f4c.js" as="script"><link rel="prefetch" href="/docs/assets/vue常见优化手段.html-5f03036c.js" as="script"><link rel="prefetch" href="/docs/assets/前言.html-c1e2974c.js" as="script"><link rel="prefetch" href="/docs/assets/第一篇框架设计概览.html-e4e87416.js" as="script"><link rel="prefetch" href="/docs/assets/第二篇响应系统.html-faa33985.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-007e3d49.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-482a2c47.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-5ec05c94.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-4ba11b22.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-d6e43004.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-5d079a57.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-2225520e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-b1f72b95.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-9084f6b7.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-c11822d4.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-9db0214d.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-ccc17d87.js" as="script"><link rel="prefetch" href="/docs/assets/vite3.html-b95b7af5.js" as="script"><link rel="prefetch" href="/docs/assets/webpack5.html-f837636b.js" as="script"><link rel="prefetch" href="/docs/assets/phaser3.html-ed12c05d.js" as="script"><link rel="prefetch" href="/docs/assets/css.html-32556baf.js" as="script"><link rel="prefetch" href="/docs/assets/echarts.html-88d862ff.js" as="script"><link rel="prefetch" href="/docs/assets/elementui.html-15eb9d4d.js" as="script"><link rel="prefetch" href="/docs/assets/html.html-2b3cb614.js" as="script"><link rel="prefetch" href="/docs/assets/js.html-29a95c5e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-2d6fc1ec.js" as="script"><link rel="prefetch" href="/docs/assets/uni-app.html-61008000.js" as="script"><link rel="prefetch" href="/docs/assets/vue2.html-a012d90f.js" as="script"><link rel="prefetch" href="/docs/assets/vue3.html-f8895c8e.js" as="script"><link rel="prefetch" href="/docs/assets/vuex.html-57a43e3d.js" as="script"><link rel="prefetch" href="/docs/assets/webpack.html-c10a1903.js" as="script"><link rel="prefetch" href="/docs/assets/WebSocket.html-ee5ee0b6.js" as="script"><link rel="prefetch" href="/docs/assets/js方法.html-826b1713.js" as="script"><link rel="prefetch" href="/docs/assets/js知识要点.html-c3b21c72.js" as="script"><link rel="prefetch" href="/docs/assets/事件循环.html-fd1822db.js" as="script"><link rel="prefetch" href="/docs/assets/属性描述符.html-bde26b2a.js" as="script"><link rel="prefetch" href="/docs/assets/文件上传.html-14d341e7.js" as="script"><link rel="prefetch" href="/docs/assets/浏览器渲染原理.html-1edfadbf.js" as="script"><link rel="prefetch" href="/docs/assets/轮询.html-e55a71f2.js" as="script"><link rel="prefetch" href="/docs/assets/leetcode算法.html-d0bf9df8.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs8.html-69be4e22.js" as="script"><link rel="prefetch" href="/docs/assets/nestjs博客接口案例.html-2bb8adab.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs.html-a9696c41.js" as="script"><link rel="prefetch" href="/docs/assets/nodejs和express配合前端history模式.html-c9a26dac.js" as="script"><link rel="prefetch" href="/docs/assets/nvm.html-f3381fc6.js" as="script"><link rel="prefetch" href="/docs/assets/pm2.html-e8b31ba0.js" as="script"><link rel="prefetch" href="/docs/assets/项目笔记.html-4f4c4986.js" as="script"><link rel="prefetch" href="/docs/assets/FastAPI.html-e843e479.js" as="script"><link rel="prefetch" href="/docs/assets/excel.html-4592f699.js" as="script"><link rel="prefetch" href="/docs/assets/mongoDB.html-168c1dad.js" as="script"><link rel="prefetch" href="/docs/assets/selenium.html-47a64703.js" as="script"><link rel="prefetch" href="/docs/assets/并发编程.html-b19fb1fa.js" as="script"><link rel="prefetch" href="/docs/assets/日志模块.html-5cf3b3c1.js" as="script"><link rel="prefetch" href="/docs/assets/craco.html-de63a6cc.js" as="script"><link rel="prefetch" href="/docs/assets/react使用lottie.html-f42ee1db.js" as="script"><link rel="prefetch" href="/docs/assets/react使用svg.html-a7bb6f7d.js" as="script"><link rel="prefetch" href="/docs/assets/DOM和BOM内置对象.html-cb757473.js" as="script"><link rel="prefetch" href="/docs/assets/Decorator装饰器.html-054dcadb.js" as="script"><link rel="prefetch" href="/docs/assets/Mixins混入.html-8533960b.js" as="script"><link rel="prefetch" href="/docs/assets/Object和object.html-9830d052.js" as="script"><link rel="prefetch" href="/docs/assets/Partial、Pick、Record、Readonly.html-e52803be.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy和Reflect.html-3b2aa239.js" as="script"><link rel="prefetch" href="/docs/assets/any和void和never.html-5d23b979.js" as="script"><link rel="prefetch" href="/docs/assets/infer.html-12c3e7cf.js" as="script"><link rel="prefetch" href="/docs/assets/interface接口.html-458d3c87.js" as="script"><link rel="prefetch" href="/docs/assets/namespace命名空间.html-ba48fb9e.js" as="script"><link rel="prefetch" href="/docs/assets/reflect-metadata元数据.html-b3f40cbb.js" as="script"><link rel="prefetch" href="/docs/assets/tsconfig.json配置.html-0d4ad185.js" as="script"><link rel="prefetch" href="/docs/assets/ts使用Promise.html-310b4aec.js" as="script"><link rel="prefetch" href="/docs/assets/ts基本内容.html-4b5230fb.js" as="script"><link rel="prefetch" href="/docs/assets/ts编写发布订阅模式.html-e5d4fdd6.js" as="script"><link rel="prefetch" href="/docs/assets/声明文件d.ts.html-bc022730.js" as="script"><link rel="prefetch" href="/docs/assets/泛型.html-038c90c2.js" as="script"><link rel="prefetch" href="/docs/assets/类型兼容.html-f8928873.js" as="script"><link rel="prefetch" href="/docs/assets/axios.html-dd2f39ad.js" as="script"><link rel="prefetch" href="/docs/assets/pinia.html-9db217a3.js" as="script"><link rel="prefetch" href="/docs/assets/vue-router.html-b4b7800c.js" as="script"><link rel="prefetch" href="/docs/assets/vue3-vite-electron.html-16659694.js" as="script"><link rel="prefetch" href="/docs/assets/vue3一些自定义指令.html-8ae6543c.js" as="script"><link rel="prefetch" href="/docs/assets/vue3其他笔记.html-a35bf2f8.js" as="script"><link rel="prefetch" href="/docs/assets/vue3学习笔记.html-e385610c.js" as="script"><link rel="prefetch" href="/docs/assets/vuepress.html-020119f9.js" as="script"><link rel="prefetch" href="/docs/assets/vue常见优化手段.html-06f0953d.js" as="script"><link rel="prefetch" href="/docs/assets/前言.html-7983b7b7.js" as="script"><link rel="prefetch" href="/docs/assets/第一篇框架设计概览.html-59515c3e.js" as="script"><link rel="prefetch" href="/docs/assets/第二篇响应系统.html-0241c283.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-e3821f77.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-aa8ddcf0.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-a554b704.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-02f7b1cd.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-7d3e4fca.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-2a9f6d0f.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-1e0216f7.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-c2818869.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-58785519.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-37eb7747.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-af439866.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-ef04918a.js" as="script"><link rel="prefetch" href="/docs/assets/photoswipe.esm-6e6cbe40.js" as="script"><link rel="prefetch" href="/docs/assets/SearchResult-fd9b7c3b.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/docs/" class="brand"><img class="logo" src="/docs/icon.png" alt="二师弟的学习笔记"><!----><span class="site-name hide-in-pad">二师弟的学习笔记</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/docs/" class="nav-link" aria-label="首页"><!---->首页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="语言"><span class="title"><!---->语言</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaScript</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/js/js%E6%96%B9%E6%B3%95.html" class="nav-link" aria-label="js语言用法"><!---->js语言用法<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>TypeScript</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/ts/ts%E5%9F%BA%E6%9C%AC%E5%86%85%E5%AE%B9.html" class="nav-link" aria-label="ts语言用法"><!---->ts语言用法<!----></a></li><li class="dropdown-subitem"><a href="/docs/ts/tsconfig.json%E9%85%8D%E7%BD%AE.html" class="nav-link" aria-label="ts相关文件"><!---->ts相关文件<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>python</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/python/selenium.html" class="nav-link" aria-label="python爬虫"><!---->python爬虫<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="打包工具"><span class="title"><!---->打包工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/docs/build-tools/vite3.html" class="nav-link" aria-label="vite3"><!---->vite3<!----></a></li><li class="dropdown-item"><a href="/docs/build-tools/webpack5.html" class="nav-link" aria-label="webpack5"><!---->webpack5<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Node"><span class="title"><!---->Node</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>NodeJS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/node/nvm.html" class="nav-link" aria-label="nvm"><!---->nvm<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/nodejs.html" class="nav-link" aria-label="nodejs"><!---->nodejs<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/pm2.html" class="nav-link" aria-label="pm2"><!---->pm2<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/nodejs%E5%92%8Cexpress%E9%85%8D%E5%90%88%E5%89%8D%E7%AB%AFhistory%E6%A8%A1%E5%BC%8F.html" class="nav-link" aria-label="nodejs+express+history"><!---->nodejs+express+history<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>NestJS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/node/nestjs8.html" class="nav-link" aria-label="nestjs"><!---->nestjs<!----></a></li><li class="dropdown-subitem"><a href="/docs/node/nestjs%E5%8D%9A%E5%AE%A2%E6%8E%A5%E5%8F%A3%E6%A1%88%E4%BE%8B.html" class="nav-link" aria-label="nestjs案例"><!---->nestjs案例<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Vue"><span class="title"><!---->Vue</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Vue3</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" class="nav-link" aria-label="vue3学习笔记"><!---->vue3学习笔记<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue3%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0.html" class="nav-link" aria-label="vue3其他笔记"><!---->vue3其他笔记<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E6%89%8B%E6%AE%B5.html" class="nav-link" aria-label="优化"><!---->优化<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>VueRouter</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/vue-router.html" class="nav-link" aria-label="vue-router"><!---->vue-router<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>状态管理</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/pinia.html" class="nav-link" aria-label="pinia"><!---->pinia<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>书籍阅读</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/Vue.js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/%E5%89%8D%E8%A8%80.html" class="nav-link" aria-label="Vue.js设计与实现"><!---->Vue.js设计与实现<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/vue3/axios.html" class="nav-link" aria-label="axios"><!---->axios<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue3-vite-electron.html" class="nav-link" aria-label="electron桌面应用"><!---->electron桌面应用<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vuepress.html" class="nav-link" aria-label="VuePress"><!---->VuePress<!----></a></li><li class="dropdown-subitem"><a href="/docs/vue3/vue3%E4%B8%80%E4%BA%9B%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4.html" class="nav-link" aria-label="vue3一些自定义指令"><!---->vue3一些自定义指令<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="React"><span class="title"><!---->React</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>React18</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-current="page" href="/docs/react/react18.html" class="router-link-active router-link-exact-active nav-link active" aria-label="react18学习笔记"><!---->react18学习笔记<!----></a></li><li class="dropdown-subitem"><a href="/docs/react/react%E4%BD%BF%E7%94%A8svg.html" class="nav-link" aria-label="react使用svg"><!---->react使用svg<!----></a></li><li class="dropdown-subitem"><a href="/docs/react/react%E4%BD%BF%E7%94%A8lottie.html" class="nav-link" aria-label="react使用lottie"><!---->react使用lottie<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/react/craco.html" class="nav-link" aria-label="craco"><!---->craco<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/docs/leetcode/leetcode%E7%AE%97%E6%B3%95.html" class="nav-link" aria-label="LeetCode"><!---->LeetCode<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/games/phaser3.html" class="nav-link" aria-label="游戏"><!---->游戏<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/interview/" class="nav-link" aria-label="面试"><!---->面试<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/bkk1024/docs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">搜索</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">React</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/docs/react/react18.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="react18"><!---->react18<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#前言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="前言"><!---->前言<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#react-中三个常用的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="react 中三个常用的 api"><!---->react 中三个常用的 api<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#jsx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="JSX"><!---->JSX<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#渲染列表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="渲染列表"><!---->渲染列表<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#手动创建-react-项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="手动创建 react 项目"><!---->手动创建 react 项目<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#自动创建-react-项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自动创建 react 项目"><!---->自动创建 react 项目<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#react-组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="react 组件"><!---->react 组件<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#函数式组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="函数式组件"><!---->函数式组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#类组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="类组件"><!---->类组件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#事件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="事件"><!---->事件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#props-父组件给子组件传值" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Props 父组件给子组件传值"><!---->Props 父组件给子组件传值<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#函数组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="函数组件"><!---->函数组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#类组件-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="类组件"><!---->类组件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#state-响应式数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="state：响应式数据"><!---->state：响应式数据<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#函数组件中" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="函数组件中"><!---->函数组件中<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#类组件中" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="类组件中"><!---->类组件中<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#双向绑定" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="双向绑定"><!---->双向绑定<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#ref-获取-dom-对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ref：获取 DOM 对象"><!---->Ref：获取 DOM 对象<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#函数组件-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="函数组件"><!---->函数组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#类组件-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="类组件"><!---->类组件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#标签插入内容-可以理解为-vue-插槽" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="标签插入内容：可以理解为 vue 插槽"><!---->标签插入内容：可以理解为 vue 插槽<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#提取公共数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="提取公共数据"><!---->提取公共数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#子组件给父组件传值" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="子组件给父组件传值"><!---->子组件给父组件传值<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#portal-传送组件-可以理解为-vue3-的-teleport" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="portal：传送组件，可以理解为 vue3 的 teleport"><!---->portal：传送组件，可以理解为 vue3 的 teleport<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#css-module-可以理解为-vue-中-style-scoped" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CSS_Module：可以理解为 vue 中 style:scoped"><!---->CSS_Module：可以理解为 vue 中 style:scoped<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#fragment-理解为-vue-中的-template-或者微信小程序中的-block" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Fragment：理解为 vue 中的 template，或者微信小程序中的 block"><!---->Fragment：理解为 vue 中的 template，或者微信小程序中的 block<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#移动端适配" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="移动端适配"><!---->移动端适配<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#使用-fontawesome-字体图标库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 FontAwesome 字体图标库"><!---->使用 FontAwesome 字体图标库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#context-解决-props-层层传递数据和方法的问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Context：解决 props 层层传递数据和方法的问题"><!---->Context：解决 props 层层传递数据和方法的问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#effect-useeffect-专门执行副作用代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Effect：useEffect()专门执行副作用代码"><!---->Effect：useEffect()专门执行副作用代码<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#effect-的使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Effect 的使用"><!---->Effect 的使用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#清除-effect" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="清除 Effect"><!---->清除 Effect<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#限制-effect" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="限制 Effect"><!---->限制 Effect<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#uselayouteffect-和-useinsertioneffect" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useLayoutEffect 和 useInsertionEffect"><!---->useLayoutEffect 和 useInsertionEffect<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#reducer-usereducer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Reducer：useReducer()"><!---->Reducer：useReducer()<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#reducer-的使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Reducer 的使用"><!---->Reducer 的使用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#react-memo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="React.memo"><!---->React.memo<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#usecallback" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useCallback()"><!---->useCallback()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#usememo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useMemo()"><!---->useMemo()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#strapi" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Strapi"><!---->Strapi<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#useeffect-中使用-async-await" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useEffect 中使用 async/await"><!---->useEffect 中使用 async/await<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#自定义钩子" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义钩子"><!---->自定义钩子<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#redux-状态容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Redux：状态容器"><!---->Redux：状态容器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#rtk" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RTK"><!---->RTK<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#rtk-query" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RTK Query"><!---->RTK Query<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#react-query" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="react query"><!---->react query<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#router" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Router"><!---->Router<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#安装-router" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 router"><!---->安装 router<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#使用-router" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 router"><!---->使用 router<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#路由嵌套" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="路由嵌套"><!---->路由嵌套<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#路由参数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="路由参数"><!---->路由参数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#路由跳转" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="路由跳转"><!---->路由跳转<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#版本5其他组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="版本5其他组件"><!---->版本5其他组件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/react/react18.html#版本6其他组件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="版本6其他组件"><!---->版本6其他组件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/docs/react/react%E4%BD%BF%E7%94%A8svg.html" class="nav-link sidebar-link sidebar-page" aria-label="react 使用 svg"><!---->react 使用 svg<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/react/react%E4%BD%BF%E7%94%A8lottie.html" class="nav-link sidebar-link sidebar-page" aria-label="react 使用 lottie"><!---->react 使用 lottie<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">其他</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->react18</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-06-02T10:47:59.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 43 分钟</span><meta property="timeRequired" content="PT43M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#前言" class="router-link-active router-link-exact-active toc-link level2">前言</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#react-中三个常用的-api" class="router-link-active router-link-exact-active toc-link level2">react 中三个常用的 api</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#jsx" class="router-link-active router-link-exact-active toc-link level2">JSX</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#渲染列表" class="router-link-active router-link-exact-active toc-link level2">渲染列表</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#手动创建-react-项目" class="router-link-active router-link-exact-active toc-link level2">手动创建 react 项目</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#自动创建-react-项目" class="router-link-active router-link-exact-active toc-link level2">自动创建 react 项目</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#react-组件" class="router-link-active router-link-exact-active toc-link level2">react 组件</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#函数式组件" class="router-link-active router-link-exact-active toc-link level3">函数式组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#类组件" class="router-link-active router-link-exact-active toc-link level3">类组件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#事件" class="router-link-active router-link-exact-active toc-link level2">事件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#props-父组件给子组件传值" class="router-link-active router-link-exact-active toc-link level2">Props 父组件给子组件传值</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#函数组件" class="router-link-active router-link-exact-active toc-link level3">函数组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#类组件-1" class="router-link-active router-link-exact-active toc-link level3">类组件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#state-响应式数据" class="router-link-active router-link-exact-active toc-link level2">state：响应式数据</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#函数组件中" class="router-link-active router-link-exact-active toc-link level3">函数组件中</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#类组件中" class="router-link-active router-link-exact-active toc-link level3">类组件中</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#双向绑定" class="router-link-active router-link-exact-active toc-link level3">双向绑定</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#ref-获取-dom-对象" class="router-link-active router-link-exact-active toc-link level2">Ref：获取 DOM 对象</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#函数组件-1" class="router-link-active router-link-exact-active toc-link level3">函数组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#类组件-2" class="router-link-active router-link-exact-active toc-link level3">类组件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#标签插入内容-可以理解为-vue-插槽" class="router-link-active router-link-exact-active toc-link level2">标签插入内容：可以理解为 vue 插槽</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#提取公共数据" class="router-link-active router-link-exact-active toc-link level2">提取公共数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#子组件给父组件传值" class="router-link-active router-link-exact-active toc-link level2">子组件给父组件传值</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#portal-传送组件-可以理解为-vue3-的-teleport" class="router-link-active router-link-exact-active toc-link level2">portal：传送组件，可以理解为 vue3 的 teleport</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#css-module-可以理解为-vue-中-style-scoped" class="router-link-active router-link-exact-active toc-link level2">CSS_Module：可以理解为 vue 中 style:scoped</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#fragment-理解为-vue-中的-template-或者微信小程序中的-block" class="router-link-active router-link-exact-active toc-link level2">Fragment：理解为 vue 中的 template，或者微信小程序中的 block</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#移动端适配" class="router-link-active router-link-exact-active toc-link level2">移动端适配</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#使用-fontawesome-字体图标库" class="router-link-active router-link-exact-active toc-link level2">使用 FontAwesome 字体图标库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#context-解决-props-层层传递数据和方法的问题" class="router-link-active router-link-exact-active toc-link level2">Context：解决 props 层层传递数据和方法的问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#effect-useeffect-专门执行副作用代码" class="router-link-active router-link-exact-active toc-link level2">Effect：useEffect()专门执行副作用代码</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#effect-的使用" class="router-link-active router-link-exact-active toc-link level3">Effect 的使用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#清除-effect" class="router-link-active router-link-exact-active toc-link level3">清除 Effect</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#限制-effect" class="router-link-active router-link-exact-active toc-link level3">限制 Effect</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#uselayouteffect-和-useinsertioneffect" class="router-link-active router-link-exact-active toc-link level2">useLayoutEffect 和 useInsertionEffect</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#reducer-usereducer" class="router-link-active router-link-exact-active toc-link level2">Reducer：useReducer()</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#reducer-的使用" class="router-link-active router-link-exact-active toc-link level3">Reducer 的使用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#react-memo" class="router-link-active router-link-exact-active toc-link level2">React.memo</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#usecallback" class="router-link-active router-link-exact-active toc-link level2">useCallback()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#usememo" class="router-link-active router-link-exact-active toc-link level2">useMemo()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#strapi" class="router-link-active router-link-exact-active toc-link level2">Strapi</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#useeffect-中使用-async-await" class="router-link-active router-link-exact-active toc-link level2">useEffect 中使用 async/await</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#自定义钩子" class="router-link-active router-link-exact-active toc-link level2">自定义钩子</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#redux-状态容器" class="router-link-active router-link-exact-active toc-link level2">Redux：状态容器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#rtk" class="router-link-active router-link-exact-active toc-link level3">RTK</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#rtk-query" class="router-link-active router-link-exact-active toc-link level2">RTK Query</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#react-query" class="router-link-active router-link-exact-active toc-link level2">react query</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#router" class="router-link-active router-link-exact-active toc-link level2">Router</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#安装-router" class="router-link-active router-link-exact-active toc-link level3">安装 router</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#使用-router" class="router-link-active router-link-exact-active toc-link level3">使用 router</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#路由嵌套" class="router-link-active router-link-exact-active toc-link level3">路由嵌套</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#路由参数" class="router-link-active router-link-exact-active toc-link level3">路由参数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#路由跳转" class="router-link-active router-link-exact-active toc-link level3">路由跳转</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#版本5其他组件" class="router-link-active router-link-exact-active toc-link level3">版本5其他组件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/react/react18.html#版本6其他组件" class="router-link-active router-link-exact-active toc-link level3">版本6其他组件</a></li><!----><!--]--></ul><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="react18" tabindex="-1"><a class="header-anchor" href="#react18" aria-hidden="true">#</a> react18</h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>这个学习笔记是学习<a href="https://www.bilibili.com/video/BV1bS4y1b7NV?p=13&amp;vd_source=16ba8f2131220773e361fb00f3cb12fb" target="_blank" rel="noopener noreferrer">b 站 | 李立超老师 | React18 教程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的记录。</p><h2 id="react-中三个常用的-api" tabindex="-1"><a class="header-anchor" href="#react-中三个常用的-api" aria-hidden="true">#</a> react 中三个常用的 api</h2><ol><li><p><code>React.createElement()</code>：它用来创建一个 react 元素，这个 react 元素并不是真正的 DOM 元素。它有三个参数：</p><ol><li>元素名/组件名：html 标签必须小写</li><li>元素的属性：如 id、class 等 <ul><li>在设置事件时，属性名需要修改为驼峰命名法</li><li>class 属性需要使用 className 来设置</li></ul></li><li>子元素/文本内容：可以有多个，多个使用逗号隔开</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> button <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;btn&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;btn1&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;点击&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> div <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> button<span class="token punctuation">,</span> <span class="token string">&quot;点击前面的按钮&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>ReactDOM.createRoot()</code> ：它用来创建 react 根元素，需要一个 DOM 元素作为参数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><code>.render()</code>：它用来将 react 元素渲染到根元素中。</p><ul><li>一般一个页面中只有一个根元素</li><li>它会清除根元素中的所有内容，然后用 react 元素替代</li><li>当重复调用这个方法时，react 会将两次的渲染结果进行比较，然后只修改发生变化的部分（diff 算法/DOM 差分算法）</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> button <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;btn&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;btn1&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;点击&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> button<span class="token punctuation">,</span> <span class="token string">&quot;点击前面的按钮&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><code>render</code>的旧版本用法如下：<code>ReactDOM.render(div, document.querySelector(&quot;#root&quot;))</code>。</p><h2 id="jsx" tabindex="-1"><a class="header-anchor" href="#jsx" aria-hidden="true">#</a> JSX</h2><p>在上一节，我们了解到了一个方法<code>React.createElement()</code>，它的作用如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 当我们写下这句话时，其实我们想要它实现的效果为：&lt;button&gt;我是按钮&lt;/button&gt;</span>
<span class="token keyword">const</span> button <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;我是按钮&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>因此，react 在这里拓展了 jsx 语法。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> button <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在 react 中可以通过 jsx 来创建 react 元素，但是 jsx 需要被翻译为 js 代码才能被 react 执行，因此我们需要引入 babel。jsx 是 js 的拓展，或者说它是<code>Reqact.createElement()</code>的语法糖。</p><p>jsx 的注意事项：</p><ol><li><p>jsx 不是字符串，不要加引号，可以使用()</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>jsx 中的 html 标签应该小写，但是 react 组件应该以大写开头</p></li><li><p>jsx 中有且只有一个根组件</p></li><li><p>jsx 的标签必须正确结束（自结束标签必须写&quot;/&quot;）</p></li><li><p>在 jsx 中，可以使用 {} 嵌入表达式</p><ul><li>如果表达式是<code>空值、boolean、undefined</code>，则不会显示</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在 jsx 中，属性可以直接在标签中设置</p><ul><li>class 需要使用 className 设置</li><li>style 中必须使用对象设置，多单词组合需要使用驼峰形式，如<code>background-color =&gt; backgroundColor</code></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
              <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydiv<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          			<span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;gray&quot;</span>
        		<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="渲染列表" tabindex="-1"><a class="header-anchor" href="#渲染列表" aria-hidden="true">#</a> 渲染列表</h2><p>jsx 会将数组中的内容自动提取出来进行填充，如：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>arr<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">// 这里的结果为 &lt;div&gt;zhangsanlisiwangwu&lt;/div&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因此，我们可以利用这个特点，依据原有的数组，生成一个新的数组，这个新的数组中的内容为 react 元素：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> lis <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token comment">// 这个数组为 [&quot;&lt;li&gt;zhangsan&lt;/li&gt;&quot;, &quot;&lt;li&gt;lisi&lt;/li&gt;&quot;, &quot;&lt;li&gt;wangwu&lt;/li&gt;&quot;]</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>lis<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">// 这里结果为：&lt;ul&gt; &lt;li&gt;zhangsan&lt;/li&gt; &lt;li&gt;lisi&lt;/li&gt; &lt;li&gt;wangwu&lt;/li&gt; &lt;/ul&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，就得到了我们想要的列表。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>在渲染列表时，每个列表元素都应该给一个唯一的 key。如下，这里的<code>item.key</code>只是示例，这个 key 也可以是其他的唯一标识：</p><p><code>let lis = arr.map(item =&gt; &lt;li key=&quot;item.key&quot;&gt;{item}&lt;/li&gt;)</code></p><p>如果不指定 key，react 会按顺序从列表第一个对比到最后一个，有 key，则会根据 key 去进行比较。这样的区别在于，如果我们列表中的改变是某些元素的顺序变了（如在某个地方插入了一个属性），则没有 key 时，react 会更新从插入元素开始的所有元素，而有 key 时，则只会更新插入的元素。</p></div><h2 id="手动创建-react-项目" tabindex="-1"><a class="header-anchor" href="#手动创建-react-项目" aria-hidden="true">#</a> 手动创建 react 项目</h2><p>在创建 react 项目时，我们可以选择使用 npm 等作为包管理器来对项目进行管理。react 官方为了方便我们的开发，提供了<code>react-scripts</code>包，这里面提供了项目开发中的大部分依赖，大大简化了项目开发。</p><p>开发步骤如下：</p><ol><li><p>创建项目，目录结构如下：</p><p><img src="/docs/assets/image-20230603135002084-c1eb115f.png" alt="image-20230603135002084"></p></li><li><p>进入项目目录，执行命令初始化项目：<code>npm init -y</code></p></li><li><p>安装项目依赖：<code>npm install react react-dom react-scripts -S</code></p></li><li><p>在<code>public/index.html</code>中添加一个根元素<code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code></p></li><li><p>在<code>scr/index.js</code>中添加一点代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 引入 ReactDOM</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span>

<span class="token comment">// 创建一个 jsx</span>
<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>这是一个 react 项目<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>这是手动创建的项目<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token comment">// 获取根元素</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>然后在终端中使用<code>npx react-scripts start</code>或者<code>npx react-scripts build</code>可以启动项目或者打包项目。但是这样命令太长，因此我们可以在<code>package.json</code>中添加如下代码：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// 这里可以省略 npx，写上也是一样的效果</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts start&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts build&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>最后我们使用<code>npm run dev</code>或者<code>npm run build</code>就可以启动项目或者打包了</p></li></ol><h2 id="自动创建-react-项目" tabindex="-1"><a class="header-anchor" href="#自动创建-react-项目" aria-hidden="true">#</a> 自动创建 react 项目</h2><p><code>npx create-react-app 项目名</code></p><h2 id="react-组件" tabindex="-1"><a class="header-anchor" href="#react-组件" aria-hidden="true">#</a> react 组件</h2><p>react 中定义组件的方式有两种：基于函数的组件和基于类的组件。</p><h3 id="函数式组件" tabindex="-1"><a class="header-anchor" href="#函数式组件" aria-hidden="true">#</a> 函数式组件</h3><p>函数组件就是一个返回 jsx 的普通函数，简单示例如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* 在 App.js 中创建组件，并导出 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是一个函数组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App


<span class="token comment">/* 在 index.js 中引入组件，并使用 */</span>
<span class="token comment">// 引入 ReactDOM</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span>
<span class="token comment">// 引入样式</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span>
<span class="token comment">// 引入组件</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span>

<span class="token comment">// 获取根元素</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 渲染 App 组件</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="类组件" tabindex="-1"><a class="header-anchor" href="#类组件" aria-hidden="true">#</a> 类组件</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token comment">// 类组件必须要继承 React.Component</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 类组件中，必须添加一个 render() 方法，且方法的返回值要是一个 jsx</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是一个类组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><ol><li>相较于函数组件，类组件的书写要麻烦一些，但是它们的作用是一样的。</li><li>我们一般会在<code>src</code>中创建一个文件夹<code>Components</code>专门用来放置组件文件。</li></ol></div><h2 id="事件" tabindex="-1"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h2><p>在 react 中，事件需要通过元素的属性来设置，且事件的属性需要使用驼峰命名法，如：</p><ul><li>onclick =&gt; onClick</li><li>onchange =&gt; onChange</li><li>不能使用类似<code>addEventListener</code>的方法给元素绑定事件，不会生效</li></ul><p>属性值不能直接执行代码，而是需要一个回调函数，不能写此类代码：</p><ul><li>onClick=&quot;alert(123)&quot;，这类代码在第一次渲染组件的时候就会直接执行</li><li>onClick=&quot;{() =&gt; alert(123)}&quot;，这类代码会在点击的时候才执行</li></ul><div class="hint-container tip"><p class="hint-container-title">要给事件传递参数时</p><p>如果我们的事件需要传递一些参数，则应该使用如下写法，才能保证代码正常运行：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">addHandler</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>完整示例代码：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 事件</span>
	<span class="token keyword">const</span> <span class="token function-variable function">clickEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取消默认行为</span>
	  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取消冒泡</span>
	  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

  <span class="token comment">// 绑定事件</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickEvent<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 react 中，无法通过<code>return false</code>取消默认行为。</p><ul><li>react 事件中同样会传递事件对象，可以在响应函数中定义参数来接收事件对象</li><li>react 中的事件对象不是原生的事件对象，是经过 react 包装后的事件对象</li><li>由于对象进行了包装，所以使用过程中我们无需再去考虑兼容性问题</li></ul><h2 id="props-父组件给子组件传值" tabindex="-1"><a class="header-anchor" href="#props-父组件给子组件传值" aria-hidden="true">#</a> Props 父组件给子组件传值</h2><h3 id="函数组件" tabindex="-1"><a class="header-anchor" href="#函数组件" aria-hidden="true">#</a> 函数组件</h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/* 父组件 */</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">&quot;./Son&quot;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Father</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 绑定事件</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">/* test 就是父组件给子组件传的一个参数 */</span><span class="token punctuation">}</span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Son</span></span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Father
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* 子组件，son */</span>
<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这个 props 中就包含父组件给子组件传递的所有参数，这里是:{test: &#39;123&#39;}</span>
  <span class="token comment">// 绑定事件</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickEvent<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>test<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Son
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>函数式组件中，在函数中传入一个<code>props</code>参数，这个参数中就包含父组件给子组件传递的所有的数据。</p><p>在子组件中使用<code>props.xxx</code>就可以使用相应的数据。</p><p><strong><code>props</code>是只读的，不能修改。</strong></p></div><h3 id="类组件-1" tabindex="-1"><a class="header-anchor" href="#类组件-1" aria-hidden="true">#</a> 类组件</h3><p>类组件中的<code>props</code>是存储到类的实例对象中的，可以直接通过实例对象访问：<code>this.props.xxx</code>。</p><h2 id="state-响应式数据" tabindex="-1"><a class="header-anchor" href="#state-响应式数据" aria-hidden="true">#</a> state：响应式数据</h2><p>在 react 中，当组件渲染完毕后，再修改组件中的变量，不会使组件重新渲染。因此我们就需要一个特殊的变量，这个变量的功能就是当它发生变化时，会使得组件重新渲染。因此 react 给我们提供了 state 来解决这个问题。</p><p><code>state</code>和<code>props</code>类似，都是一种存储属性的方式，但是不同点在于<code>state</code>只属于当前组件，其他组件无法访问，且<code>state</code>是可变的，当其发生变化后，相关的组件会一起刷新。</p><p><code>state</code>相当于一个变量，只是它在 react 中进行了注册，react 会监控这个变量的变化，当 state 发生变化时，会自动触发组件的重新渲染，使得我们的修改可以在页面中呈现出来。</p><h3 id="函数组件中" tabindex="-1"><a class="header-anchor" href="#函数组件中" aria-hidden="true">#</a> 函数组件中</h3><p>在函数组件中，我们需要通过钩子函数<code>useState()</code>获取<code>state</code>。</p><p><code>useState()</code>会返回一个数组，数组中包含两个数据：</p><ol><li>第一个元素就是我们传入的初始值，它只用来显示数据，直接修改不会触发组件的重新渲染</li><li>第二个元素是一个函数，通常我们将其命名为<code>SetXxx</code>，这个函数用来修改<code>state</code>，调用其修改<code>state</code>后会触发组件的重新渲染，并且使用函数中的值作为新的<code>state</code>的值</li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">SetState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SetState 组件渲染&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>counter<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">lessHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>counter <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>counter<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lessHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">less</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SetState
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><ol><li><p>当<code>state</code>的值是对象时，修改<code>state</code>其实是使用新的对象替换旧的对象，这样就会导致如果新对象中缺少某些属性，则会丢失这些属性。因此我们可以使用浅拷贝的方法去实现更新：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 方法一：</span>
<span class="token keyword">const</span> newUser <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span>
newUser<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">28</span>
<span class="token function">setUser</span><span class="token punctuation">(</span>newUser<span class="token punctuation">)</span>

<span class="token comment">// 方法二：</span>
<span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span>user<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>当通过<code>setState()</code>去修改一个<code>state</code>时，它并不是修改了当前的<code>state</code>，而是修改了组件下一次渲染的<code>state</code>。</p></li><li><p><code>setState()</code>会触发组件的重新渲染，它是异步的。当检测到有<code>setState()</code>时，会先将其放入任务队列，然后一直等待所有代码执行完毕后，才会执行这个任务队列，并且同一任务队列中相同的<code>setState()</code>会合并执行，只执行一次。</p></li><li><p>当调用<code>setState()</code>需要用旧的<code>state</code>的值时，一定要注意有可能出现计算错误的情况，即多次修改使用的是同一个<code>state</code>的值。为了避免这种情况，我们可以通过为<code>setState()</code>传递回调函数的形式来修改<code>state</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这个 setTimeout 是模拟代码执行速度慢时，快速点击按钮导致多次修改state时出错的情况</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// setState() 中回调函数的返回值将会成为新的state值，</span>
    <span class="token comment">// 回调函数执行时，react会将最新的state作为参数传递，</span>
    <span class="token comment">// 它会保证每次的setState的使用的state都是最新的，不会多次使用同一个</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">preCounter</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> preCounter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></div><h3 id="类组件中" tabindex="-1"><a class="header-anchor" href="#类组件中" aria-hidden="true">#</a> 类组件中</h3><p>类组件中的<code>state</code>统一存储到实例对象的<code>state</code>属性中，可以通过<code>this.state</code>来访问，通过<code>this.setState()</code>来对其进行修改。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ClassCom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// this.setState({ count: this.state.count + 1 })</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> prevState<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>当我们通过<code>this.setState()</code>修改<code>state</code>时，react 只会修改我们设置要修改的属性，其他属性不会丢失，但是这仅限于直接存储于<code>state</code>中的属性，深层次的会丢失，如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里会丢失 age 属性</span>
      <span class="token comment">// user: { name: &quot;李四&quot; }</span>
      <span class="token comment">// 这样就不会丢失 age 了</span>
      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>user<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="双向绑定" tabindex="-1"><a class="header-anchor" href="#双向绑定" aria-hidden="true">#</a> 双向绑定</h3><p>如果我们将<code>state</code>绑定在 input 标签上，要实现在 input 中输入数据也能同步修改<code>state</code>的效果，则需要给 input 绑定一个事件<code>onChange</code>，将我们输入的数据更新到<code>state</code>。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">SetState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SetState 组件渲染&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>counter<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> state

  <span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">lessHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>counter <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 绑定 onChange 事件，实现双向数据绑定</span>
  <span class="token keyword">const</span> <span class="token function-variable function">changeHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>counter<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counter<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeHandler<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lessHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">less</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SetState
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ref-获取-dom-对象" tabindex="-1"><a class="header-anchor" href="#ref-获取-dom-对象" aria-hidden="true">#</a> Ref：获取 DOM 对象</h2><h3 id="函数组件-1" tabindex="-1"><a class="header-anchor" href="#函数组件-1" aria-hidden="true">#</a> 函数组件</h3><ul><li><p>我们可以通过 js 原生的方式来获取 DOM，但是不建议这么做</p></li><li><p>直接从 react 处获取 DOM 对象</p><ol><li><p>创建一个存储 DOM 对象的容器，使用<code>useRef()</code>钩子函数</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">SetState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 创建存储DOM对象的容器</span>
  <span class="token keyword">const</span> h1Ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h1Ref<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SetState
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><ol><li>react 中的钩子函数只能用于函数组件或者自定义钩子</li><li>钩子函数只能直接在函数组件中调用</li></ol></div></li><li><p>将容器设置为想要获取 DOM 对象元素的<code>ref</code>属性</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">SetState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 创建存储DOM对象的容器</span>
  <span class="token keyword">const</span> h1Ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h1Ref<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    	</span><span class="token punctuation">{</span><span class="token comment">/* 设置 h1 的 ref 属性 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>h1Ref<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SetState
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>useRef()</code>返回的就是一个普通的 js 对象，所以我们直接使用<code>{current: null}</code>创建一个 js 对象，也可以代替<code>useRef()</code>，但是我们自己创建的对象在组件重新渲染时，每次都会创建一个新对象，这个新对象与上一次的对象不是同一个，而<code>useRef()</code>创建的对象可以保证每次渲染的对象都是同一个对象。</p><p>当我们需要一个对象不会因为组件的重新渲染而改变时，就可以使用<code>useRef()</code>，在获取 DOM 对象时，我们建议使用<code>useRef()</code>。</p></div><h3 id="类组件-2" tabindex="-1"><a class="header-anchor" href="#类组件-2" aria-hidden="true">#</a> 类组件</h3><p>流程与函数组件类似，如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ClassCom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建容器存储DOM对象</span>
  h1Ref <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>h1Ref<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>h1Ref<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">test</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="标签插入内容-可以理解为-vue-插槽" tabindex="-1"><a class="header-anchor" href="#标签插入内容-可以理解为-vue-插槽" aria-hidden="true">#</a> 标签插入内容：可以理解为 vue 插槽</h2><p><code>props.children</code>可以获取到给组件中插入的内容：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/* Card.js */</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Card</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// 这样表示我们不光要使用自己的样式，也要使用传入过来的组件的样式</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">card </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>className<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Card
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/* App.js */</span>
<span class="token keyword">import</span> StudyLogs <span class="token keyword">from</span> <span class="token string">&quot;./Components/StudyLogs/StudyLogs&quot;</span>
<span class="token keyword">import</span> Card <span class="token keyword">from</span> <span class="token string">&#39;./Components/Card/Card&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* 将 StudyLogs 组件插入到 Card 中 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StudyLogs</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="提取公共数据" tabindex="-1"><a class="header-anchor" href="#提取公共数据" aria-hidden="true">#</a> 提取公共数据</h2><p>当遇到一个数据需要被多个组件使用时，我们可以将数据放入到这些组件共同的祖先元素中，这样就可以使得多个组件都能方便的访问到这个数据。</p><h2 id="子组件给父组件传值" tabindex="-1"><a class="header-anchor" href="#子组件给父组件传值" aria-hidden="true">#</a> 子组件给父组件传值</h2><p>使用自定义事件，即在父组件中定义一个事件，然后传递给子组件，子组件调用这个事件，并将父组件需要的数据以函数参数的形式传递过去。</p><ul><li><p>父组件：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> LogsForm <span class="token keyword">from</span> <span class="token string">&quot;./Components/LogsForm/LogsForm&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义一个事件</span>
  <span class="token keyword">const</span> <span class="token function-variable function">saveLoghandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">newLog</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newLog<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">/* 将自定义事件传递给子组件 */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LogsForm</span></span> <span class="token attr-name">onSaveLog</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>saveLoghandler<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>子组件</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">LogsForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>date<span class="token punctuation">,</span> setDate<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">dateChangeHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setDate</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newLog <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 子组件调用父组件传递的事件，并将需要的数据传递过去</span>
    props<span class="token punctuation">.</span><span class="token function">onSaveLog</span><span class="token punctuation">(</span>newLog<span class="token punctuation">)</span>
    <span class="token function">setDate</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      日期：</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dateChangeHandler<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">添加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> LogsForm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="portal-传送组件-可以理解为-vue3-的-teleport" tabindex="-1"><a class="header-anchor" href="#portal-传送组件-可以理解为-vue3-的-teleport" aria-hidden="true">#</a> portal：传送组件，可以理解为 vue3 的 teleport</h2><p>一般来说，组件会默认作为父组件的后代渲染到页面中，但是在有些情况下，这种方式会带来一些问题，如一些弹窗组件会因为其父组件的 css 中包含定位或设置层级的样式而出错。</p><p>这是我们可以通过<code>portal</code>将组件渲染到页面中的指定位置。使用步骤如下：</p><ol><li><p>在<code>index.html</code>中添加一个新的元素，用于专门渲染这个传送组件：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 这个是根元素 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 专门渲染遮罩层 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>修改组件的渲染方式</p><ul><li><p>在被传送的组件中使用<code>ReactDOM.createPortal()</code>创建一个传送门，有两个参数：</p><ol><li>参数一：要渲染的模板</li><li>参数二：用来放置这个组件的元素</li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./ConfirmModal.css&quot;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span>

<span class="token comment">// 获取要传送到的根组件</span>
<span class="token keyword">const</span> maskDrop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#mask-root&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">ConfirmModal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>mask<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      我是被传送的组件
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">{</span><span class="token comment">/* 通过 ReactDOM.createPortal() 作为返回值 */</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> maskDrop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ConfirmModal
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>protal</code>主要就是用于一些弹出层，如弹窗之类的组件。</p><p>导入<code>ReactDOM</code>时，<strong>如下导入方式都会导致报错</strong>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// import {ReactDOM} from &quot;react-dom&quot;</span>
<span class="token comment">// import ReactDOM from &quot;react-dom/client&quot;</span>
<span class="token comment">// import {ReactDOM} from &quot;react-dom/client&quot;</span>

<span class="token comment">// 只有这种导出方式是不会报错的</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="css-module-可以理解为-vue-中-style-scoped" tabindex="-1"><a class="header-anchor" href="#css-module-可以理解为-vue-中-style-scoped" aria-hidden="true">#</a> CSS_Module：可以理解为 vue 中 style:scoped</h2><p>CSS_Module 是一种用于在 React 和 Webpack 中创建 CSS 模块化的技术。它可以使得 CSS 样式仅在特定的组件中起作用，而不会影响全局样式。</p><p>使用步骤如下：</p><ol><li><p>创建一个文件<code>xxx.module.css</code>，这个<code>.module</code>表示这是一个模块化的 css</p></li><li><p>引入文件：<code>import classes from &quot;./xxx.module.css&quot;</code></p></li><li><p>通过<code>classes.类名</code>设置类：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> classes <span class="token keyword">from</span> <span class="token string">&quot;./App.module.css&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>classes<span class="token punctuation">.</span>p1<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是一个段落</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点我一下</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>此时，这个类名实际的名字并不是<code>p1</code>，这样就保证虽然不同模块中的类名可能相同，但是实际它最终的类名并不相同：</p><p><img src="/docs/assets/image-20230606182703421-c735406d.png" alt="image-20230606182703421"></p><h2 id="fragment-理解为-vue-中的-template-或者微信小程序中的-block" tabindex="-1"><a class="header-anchor" href="#fragment-理解为-vue-中的-template-或者微信小程序中的-block" aria-hidden="true">#</a> Fragment：理解为 vue 中的 template，或者微信小程序中的 block</h2><p>Fragment 是 React 中的一个组件，它可以<strong>用来包裹其他组件，但它本身不会被渲染到页面上</strong>。它可以用来解决在一个组件中返回多个元素的问题，因为在 React 中，一个组件只能返回一个根元素。使用 Fragment 可以让开发者在不增加额外 DOM 元素的情况下，返回多个元素。</p><p>例如：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>它还有一个语法糖，即直接用<code>&lt;&gt;&lt;/&gt;</code>即可：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="移动端适配" tabindex="-1"><a class="header-anchor" href="#移动端适配" aria-hidden="true">#</a> 移动端适配</h2><p>我们可以在<code>index.js</code>中添加如下代码，这样来设置移动端的视口大小。其实可以理解为将整个视口分成了多少列，然后我们在写样式是就用 rem 作为单位，如：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// 设置移动端的适配</span>
<span class="token comment">// 除以几，蛇口的宽度就是多少rem，即现在我们设置视口的总宽度为750rem</span>
<span class="token comment">// 这里的750是自定义的，如果有设计图，则按照设计图的宽度来，如设计图宽为 600px ，则这里除以 600</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">/</span> <span class="token number">750</span> <span class="token operator">+</span> <span class="token string">&quot;vw&quot;</span>

<span class="token comment">// 如果此时有一个元素，它在设计图中的宽度为 100px，则我们这样写：width: 100rem;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-fontawesome-字体图标库" tabindex="-1"><a class="header-anchor" href="#使用-fontawesome-字体图标库" aria-hidden="true">#</a> 使用 FontAwesome 字体图标库</h2><ol><li><p>首先安装依赖</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">--save</span> @fortawesome/fontawesome-svg-core
<span class="token function">npm</span> i <span class="token parameter variable">--save</span> @fortawesome/free-solid-svg-icons
<span class="token function">npm</span> i <span class="token parameter variable">--save</span> @fortawesome/react-fontawesome
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>引入组件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FontAwesomeIcon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@fortawesome/react-fontawesome&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>引入图标：具体图标可以去官网查询</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> faPlus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@fortawesome/free-solid-svg-icons&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>使用</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FontAwesomeIcon</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>faPlus<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="context-解决-props-层层传递数据和方法的问题" tabindex="-1"><a class="header-anchor" href="#context-解决-props-层层传递数据和方法的问题" aria-hidden="true">#</a> Context：解决 props 层层传递数据和方法的问题</h2><p>如果我们有一个方法，在 A 组件中定义，在 D 组件中使用，一般情况下，我们会将这个方法从 A =&gt; B =&gt; C =&gt; D 传递，这样实在是过于麻烦。因此我们可以使用<code>Context</code>。</p><p><code>Context</code>为我们提供了一种在不同组件间共享数据的方式，它不再拘泥于 props 刻板的逐层传递，而是<strong>在外层组件中统一设置，设置后，内层的所有组件都可以直接访问</strong>。</p><blockquote><p>可以简单理解为 vue 中的<code>provide/inject</code></p></blockquote><ol><li><p>使用<code>React.createContext()</code>创建 context</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token comment">// 这里只是做个演示，一般我们不会在这里把数据写死，而是在提供数据的组件中去提供数据</span>
<span class="token keyword">const</span> TestContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TestContext
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在外层组件中提供数据</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> TestContext <span class="token keyword">from</span> <span class="token string">&quot;提供context的文件的路径&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TestContext.Provide</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是数据的提供者</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TestContext.Provide</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">A</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在内层组件使用：方式一，较麻烦</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> TestContext <span class="token keyword">from</span> <span class="token string">&quot;提供context的文件的路径&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TestContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      	</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 这个 ctx 就是提供的 context</span>
          <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>ctx<span class="token punctuation">.</span>name<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TestContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">B</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在内层组件使用：方式二，更方便优雅</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> TestContext <span class="token keyword">from</span> <span class="token string">&quot;提供context的文件的路径&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用一个钩子，获取提供的 context</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>TextContext<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>ctx<span class="token punctuation">.</span>name<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="effect-useeffect-专门执行副作用代码" tabindex="-1"><a class="header-anchor" href="#effect-useeffect-专门执行副作用代码" aria-hidden="true">#</a> Effect：useEffect()专门执行副作用代码</h2><p>react 组件有部分逻辑可以直接编写到组件的函数体中，如<code>filter、map</code>等方法，或者判断某个组件是否显示等。但是有一些罗 i 就如果直接写在函数体中，会影像到组件的渲染，这部分就是会产生<strong>副作用</strong>的代码，是一定不能写在函数体中的。如直接修改 state 的逻辑的代码直接写到组件中，会导致组件不断渲染，直到调用次数过多导致内存溢出。</p><details class="hint-container details"><summary>React.StrictMode</summary><p>编写 React 组件时，我们要极力的避免组件中出现那些会产生“副作用”的代码。同时，如果你的 React 使用了严格模式，也就是在 React 中使用了<code>React.StrictMode</code>标签，那么 React 会非常“智能”的去检查你的组件中是否写有副作用的代码，当然这个智能是加了引号的，我们来看看 React 官网的文档是如何说明的：</p><p>Strict mode can’t automatically detect side effects for you, but it can help you spot them by making them a little more deterministic. This is done by intentionally double-invoking the following functions:</p><ul><li>Class component <code>constructor</code>, <code>render</code>, and <code>shouldComponentUpdate</code> methods</li><li>Class component static <code>getDerivedStateFromProps</code> method</li><li>Function component bodies</li><li>State updater functions (the first argument to <code>setState</code>)</li><li>Functions passed to <code>useState</code>, <code>useMemo</code>, or <code>useReducer</code></li></ul><p>上文的关键字叫做 <strong>“double-invoking”</strong> 即重复调用，这句话是什么意思呢？大概意思就是，React 并不能自动替你发现副作用，但是它会想办法让它显现出来，从而让你发现它。那么它是怎么让你发现副作用的呢？React 的严格模式，<strong>在开发模式下</strong>，会主动的重复调用一些函数，以使副作用显现。所以在处于开发模式且开启了 React 严格模式时，这些函数会被调用两次：</p><ul><li>类组件的的 <code>constructor</code>, <code>render</code>, 和 <code>shouldComponentUpdate</code> 方法</li><li>类组件的静态方法 <code>getDerivedStateFromProps</code></li><li>函数组件的函数体</li><li>参数为函数的<code>setState</code></li><li>参数为函数的<code>useState</code>, <code>useMemo</code>, or <code>useReducer</code></li></ul><p>重复的调用会使副作用更容易凸显出来，你可以尝试着在函数组件的函数体中调用一个<code>console.log</code>你会发现它会执行两次，如果你的浏览器中安装了 React Developer Tools，第二次调用会显示为灰色。</p></details><details class="hint-container details"><summary>setState() 的执行流程（函数组件）</summary><p>如这里有一个<code>const [count, setCount] = useState(0)</code>，当调用<code>setCount()</code>时，它其实会调用 react 内部的<code>dispatchSetDate()</code>方法，它会先判断组件当前处于什么阶段：</p><ul><li>如果是渲染阶段，则不会检查<code>state</code>的值是否相同，直接渲染组件</li><li>如果不是渲染阶段，则会检查<code>state</code>的值是否相同，若不同，则重新渲染组件，若相同，则不会重新渲染组件。</li><li>在值相同时，在一些情况下 react 会继续执行当前组件的渲染，但是这次渲染不会影响其子组件，不会产生实际的效果，这种情况通常发生在<code>state</code>的值第一次相同时。</li></ul></details><h3 id="effect-的使用" tabindex="-1"><a class="header-anchor" href="#effect-的使用" aria-hidden="true">#</a> Effect 的使用</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>useEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里编写会产生副作用的代码</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个 return 的函数会在组件卸载时执行</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>useEffect()</code>中的回调函数会在组件每次渲染完毕之后执行，这也是它和写在函数体中代码的最大的不同，函数体中的代码会在组件渲染前执行，而<code>useEffect()</code>中的代码是在组件渲染后才执行，这就避免了代码的执行影响到组件渲染。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>React 会确保<code>effect</code>每次运行时，DOM 都已经更新完毕。</p></div><h3 id="清除-effect" tabindex="-1"><a class="header-anchor" href="#清除-effect" aria-hidden="true">#</a> 清除 Effect</h3><p>组件的每次重新渲染 effect 都会执行，有一些情况里，两次 effect 执行会互相影响。<strong>比如，在 effect 中设置了一个定时器</strong>，总不能每次 effect 执行都设置一个新的定时器，所以我们需要在一个 effect 执行前，清除掉前一个 effect 所带来的影响。要实现这个功能，可以在 effect 中将一个函数作为返回值返回，像是这样：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 副作用代码</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个函数会在下一次effect执行栈中调用</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>effect 返回的函数，会在下一次 effect 执行前调用，我们可以在这个函数中清除掉前一次 effect 执行所带来的影响。</strong></p></div><h3 id="限制-effect" tabindex="-1"><a class="header-anchor" href="#限制-effect" aria-hidden="true">#</a> 限制 Effect</h3><p>组件每次渲染 effect 都会执行，这似乎并不总那么必要。因此在<code>useEffect()</code>中我们可以限制 effect 的执行时机，在<code>useEffect()</code>中可以将一个数组作为第二个参数传递，像是这样：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 副作用代码</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个函数会在下一次effect执行栈中调用</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 这里传入了两个变量 a b，设置后effect只有在变量a或者b发生变化时才会执行。</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>通过传入变量，可以限制<code>effect</code>的执行次数。如果直接传入一个空数组，则这个<code>effect</code>只会执行一次。</strong></p></div><h2 id="uselayouteffect-和-useinsertioneffect" tabindex="-1"><a class="header-anchor" href="#uselayouteffect-和-useinsertioneffect" aria-hidden="true">#</a> useLayoutEffect 和 useInsertionEffect</h2><p>useLayoutEffect的方法签名和useEffect一样，功能也类似。不同点在于，useLayoutEffect的执行时机要早于useEffect，它会在DOM改变后调用。在老版本的React中它和useEffect的区别比较好演示，React18中，useEffect的运行方式有所变化，所以二者区别不好演示。</p><p>useLayoutEffect使用场景不多，实际开发中，在effect中需要修改元素样式，且使用useEffect会出现闪烁现象时可以使用useLayoutEffect进行替换。</p><p><img src="/docs/assets/image-20230615171601191-89b73405.png" alt="image-20230615171601191"></p><h2 id="reducer-usereducer" tabindex="-1"><a class="header-anchor" href="#reducer-usereducer" aria-hidden="true">#</a> Reducer：useReducer()</h2><p>在 react 的函数组件中，我们可以通过<code>useState()</code>来创建 state，这种方式也存在一些不足，因为所有修改 state 的方法都必须通过<code>setState()</code>来进行，那么当遇到一些复杂度比较高的 state 时，这种方式似乎就不太优雅。</p><p>因此，react 为了解决 state 在这种情况下带来的不便，提供了一个新的使用 state 的方式：<code>Reducer</code>。我们可以理解为它的作用就是将那些和同一个 state 相关的所有函数都整合到一起，方便在组件中进行调用。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p><code>Reducer</code>只适用于比较复杂的 state，对简单的 state 使用它只能徒增烦恼。</p></div><h3 id="reducer-的使用" tabindex="-1"><a class="header-anchor" href="#reducer-的使用" aria-hidden="true">#</a> Reducer 的使用</h3><p>这里使用一个简单的例子举例，实际使用时，这么简单的 state 可以不用<code>Reducer</code>。</p><p>使用<code>useReducer()</code>来创建<code>Reducer</code>，它接收三个参数：</p><ol><li>reducer 函数：整合函数，对于当前 state 的所有操作都应该在这个函数中定义，该函数的返回值，会成为 state 的新值。这个函数有两个参数： <ol><li>第一个参数：当前最新的 state</li><li>第二个参数：action，它需要一个对象，在对象中会存储 dispatch 所发送的指令，然后我们在 reducer 中就可以根据传入进来的指令执行不同的代码</li></ol></li><li>state 的初始值，跟<code>useState()</code>传入的初始值的功能一样</li><li>init：它不是必须的，可以为空。</li></ol><p><code>Reducer</code>的返回值是一个数组，有两个元素：</p><ol><li>state：用来获取 state 的值，跟 useState() 返回的 state 一样</li><li>state 的派发器 stateDispatch：通过派发起可以发送操作 state 的命令，具体的修改行为将会由其他函数执行</li></ol><p>下面是一个简单的例子：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token comment">// 一般来说，我们会将 reducer 函数放到组件的函数本体外定义，这是为了不让组件在每次渲染时都重新创建一个 reducer 函数 ，虽然影响不大，但是也会造成性能损耗</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> action<span class="token punctuation">.</span><span class="token function">onHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">ReducerTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> countDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>
		reducer<span class="token punctuation">,</span>
		<span class="token number">1</span>
	<span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">countDispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token function-variable function">onHandler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> count <span class="token operator">+</span> <span class="token number">1</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">const</span> <span class="token function-variable function">subHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">countDispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token function-variable function">onHandler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> count <span class="token operator">-</span> <span class="token number">1</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>subHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">减少</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">增加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ReducerTest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>这个例子中，我们给<code>action</code>传递的是一个函数，它在不同的执行函数中的内容不同，它返回新的<code>state</code>值，最后在<code>reducer</code>函数中调用它即可修改<code>state</code>的值。</p><p>同时，我们也可以传递类似<code>{type: &quot;ADD&quot;}</code>这种，然后在<code>reducer</code>函数中使用<code>switch/case</code>去执行不同类型值的代码（虽然可以使用<code>if...else...</code>，但是更建议使用<code>switch/case</code>，可以使代码结构更清晰）。</p><p><strong>一般来说，我们会将<code>reducer</code>函数放到组件的函数本体外定义，这是为了不让组件在每次渲染时都重新创建一个 reducer 函数 ，虽然影响不大，但是也会造成性能损耗。</strong></p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>如果使用了<code>Reducer</code>之后，发现每次<code>reducer</code>函数都会执行两次，那么可能是<code>&lt;React.StrictMode&gt;</code>严格模式导致的问题，具体可以看<a href="#effect-useeffect-%E4%B8%93%E9%97%A8%E6%89%A7%E8%A1%8C%E5%89%AF%E4%BD%9C%E7%94%A8%E4%BB%A3%E7%A0%81">Effect中关于React.StrictMode的描述</a> 。</p></div><h2 id="react-memo" tabindex="-1"><a class="header-anchor" href="#react-memo" aria-hidden="true">#</a> React.memo</h2><p>一般情况下，父组件的重新渲染会导致子组件也重新渲染，不论此时父组件的重新渲染是否影响到了子组件。这种子组件没有变化却要因为父组件的重新渲染而重新渲染的方式会额外造成性能损耗，因此 react 就给我们提供了一个高阶函数<code>React.memo()</code>。</p><p>它可以用来根据组件的<code>props</code>对组件进行缓存，当一个组件的父组件发生重新渲染，而子组件的<code>props</code>没有发生变化时，它就会直接将缓存中的组件渲染结果返回，而不会再次触发子组件的重新渲染，这样一来就大大降低了子组件重新渲染的次数。</p><p>使用如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MemoTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;重新渲染&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>MemoTest<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>React.memo()</code>接收一个组件作为参数，并且会返回一个包装过的组件，包装过的新组件就会具有缓存功能。</p><p>包装过后，只有父组件导致本组件的<code>props</code>发生变化后，才会触发组件的重新渲染，否则总是返回缓存中的结果。它不会影响<code>state</code>和<code>context</code>的变化。</p></div><h2 id="usecallback" tabindex="-1"><a class="header-anchor" href="#usecallback" aria-hidden="true">#</a> useCallback()</h2><p><code>useCallback()</code>是一个钩子函数，用来创建 react 中的回调函数。它创建的回调函数不会总在组件重新渲染时重新创建。</p><p>它的使用类似<code>useEffect()</code>，需要传入一个函数和依赖数组：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	useCallback<span class="token punctuation">,</span>
	useState<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> clickHandler <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prevState <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">A</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>它返回的这个函数就当成普通函数进行使用即可。传入的这个依赖数组的作用与<code>useEffect()</code>一致，这里传入一个空数组则这个函数只会在初次渲染时才创建，此后重新渲染时都不会重新创建。</p><h2 id="usememo" tabindex="-1"><a class="header-anchor" href="#usememo" aria-hidden="true">#</a> useMemo()</h2><p><code>useMemo</code>和<code>useCallback</code>用法和写法都十分相似，只是<code>useCallback</code>用来缓存函数，它会返回一个函数，而<code>useMemo</code>用来<strong>缓存函数的执行结果</strong>，它返回的是函数的执行结果。</p><p>它用来缓存那些执行速度比较慢的函数的执行结果。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">复杂逻辑函数</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>依赖项<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>useMemo</code>中的函数会在依赖项发生变化时执行，如果依赖项没有变化，则返回的是上一次的执行结果，不执行函数，这样就避免复杂逻辑重复执行，每次都需要等待很久。</p></div><h2 id="strapi" tabindex="-1"><a class="header-anchor" href="#strapi" aria-hidden="true">#</a> Strapi</h2><p><a href="https://www.lilichao.com/index.php/2022/05/16/strapi/" target="_blank" rel="noopener noreferrer">Strapi – 李立超 | lilichao.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="useeffect-中使用-async-await" tabindex="-1"><a class="header-anchor" href="#useeffect-中使用-async-await" aria-hidden="true">#</a> useEffect 中使用 async/await</h2><p>你可能在想我就用如下代码不行吗：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://test.com/api&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际上，这样是不行的，代码会报错：</p><p><img src="/docs/assets/image-20230609162007778-219e5fae.png" alt="image-20230609162007778"></p><p>因此，<strong>正确写法如下</strong>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://test.com/api&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义钩子" tabindex="-1"><a class="header-anchor" href="#自定义钩子" aria-hidden="true">#</a> 自定义钩子</h2><p>react 中的钩子函数<strong>只能在函数组件中或者自定义钩子中调用</strong>，当我们需要<span style="color:orange;">将 react 中钩子函数提取到一个公共区域时，就可以使用自定义钩子。</span></p><p>自定义钩子其实就是一个普通函数，只是它的名字需要使用<code>use</code>开头，类似<code>useState</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useFetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> option<span class="token punctuation">,</span> errMsg <span class="token punctuation">}</span> <span class="token operator">=</span> options
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  
  <span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里传入的 data 是调用这个钩子后返回的函数的参数</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置为正在加载</span>
			<span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
			<span class="token comment">// 重置上次的错误</span>
			<span class="token function">setError</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
			<span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
				<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:1337/api/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">method</span><span class="token operator">:</span> option<span class="token punctuation">.</span>method <span class="token operator">||</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token string-property property">&quot;Content-type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token literal-property property">body</span><span class="token operator">:</span> data <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">)</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>resp<span class="token punctuation">.</span>ok <span class="token operator">&amp;&amp;</span> resp<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token function">setData</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
				cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
			<span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> error<span class="token punctuation">,</span> fetchData <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="redux-状态容器" tabindex="-1"><a class="header-anchor" href="#redux-状态容器" aria-hidden="true">#</a> Redux：状态容器</h2><p><code>Redux</code>是一个专为 js 应用设计的可预期的状态容器，即它并不是只能在 react 中使用，在任何 js 应用中都可以（包括前端 js、服务器 nodejs）。</p><p><code>Redux</code>可以理解为<code>reducer</code>和<code>context</code>的结合体，它既可以管理复杂的<code>state</code>，也可以在不同组件间便捷的共享<code>state</code>。</p><p><code>Redux</code>一般应用于大型项目中。</p><p>下面这个案例是简单使用<code>Redux</code>核心库在<code>index.html</code>中的简单应用。</p><p><a href="https://www.lilichao.com/index.php/2022/05/22/redux/" target="_blank" rel="noopener noreferrer">Redux – 李立超 | lilichao.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="rtk" tabindex="-1"><a class="header-anchor" href="#rtk" aria-hidden="true">#</a> RTK</h3><p>除了<code>Redux</code>核心库外，<code>Redux</code>还为我们提供了一种使用<code>Redux</code>的方法：<code>Redux Toolkit</code>，即<code>Redux</code>工具包。它可以简化<code>Redux</code>中的一些重复性操作。</p><p>安装：<code>npm install react-redux @reduxjs/toolkit -S</code></p><ol><li><p>创建一个 store</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* store/index.js */</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> configureStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reduxjs/toolkit&quot;</span>
<span class="token comment">// 这里引入的是拆分出去的 slice</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> studentReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./studentSlice&quot;</span>

<span class="token comment">// 用来创建 store 对象，需要一个配置对象作为参数</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 有多个 reducer 的时候就使用对象配置，如果只有一个则可以直接指定  </span>
	<span class="token literal-property property">reducer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">student</span><span class="token operator">:</span> studentReducer<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>创建分片（slice）：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* store/studentSlice.js */</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> createSlice <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reduxjs/toolkit&quot;</span>

<span class="token comment">// createSlice 用来创建 reducer 切片</span>
<span class="token comment">// 它需要一个配置对象作为参数，通过对象的不同属性来指定它的配置</span>
<span class="token keyword">const</span> stuSlice <span class="token operator">=</span> <span class="token function">createSlice</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;stu&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 用来自动生成 action 中的 type</span>
	<span class="token literal-property property">initialState</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;孙悟空&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
		<span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;花果山&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// state 的初始值</span>
	<span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 可以通过不同的方法来指定对 state 的不同操作</span>
			<span class="token comment">// 两个参数：</span>
			<span class="token comment">//  - state：它是原本那个 state 的代理，可以直接修改</span>
			<span class="token comment">//  - action：它还是原本的 action</span>
			state<span class="token punctuation">.</span>name <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 用来指定 state的各种操作，可以直接在对象中添加方法</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 切片对象会帮我们自动生成 actions</span>
<span class="token comment">// 这个 actions 中保存的是 slice 自动生成的 action 创建器（函数），调用函数会自动创建 action 对象</span>
<span class="token comment">// 这个 action 对象的结构：{type: name/函数名, payload: 函数的参数}</span>
<span class="token comment">// console.log(stuSlice.actions)</span>
<span class="token comment">// 导出修改 state 的方法</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> setName <span class="token punctuation">}</span> <span class="token operator">=</span> stuSlice<span class="token punctuation">.</span>actions
<span class="token comment">// 导出这个 slice 的 reducer</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">reducer</span><span class="token operator">:</span> studentReducer <span class="token punctuation">}</span> <span class="token operator">=</span>
	stuSlice
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在 react 组件中使用：</p><ol><li><p>首先在<code>index.js</code>文件中导入提供<code>store</code>的<code>Provider</code>组件：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/* src/index.js */</span>

<span class="token comment">// 引入 ReactDOM</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span>
<span class="token comment">// 引入样式</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span>
<span class="token comment">// 导入 store</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span>

<span class="token comment">// 获取根元素</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>
	document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">/* 在这里给后续每个子组件都提供这个 store */</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在要使用<code>store</code>的组件中导入相应的钩子函数和修改<code>store</code>的函数，并使用：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/* src/App.js */</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
	useDispatch<span class="token punctuation">,</span>
	useSelector<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setName <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./store/student&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里返回的是对应的 state 数据</span>
	<span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span>
		<span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>student
	<span class="token punctuation">)</span>
	<span class="token comment">// useDispatch 获取派发器对象，它用来调用对应的方法修改 state 数据</span>
	<span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> <span class="token function-variable function">setNameHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// 以下两种dispatch写法效果都是一样的</span>
		<span class="token comment">// dispatch({</span>
		<span class="token comment">// 	type: &quot;stu/setName&quot;,</span>
		<span class="token comment">// 	payload: &quot;猪八戒&quot;,</span>
		<span class="token comment">// })</span>
		<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;猪八戒&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setNameHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				修改name
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ol><h2 id="rtk-query" tabindex="-1"><a class="header-anchor" href="#rtk-query" aria-hidden="true">#</a> RTK Query</h2><p><code>RTKQ（RTK Query）</code>由 RTK 提供，用来帮助我们处理数据加载的问题。他是一个强大的数据获取和缓存工具，在它的帮助下，我们不再需要自己编写获取数据和缓存数据的逻辑。</p><p>Web 应用中加载数据时需要处理的问题：</p><ol><li>根据不同的加载状态娴熟不同的 UI 组件</li><li>减少对相同数据重复发送请求</li><li>使用乐观更新，提升用户体验</li><li>在用户与 UI 交互时，管理缓存的生命周期</li></ol><p>使用示例如下：</p><ol><li><p>新建一个 api 文件，<code>studentApi.js</code>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
	createApi<span class="token punctuation">,</span>
	fetchBaseQuery<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reduxjs/toolkit/dist/query/react&quot;</span>

<span class="token comment">// 创建 Api 对象</span>
<span class="token comment">// createApi() 用来创建 RTKQ 中的 API 对象</span>
<span class="token comment">// RTKQ 的所有功能都需要通过该对象来进行</span>
<span class="token comment">// createApi() 需要一个对象作为参数</span>
<span class="token keyword">const</span> studentApi <span class="token operator">=</span> <span class="token function">createApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// api 的标识，不能和其他的 api 或 reducer 重复</span>
	<span class="token literal-property property">reducerPath</span><span class="token operator">:</span> <span class="token string">&quot;studentApi&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">// 指定查询的基础信息</span>
	<span class="token literal-property property">baseQuery</span><span class="token operator">:</span> <span class="token function">fetchBaseQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:1337/api/&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// prepareHeaders: (headers) =&gt; {</span>
    <span class="token comment">// 获取token，这里是在 RTK 中设置了 token 字段，所以才能直接获取</span>
		<span class="token comment">//	const token = getState().auth.token</span>
		<span class="token comment">// 	// 统一设置请求头</span>
		<span class="token comment">// 	headers.set(&quot;Authorization&quot;, &quot;Bearer &quot; + token)</span>
		<span class="token comment">// 	return headers</span>
		<span class="token comment">// },</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token comment">// 用来指定 api 中的标签类型</span>
	<span class="token literal-property property">tagTypes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 用来指定 api 中的各种功能，是一个方法</span>
	<span class="token comment">// 需要一个对象作为返回值</span>
	<span class="token function-variable function">endpoints</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// build 是请求的构建器，通过 build 来设置请求的相关信息</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 查询所有信息</span>
			<span class="token literal-property property">getStudents</span><span class="token operator">:</span> build<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// build.query() 表明这是一个查询方法</span>
				<span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 用来指定请求子路径</span>
					<span class="token keyword">return</span> <span class="token string">&quot;students&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function">transformResponse</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 用来转换响应数据的格式</span>
					<span class="token keyword">return</span> data<span class="token punctuation">.</span>data
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">// 设置数据缓存的时间，单位为秒，默认就是 60s</span>
				<span class="token literal-property property">keepUnusedDataFor</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token comment">// 提供标识，来设置哪些缓存，哪些不缓存</span>
				<span class="token literal-property property">providesTags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 删除某条数据</span>
			<span class="token literal-property property">deleteStudentById</span><span class="token operator">:</span> build<span class="token punctuation">.</span><span class="token function">mutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token punctuation">{</span>
						<span class="token comment">// 如果发送的不是 get 请求，需要返回与给对象来设置请求的信息</span>
						<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">students/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
						<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;delete&quot;</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 添加一条数据</span>
			<span class="token literal-property property">addStudent</span><span class="token operator">:</span> build<span class="token punctuation">.</span><span class="token function">mutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">stu</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;students&quot;</span><span class="token punctuation">,</span>
						<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
            <span class="token comment">// body 里面的 data 就是要给 post 传递的数据</span>
						<span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
							<span class="token literal-property property">data</span><span class="token operator">:</span> stu<span class="token punctuation">,</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token literal-property property">invalidatesTags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// api 对象常见后，对象中会根据各种方法自动生成对应的钩子函数</span>
<span class="token comment">// 通过这些钩子函数，可以向服务器发送请求</span>
<span class="token comment">// 钩子函数的命名规则：getStudents -&gt; useGetStudentsQuery()</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	useGetStudentsQuery<span class="token punctuation">,</span>
	useDeleteStudentByIdMutation<span class="token punctuation">,</span>
	useAddStudentMutation<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> studentApi
<span class="token keyword">export</span> <span class="token keyword">default</span> studentApi

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在<code>index.js</code>文件中创建并引入</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> configureStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reduxjs/toolkit&quot;</span>
<span class="token keyword">import</span> studentApi <span class="token keyword">from</span> <span class="token string">&quot;./studentApi.js&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setupListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reduxjs/toolkit/dist/query/index.js&quot;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">reducer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里表示将这个 api 配置到这个 store 中</span>
		<span class="token punctuation">[</span>studentApi<span class="token punctuation">.</span>reducerPath<span class="token punctuation">]</span><span class="token operator">:</span> studentApi<span class="token punctuation">.</span>reducer<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 这里表示将 api 自动生成的中间件添加到 store 的中间件中</span>
	<span class="token function-variable function">middleware</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">getDefaultMiddleware</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
		<span class="token function">getDefaultMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>
			studentApi<span class="token punctuation">.</span>middleware
		<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置以后，将会支持 refetchOnFocus 和 refetchOnReconnect</span>
<span class="token function">setupListeners</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>dispatch<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在组件中使用</p><ol><li><p>首先想 RTK 一样，在<code>index.js</code>文件中提供 store</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span>
<span class="token comment">// 引入样式</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span>
<span class="token comment">// 引入 App 组件</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span>

<span class="token comment">// 获取根元素</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>
	document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在后续子组件中使用：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> StudentList <span class="token keyword">from</span> <span class="token string">&quot;./StudentList&quot;</span>
<span class="token keyword">import</span> StuContext <span class="token keyword">from</span> <span class="token string">&quot;./store/StudentContext&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGetStudentsQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./store/studentApi&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">AppFetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> stus<span class="token punctuation">,</span>
		isLoading<span class="token punctuation">,</span>
		isError<span class="token punctuation">,</span>
		isSuccess<span class="token punctuation">,</span>
		refetch<span class="token punctuation">,</span>
	<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useGetStudentsQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token keyword">const</span> <span class="token function-variable function">loadDataHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">refetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StuContext.Provider</span></span>
			<span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">refreshData</span><span class="token operator">:</span> loadDataHandler <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
		<span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loadDataHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					加载数据
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token punctuation">{</span>isSuccess <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StudentList</span></span> <span class="token attr-name">stus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>stus<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
				</span><span class="token punctuation">{</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">数据正在加载中...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
				</span><span class="token punctuation">{</span>isError <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">数据加载失败！</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">StuContext.Provider</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> AppFetch
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ol><details class="hint-container details"><summary>其他细节</summary><ol><li><p>查询方法返回的一些数据，信息如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/**
	 * refetch: 是一个函数，用来重新加载数据，不会使用缓存数据
	 * status: 字符串，表示请求的状态
	 * isFetching: 布尔值，表示数据是否在加载
	 * isLoading: 布尔值，表示数据是否第一次加载
	 * isSuccess: 布尔值，表示请求是否成功
	 * isUninitialized: 布尔值，表示请求是否还没有开始发送
	 * isError: 布尔值，表示是否错误
	 * error: Error()对象，有错误是才显示
	 * data: 最新的数据
	 * currentData: 当前参数的最新数据，当传递的参数发生变化时，它会变成 undefined
	 */</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> stus<span class="token punctuation">,</span>
		isLoading<span class="token punctuation">,</span>
		isError<span class="token punctuation">,</span>
		isSuccess<span class="token punctuation">,</span>
		refetch<span class="token punctuation">,</span>
	<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useGetStudentsQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用接口钩子时，可以做一些配置如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useGetStudentsQuery</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// useQuery 可以接收一个对象作为第二个参数，通过该对象可以对请求进行配置</span>
	<span class="token comment">// 用来指定 useQuery 返回的结果</span>
	<span class="token function-variable function">selectFromResult</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// if (result.data) {</span>
		<span class="token comment">// 	result.data = result.data.filter(</span>
		<span class="token comment">// 		(item) =&gt; item.attributes.age &lt; 18</span>
		<span class="token comment">// 	)</span>
		<span class="token comment">// }</span>
		<span class="token keyword">return</span> result
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 设置轮询的间隔，单位为毫秒，如果为0就表示不轮询</span>
	<span class="token literal-property property">pollingInterval</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token comment">// 设置是否跳过当前请求，默认为 false</span>
	<span class="token literal-property property">skip</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token comment">// 设置是否每次都重新加载数据，false 正常使用缓存，true 每次都重载数据，数字表示数据缓存的时间</span>
	<span class="token literal-property property">refetchOnMountOrArgChange</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token comment">// 是否在重新获取焦点时重载数据，需要在 store 中添加：setupListeners(store.dispatch)</span>
	<span class="token literal-property property">refetchOnFocus</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token comment">// 表示网络重连后是否重载数据，需要在 store 中添加：setupListeners(store.dispatch)</span>
	<span class="token literal-property property">refetchOnReconnect</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>除了查询方法外，添加、修改、删除方法都会返回一个数组：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// 它返回的是一个数组，第一个是操作的触发器，第二个是一个结果集</span>
<span class="token comment">// 这个 result 是一个对象，里面包含的数据和查询方法直接返回的一样</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>delStudent<span class="token punctuation">,</span> result<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDeleteStudentByIdMutation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">deleteHandler</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里传入的 id 就是配置接口时需要传入的参数</span>
	<span class="token keyword">await</span> <span class="token function">delStudent</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></details><div class="hint-container warning"><p class="hint-container-title">注意</p><p>虽然使用<code>RTKQ</code>封装接口，它会帮我们缓存数据，且会直接直接将一些状态返回给我们，也可以让我们配置类似是否要轮询这个接口等的操作，但是总体来说感觉学习成本偏高，有着许多它自己的 api 和配置要学习，并且配置每个 api 时也非常的难受，嵌套的层级也很高，因此总是觉得有点得不偿失。</p></div><h2 id="react-query" tabindex="-1"><a class="header-anchor" href="#react-query" aria-hidden="true">#</a> react query</h2><p>功能与<code>RTKQ</code>类似，但是更加简洁。</p><p>这个等后续再添加内容。</p><p><a href="https://juejin.cn/column/7105422212789714980" target="_blank" rel="noopener noreferrer">react-query手把手教程 - 修仙大橙子的专栏 - 掘金 (juejin.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="router" tabindex="-1"><a class="header-anchor" href="#router" aria-hidden="true">#</a> Router</h2><h3 id="安装-router" tabindex="-1"><a class="header-anchor" href="#安装-router" aria-hidden="true">#</a> 安装 router</h3><div class="code-tabs"><div class="code-tabs-nav" role="tablist"><button class="code-tabs-nav-tab active" role="tab" aria-controls="codetab-1192-0" aria-selected="true">版本5</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1192-1" aria-selected="false">版本6</button></div><!--[--><div class="code-tab active" id="codetab-1192-0" role="tabpanel" aria-expanded="true"><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> react-router-dom@5 <span class="token parameter variable">-S</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1192-1" role="tabpanel" aria-expanded="false"><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> react-router-dom@6 <span class="token parameter variable">-S</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="使用-router" tabindex="-1"><a class="header-anchor" href="#使用-router" aria-hidden="true">#</a> 使用 router</h3><ol><li><p>在<code>index.js</code>中使用<code>BrowserRouter | HashRouter</code>组件，这一步版本5和6没有区别</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>
	document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>这里的<code>Router</code>组件有两种：</p><ol><li><code>BrowserRouter</code>：history 模式</li><li><code>HashRouter</code>：hash 模式</li></ol></div></li><li><p>在被<code>Router</code>包裹的后续子组件中即可使用<code>Route</code>来设置具体的路由</p><div class="code-tabs"><div class="code-tabs-nav" role="tablist"><button class="code-tabs-nav-tab active" role="tab" aria-controls="codetab-1231-0" aria-selected="true">版本5</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1231-1" aria-selected="false">版本6</button></div><!--[--><div class="code-tab active" id="codetab-1231-0" role="tabpanel" aria-expanded="true"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./views/Home/Home&quot;</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">&quot;./views/About/About&quot;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span><span class="token comment">/* 将路由和组件进行映射
            path：路径
            component：该路径下挂载的组件
            exact：路径是否完整匹配，默认值为false  
            render：功能跟 component 类似，但是它更加灵活，它传递的是一个 jsx，因此它可以手动传递 props 参数。但是，使用 render 后，Route 不会自动帮我们传递 history、location 和 match 参数。
      */</span><span class="token punctuation">}</span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span> <span class="token attr-name">exact</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span> <span class="token attr-name">exact</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1231-1" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./views/Home/Home&quot;</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">&quot;./views/About/About&quot;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>在这一步中，版本5和6就有所区别：</p><ol><li><p>版本6中的<code>Route</code>需要被统一包裹在<code>Routes</code>组件中，这个<code>Routes</code>的功能很像版本5中的<code>Switch</code>组件。</p></li><li><p>在版本6中，<code>Route</code>组件中的<code>component、render、children</code>没有了，版本6中改为<code>element={&lt;组件/&gt;}</code>。</p></li><li><p>版本6中，<code>Route</code>组件中不能嵌套当前的路由要渲染的组件，它嵌套的应该是另一个<code>Route</code>，如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token comment">/* 这样的写法是错误的 */</span><span class="token punctuation">}</span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token comment">/* 这种写法是正确的，这里表示在 about 路由中嵌套了 student 子路由*/</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>在版本5中，默认情况下Route并不是严格匹配，只要url地址的头部和path一致，组件就会挂载。使用<code>exact</code>可以开启严格匹配模式，默认值为 false。</p><p>在版本6中，默认情况下Route就是严格匹配，如果不想要严格匹配，可以在路由路径后加上<code>/*</code>，如<code>&lt;Route path=&quot;/about/*&quot; element={&lt;About /&gt;} /&gt;</code></p></div></li><li><p>使用<code>Link</code>或者<code>NavLink</code>组件创建超链接，这一步中版本5和6没什么区别</p><div class="code-tabs"><div class="code-tabs-nav" role="tablist"><button class="code-tabs-nav-tab active" role="tab" aria-controls="codetab-1275-0" aria-selected="true">版本5</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1275-1" aria-selected="false">版本6</button></div><!--[--><div class="code-tab active" id="codetab-1275-0" role="tabpanel" aria-expanded="true"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Menu</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token comment">/* 使用Link组件创建超链接 */</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token comment">/* &lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token comment">/* 使用NavLink组件创建超链接，只不过NavLink可以指定超链接激活后的样式，有两个属性：
            activeClassname：写法跟 className 相似
            activeStyle：写法跟 style 相似
          */</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token comment">/* &lt;Link to=&quot;/about&quot;&gt;About&lt;/Link&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Menu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1275-1" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Menu</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* NavLink 设置样式和类名的方式与版本5有所区别，className 的设置方式跟这个 style 是一样的，只不过返回值为 class 类名 */</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token comment">/* 
							&lt;NavLink
  							to=&quot;/&quot; 
  							style={({isActive}) =&gt; {
    							return isActive ? {color: &quot;red&quot;} : null
  							}} &gt;Home&lt;/NavLink&gt; 
  				*/</span><span class="token punctuation">}</span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token comment">/* &lt;NavLink to=&quot;/about&quot;&gt;About&lt;/NavLink&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Menu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div></li></ol><h3 id="路由嵌套" tabindex="-1"><a class="header-anchor" href="#路由嵌套" aria-hidden="true">#</a> 路由嵌套</h3><div class="code-tabs"><div class="code-tabs-nav" role="tablist"><button class="code-tabs-nav-tab active" role="tab" aria-controls="codetab-1288-0" aria-selected="true">版本5 方式一</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1288-1" aria-selected="false">版本5 方式二</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1288-2" aria-selected="false">版本6 方式一</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1288-3" aria-selected="false">版本6 方式二</button></div><!--[--><div class="code-tab active" id="codetab-1288-0" role="tabpanel" aria-expanded="true"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 这种方式是直接在 Route 路由中设置嵌套 */</span><span class="token punctuation">}</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">	
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1288-1" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 这种方式是在相关组件中设置要嵌套进来的路由 */</span><span class="token punctuation">}</span>

<span class="token comment">// 设置路由</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Student<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">// 获取路由参数</span>
<span class="token keyword">const</span> <span class="token function-variable function">Student</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">student</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/about</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1288-2" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/** 
		嵌套路由方式一：缺点是如果嵌套层次过多不好维护
*/</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token comment">/* 这里表示只要是以/about/开头的路由，都匹配到 */</span><span class="token punctuation">}</span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about/*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span>

<span class="token keyword">const</span> <span class="token function-variable function">About</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">关于我们</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">孙悟空</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">猪八戒</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">沙和尚</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      
      </span><span class="token punctuation">{</span><span class="token comment">/* 这里嵌套/about/路由下的子路由，这种写法如果嵌套太多了，就不太好维护，因此推荐另一种形式 */</span><span class="token punctuation">}</span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1288-3" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">/** 
		嵌套路由方式二：需要使用一个新的组件 Outlet
*/</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
  	</span><span class="token punctuation">{</span><span class="token comment">/* 使用嵌套 Route 形式 */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span>

<span class="token keyword">const</span> <span class="token function-variable function">About</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">关于我们</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">孙悟空</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">猪八戒</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">沙和尚</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      
      </span><span class="token punctuation">{</span><span class="token comment">/* Outlet 用来表示嵌套路由中的组件，当嵌套路由中的路径匹配成功了，Outlet 则显示此组件，否则为空 */</span><span class="token punctuation">}</span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="路由参数" tabindex="-1"><a class="header-anchor" href="#路由参数" aria-hidden="true">#</a> 路由参数</h3><div class="code-tabs"><div class="code-tabs-nav" role="tablist"><button class="code-tabs-nav-tab active" role="tab" aria-controls="codetab-1314-0" aria-selected="true">版本5 方式一</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1314-1" aria-selected="false">版本5 方式二</button><button class="code-tabs-nav-tab" role="tab" aria-controls="codetab-1314-2" aria-selected="false">版本6</button></div><!--[--><div class="code-tab active" id="codetab-1314-0" role="tabpanel" aria-expanded="true"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 
当使用 Route 中的 component 指定当前路由挂载的组件后，被挂载的组件的 props 会自动的被传入三个参数：
	1、history：地址记录的信息，控制页面的跳转
	2、location：地址信息
	3、match：当前路由匹配的信息
*/</span><span class="token punctuation">}</span>

<span class="token comment">// 设置路由参数</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student/:id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Student<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">// 获取路由参数</span>
<span class="token keyword">const</span> <span class="token function-variable function">Student</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1314-1" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 
在 Route 中如果使用非 component 属性渲染组件，则 props 不会被传入方式一中提到的三个参数，这种时候就可以使用相关钩子函数：
	1、useHistory
	2、useLocation
	3、useRouteMatch
	4、useParams：这个可以直接获取参数
*/</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>useHistory<span class="token punctuation">,</span> useLocation<span class="token punctuation">,</span> useParams<span class="token punctuation">,</span> useRouteMatch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">About</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// console.log(props)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;history&quot;</span><span class="token punctuation">,</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;match&quot;</span><span class="token punctuation">,</span> <span class="token function">useRouteMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;params&quot;</span><span class="token punctuation">,</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">about</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> About
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="code-tab" id="codetab-1314-2" role="tabpanel" aria-expanded="false"><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 在版本6中，直接使用相应的钩子获取参数即可，只不过某些钩子有些许不同 */</span><span class="token punctuation">}</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student/:id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span>

<span class="token keyword">const</span> <span class="token function-variable function">Student</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用钩子获取的方式没变化</span>
  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 获取当前地址信息</span>
  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// 用来判断路径是否匹配当前路径，不匹配返回 null</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">useMatch</span><span class="token punctuation">(</span><span class="token string">&quot;/student&quot;</span><span class="token punctuation">)</span> 
  <span class="token comment">// 获取一个用于跳转页面的函数，功能类似版本5的 history.push()，使用 nav(路径, {replace: true}) 转换为 replace 模式</span>
  <span class="token keyword">const</span> nav <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><details class="hint-container details"><summary>组件中的一些路由参数的相关信息</summary><ul><li><p><code>history</code>：地址记录的信息，控制页面的跳转</p><ul><li>push()：跳转路由，可以理解为从一个盒子跳到另一个盒子</li><li>replace()：替换页面，它并不是跳转了路由，而是用一个别的路由替换了当前的路由，可以理解为盒子没变，但是盒子里的内容变了</li></ul></li><li><p><code>location</code>：地址信息</p><ul><li>hash：url 后面以<code>#</code>开头的内容</li><li>pathname</li><li>search：url 后面以<code>?</code>开头的查询字符串</li><li>state：编程式路由通过 state 传递的数据</li></ul></li><li><p><code>match</code>：匹配的信息</p><ul><li><p>isExcat：路径是否完全匹配</p></li><li><p>params：传递的路由参数</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// 设置路由参数</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student/:id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Student<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">// 获取路由参数</span>
<span class="token keyword">const</span> <span class="token function-variable function">Student</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>path：我们设置的路径</p></li><li><p>url：匹配到的路径</p></li></ul></li></ul></details><h3 id="路由跳转" tabindex="-1"><a class="header-anchor" href="#路由跳转" aria-hidden="true">#</a> 路由跳转</h3><ol><li>声明式跳转：版本5和6中均可使用<code>Link</code>和<code>NavLink</code>组件进行跳转。</li><li>编程式跳转： <ul><li>版本5中可以使用<code>props</code>传递的<code>history</code>参数中的<code>push | replace</code>实现，也可以使用<code>useHistory</code>钩子创建<code>history</code>，然后再使用其中的方法跳转</li><li>版本6中可以使用<code>useNavigate</code>钩子创建一个方法，比如叫<code>nav</code>，则可以使用<code>nav(路径)</code>来跳转，它默认是 push 模式</li></ul></li></ol><h3 id="版本5其他组件" tabindex="-1"><a class="header-anchor" href="#版本5其他组件" aria-hidden="true">#</a> 版本5其他组件</h3><h4 id="prompt-组件" tabindex="-1"><a class="header-anchor" href="#prompt-组件" aria-hidden="true">#</a> Prompt 组件</h4><p>用户跳转路由前弹出的 alert ，判断用户是否真的要跳转路由。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Prompt</span></span> <span class="token attr-name">when</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isPrompt<span class="token punctuation">}</span></span> <span class="token attr-name">message</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;将要离开页面，确认吗？&quot;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="redirect-组件" tabindex="-1"><a class="header-anchor" href="#redirect-组件" aria-hidden="true">#</a> Redirect 组件</h4><p>重定向组件，用于跳转页面。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="switch-组件" tabindex="-1"><a class="header-anchor" href="#switch-组件" aria-hidden="true">#</a> Switch 组件</h4><p>将 Route 统一放到一个 Switch 中，一个 Switch 中只会有一个路由显示。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Form<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="版本6其他组件" tabindex="-1"><a class="header-anchor" href="#版本6其他组件" aria-hidden="true">#</a> 版本6其他组件</h3><h4 id="navigate-组件" tabindex="-1"><a class="header-anchor" href="#navigate-组件" aria-hidden="true">#</a> Navigate 组件</h4><p>用来跳转到指定的位置，默认使用 push 模式跳转，给它添加 replace 属性可以转换为 replace 模式。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Navigate</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/student/1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">replace</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><!----></div></footer><nav class="page-nav"><!----><a href="/docs/react/react%E4%BD%BF%E7%94%A8svg.html" class="nav-link next" aria-label="react 使用 svg"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">react 使用 svg<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/docs/assets/app-0ea0852b.js" defer></script>
  </body>
</html>
